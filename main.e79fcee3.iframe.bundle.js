(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(module,exports,__webpack_require__){"use strict";__webpack_require__(75),__webpack_require__(16);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Selection=exports.Image=exports.CellOverlayRenderer=exports.useFilter=exports.useTouch=exports.useUndo=exports.usePagination=exports.useCopyPaste=exports.useSizer=exports.useTooltip=exports.useSelection=exports.useEditable=exports.CellOverlay=exports.Cell=exports.CellRenderer=exports.Grid=void 0;var Grid_1=__importDefault(__webpack_require__(338));exports.Grid=Grid_1.default;var Cell_1=__webpack_require__(345);Object.defineProperty(exports,"CellRenderer",{enumerable:!0,get:function get(){return Cell_1.CellRenderer}}),Object.defineProperty(exports,"Cell",{enumerable:!0,get:function get(){return Cell_1.Cell}});var CellOverlay_1=__webpack_require__(351);Object.defineProperty(exports,"CellOverlay",{enumerable:!0,get:function get(){return CellOverlay_1.CellOverlay}}),Object.defineProperty(exports,"CellOverlayRenderer",{enumerable:!0,get:function get(){return CellOverlay_1.CellRenderer}});var useEditable_1=__importDefault(__webpack_require__(355));exports.useEditable=useEditable_1.default;var useSelection_1=__importDefault(__webpack_require__(356));exports.useSelection=useSelection_1.default;var useTooltip_1=__importDefault(__webpack_require__(357));exports.useTooltip=useTooltip_1.default;var useSizer_1=__importDefault(__webpack_require__(786));exports.useSizer=useSizer_1.default;var useTouch_1=__importDefault(__webpack_require__(789));exports.useTouch=useTouch_1.default;var useCopyPaste_1=__importDefault(__webpack_require__(792));exports.useCopyPaste=useCopyPaste_1.default;var useUndo_1=__importDefault(__webpack_require__(361));exports.useUndo=useUndo_1.default;var usePagination_1=__importDefault(__webpack_require__(793));exports.usePagination=usePagination_1.default;var useFilter_1=__importDefault(__webpack_require__(362));exports.useFilter=useFilter_1.default;var Image_1=__importDefault(__webpack_require__(363));exports.Image=Image_1.default;var Selection_1=__importDefault(__webpack_require__(352));exports.Selection=Selection_1.default,exports.default=Grid_1.default,__exportStar(__webpack_require__(338),exports),__exportStar(__webpack_require__(58),exports),__exportStar(__webpack_require__(362),exports),__exportStar(__webpack_require__(361),exports),__exportStar(__webpack_require__(357),exports),__exportStar(__webpack_require__(355),exports),__exportStar(__webpack_require__(356),exports),__exportStar(__webpack_require__(97),exports),__exportStar(__webpack_require__(363),exports)},338:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(75),__webpack_require__(16),__webpack_require__(12),__webpack_require__(303),__webpack_require__(13),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(85),__webpack_require__(21),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14),__webpack_require__(38),__webpack_require__(26),__webpack_require__(29),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RESET_SCROLL_EVENTS_DEBOUNCE_INTERVAL=void 0;var react_1=__importStar(__webpack_require__(0)),ReactKonvaCore_1=__webpack_require__(740),helpers_1=__webpack_require__(58),Cell_1=__webpack_require__(345),CellOverlay_1=__webpack_require__(351),Selection_1=__importDefault(__webpack_require__(352)),FillHandle_1=__importDefault(__webpack_require__(784)),GridLine_1=__importDefault(__webpack_require__(785)),utils_1=__webpack_require__(353),tiny_invariant_1=__importDefault(__webpack_require__(354)),types_1=__webpack_require__(97),defaultShadowSettings={strokeWidth:1},defaultRowHeight=function defaultRowHeight(){return 20},defaultColumnWidth=function defaultColumnWidth(){return 60},defaultSelectionRenderer=function defaultSelectionRenderer(props){return react_1.default.createElement(Selection_1.default,Object.assign({},props))},defaultGridLineRenderer=function defaultGridLineRenderer(props){return react_1.default.createElement(GridLine_1.default,Object.assign({},props))};exports.RESET_SCROLL_EVENTS_DEBOUNCE_INTERVAL=150;var EMPTY_ARRAY=[],Grid=react_1.memo(react_1.forwardRef((function(props,forwardedRef){var _props$width=props.width,containerWidth=void 0===_props$width?800:_props$width,_props$height=props.height,containerHeight=void 0===_props$height?600:_props$height,estimatedColumnWidth=props.estimatedColumnWidth,estimatedRowHeight=props.estimatedRowHeight,_props$rowHeight=props.rowHeight,rowHeight=void 0===_props$rowHeight?defaultRowHeight:_props$rowHeight,_props$columnWidth=props.columnWidth,columnWidth=void 0===_props$columnWidth?defaultColumnWidth:_props$columnWidth,_props$rowCount=props.rowCount,rowCount=void 0===_props$rowCount?0:_props$rowCount,_props$columnCount=props.columnCount,columnCount=void 0===_props$columnCount?0:_props$columnCount,_props$scrollbarSize=props.scrollbarSize,scrollbarSize=void 0===_props$scrollbarSize?13:_props$scrollbarSize,onScroll=props.onScroll,onImmediateScroll=props.onImmediateScroll,_props$showScrollbar=props.showScrollbar,showScrollbar=void 0===_props$showScrollbar||_props$showScrollbar,_props$selectionBackg=props.selectionBackgroundColor,selectionBackgroundColor=void 0===_props$selectionBackg?"rgb(14, 101, 235, 0.1)":_props$selectionBackg,_props$selectionBorde=props.selectionBorderColor,selectionBorderColor=void 0===_props$selectionBorde?"#1a73e8":_props$selectionBorde,_props$selectionStrok=props.selectionStrokeWidth,selectionStrokeWidth=void 0===_props$selectionStrok?1:_props$selectionStrok,_props$activeCellStro=props.activeCellStrokeWidth,activeCellStrokeWidth=void 0===_props$activeCellStro?2:_props$activeCellStro,activeCell=props.activeCell,_props$selections=props.selections,selections=void 0===_props$selections?EMPTY_ARRAY:_props$selections,_props$frozenRows=props.frozenRows,frozenRows=void 0===_props$frozenRows?0:_props$frozenRows,_props$frozenColumns=props.frozenColumns,frozenColumns=void 0===_props$frozenColumns?0:_props$frozenColumns,_props$itemRenderer=props.itemRenderer,itemRenderer=void 0===_props$itemRenderer?Cell_1.CellRenderer:_props$itemRenderer,_props$enableCellOver=props.enableCellOverlay,enableCellOverlay=void 0!==_props$enableCellOver&&_props$enableCellOver,_props$overlayRendere=props.overlayRenderer,overlayRenderer=void 0===_props$overlayRendere?CellOverlay_1.CellRenderer:_props$overlayRendere,_props$mergedCells=props.mergedCells,mergedCells=void 0===_props$mergedCells?EMPTY_ARRAY:_props$mergedCells,_props$snap=props.snap,snap=void 0!==_props$snap&&_props$snap,_props$scrollThrottle=props.scrollThrottleTimeout,scrollThrottleTimeout=void 0===_props$scrollThrottle?80:_props$scrollThrottle,onViewChange=props.onViewChange,_props$selectionRende=props.selectionRenderer,selectionRenderer=void 0===_props$selectionRende?defaultSelectionRenderer:_props$selectionRende,onBeforeRenderRow=props.onBeforeRenderRow,_props$showFrozenShad=props.showFrozenShadow,showFrozenShadow=void 0!==_props$showFrozenShad&&_props$showFrozenShad,_props$shadowSettings=props.shadowSettings,shadowSettings=void 0===_props$shadowSettings?defaultShadowSettings:_props$shadowSettings,_props$borderStyles=props.borderStyles,borderStyles=void 0===_props$borderStyles?EMPTY_ARRAY:_props$borderStyles,children=props.children,stageProps=props.stageProps,_props$wrapper=props.wrapper,wrapper=void 0===_props$wrapper?function(children){return children}:_props$wrapper,_props$cellAreas=props.cellAreas,cellAreas=void 0===_props$cellAreas?EMPTY_ARRAY:_props$cellAreas,_props$showFillHandle=props.showFillHandle,showFillHandle=void 0!==_props$showFillHandle&&_props$showFillHandle,fillSelection=props.fillSelection,_props$overscanCount=props.overscanCount,overscanCount=void 0===_props$overscanCount?1:_props$overscanCount,fillHandleProps=props.fillHandleProps,_props$fillhandleBord=props.fillhandleBorderColor,fillhandleBorderColor=void 0===_props$fillhandleBord?"white":_props$fillhandleBord,_props$showGridLines=props.showGridLines,showGridLines=void 0!==_props$showGridLines&&_props$showGridLines,_props$gridLineColor=props.gridLineColor,gridLineColor=void 0===_props$gridLineColor?"#E3E2E2":_props$gridLineColor,_props$gridLineWidth=props.gridLineWidth,gridLineWidth=void 0===_props$gridLineWidth?1:_props$gridLineWidth,_props$gridLineRender=props.gridLineRenderer,gridLineRenderer=void 0===_props$gridLineRender?defaultGridLineRenderer:_props$gridLineRender,isHiddenRow=props.isHiddenRow,isHiddenColumn=props.isHiddenColumn,isHiddenCell=props.isHiddenCell,_props$scale=props.scale,scale=void 0===_props$scale?1:_props$scale,_props$enableSelectio=props.enableSelectionDrag,enableSelectionDrag=void 0!==_props$enableSelectio&&_props$enableSelectio,_props$isDraggingSele=props.isDraggingSelection,isDraggingSelection=void 0!==_props$isDraggingSele&&_props$isDraggingSele,rest=_objectWithoutProperties(props,["width","height","estimatedColumnWidth","estimatedRowHeight","rowHeight","columnWidth","rowCount","columnCount","scrollbarSize","onScroll","onImmediateScroll","showScrollbar","selectionBackgroundColor","selectionBorderColor","selectionStrokeWidth","activeCellStrokeWidth","activeCell","selections","frozenRows","frozenColumns","itemRenderer","enableCellOverlay","overlayRenderer","mergedCells","snap","scrollThrottleTimeout","onViewChange","selectionRenderer","onBeforeRenderRow","showFrozenShadow","shadowSettings","borderStyles","children","stageProps","wrapper","cellAreas","showFillHandle","fillSelection","overscanCount","fillHandleProps","fillhandleBorderColor","showGridLines","gridLineColor","gridLineWidth","gridLineRenderer","isHiddenRow","isHiddenColumn","isHiddenCell","scale","enableSelectionDrag","isDraggingSelection"]);tiny_invariant_1.default(!(children&&"function"!=typeof children),"Children should be a function"),react_1.useImperativeHandle(forwardedRef,(function(){return{scrollTo:scrollTo,scrollBy:scrollBy,scrollToItem:scrollToItem,stage:stageRef.current,container:containerRef.current,resetAfterIndices:resetAfterIndices,getScrollPosition:getScrollPosition,isMergedCell:isMergedCell,getCellBounds:getCellBounds,getCellCoordsFromOffset:getCellCoordsFromOffset,getCellOffsetFromCoords:getCellOffsetFromCoords,getActualCellCoords:getActualCellCoords,focus:focusContainer,resizeColumns:resizeColumns,resizeRows:resizeRows,getViewPort:getViewPort,getRelativePositionFromOffset:getRelativePositionFromOffset,scrollToTop:scrollToTop,scrollToBottom:scrollToBottom,getDimensions:getDimensions,getRowOffset:getRowOffset,getColumnOffset:getColumnOffset}}));var instanceProps=react_1.useRef({columnMetadataMap:{},rowMetadataMap:{},lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,estimatedColumnWidth:estimatedColumnWidth||50,estimatedRowHeight:estimatedRowHeight||50,recalcColumnIndices:[],recalcRowIndices:[]}),stageRef=react_1.useRef(null),containerRef=react_1.useRef(null),scrollContainerRef=react_1.useRef(null),verticalScrollRef=react_1.useRef(null),wheelingRef=react_1.useRef(null),horizontalScrollRef=react_1.useRef(null),_react_1$useReducer2=_slicedToArray(react_1.useReducer((function(s){return s+1}),0),2),forceRender=(_react_1$useReducer2[0],_react_1$useReducer2[1]),_react_1$useState2=_slicedToArray(react_1.useState({scrollTop:0,scrollLeft:0,isScrolling:!1,verticalScrollDirection:types_1.Direction.Down,horizontalScrollDirection:types_1.Direction.Right}),2),scrollState=_react_1$useState2[0],setScrollState=_react_1$useState2[1],scrollSnapRefs=react_1.useRef(null),scrollTop=scrollState.scrollTop,scrollLeft=scrollState.scrollLeft,isScrolling=scrollState.isScrolling,verticalScrollDirection=scrollState.verticalScrollDirection,horizontalScrollDirection=scrollState.horizontalScrollDirection,isMounted=react_1.useRef(!1),focusContainer=react_1.useCallback((function(){var _a;if(helpers_1.canUseDOM&&document.activeElement!==containerRef.current)return null===(_a=containerRef.current)||void 0===_a?void 0:_a.focus()}),[]),getRowOffset=react_1.useCallback((function(index){return helpers_1.getRowOffset({index:index,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps.current,scale:scale})}),[rowHeight,columnWidth,instanceProps.current,scale]),getColumnOffset=react_1.useCallback((function(index){return helpers_1.getColumnOffset({index:index,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps.current,scale:scale})}),[rowHeight,columnWidth,instanceProps.current,scale]),getRowHeight=react_1.useCallback((function(index){return helpers_1.getRowHeight(index,instanceProps.current)}),[instanceProps.current]),getColumnWidth=react_1.useCallback((function(index){return helpers_1.getColumnWidth(index,instanceProps.current)}),[instanceProps.current]);react_1.useEffect((function(){isMounted.current&&(null==onScroll||onScroll({scrollTop:scrollTop,scrollLeft:scrollLeft}))}),[scrollTop,scrollLeft]),react_1.useEffect((function(){var _a;return null===(_a=scrollContainerRef.current)||void 0===_a||_a.addEventListener("wheel",handleWheel,{passive:!1}),isMounted.current=!0,function(){var _a;null===(_a=scrollContainerRef.current)||void 0===_a||_a.removeEventListener("wheel",handleWheel)}}),[]);var getScrollPosition=react_1.useCallback((function(){return{scrollTop:scrollTop,scrollLeft:scrollLeft}}),[scrollTop,scrollLeft]),resetAfterIndices=react_1.useCallback((function(_ref){var columnIndex=_ref.columnIndex,rowIndex=_ref.rowIndex,shouldForceUpdate=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"number"==typeof columnIndex&&(instanceProps.current.recalcColumnIndices=[],instanceProps.current.lastMeasuredColumnIndex=Math.min(instanceProps.current.lastMeasuredColumnIndex,columnIndex-1)),"number"==typeof rowIndex&&(instanceProps.current.recalcRowIndices=[],instanceProps.current.lastMeasuredRowIndex=Math.min(instanceProps.current.lastMeasuredRowIndex,rowIndex-1)),shouldForceUpdate&&forceRender()}),[]),mergedCellMap=react_1.useMemo((function(){for(var mergedCellMap=new Map,i=0;i<mergedCells.length;i++){var _step,bounds=mergedCells[i],_iterator=_createForOfIteratorHelper(helpers_1.getBoundedCells(bounds));try{for(_iterator.s();!(_step=_iterator.n()).done;){var cell=_step.value;mergedCellMap.set(cell,bounds)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return mergedCellMap}),[mergedCells]),isMergedCell=react_1.useCallback((function(_ref2){var rowIndex=_ref2.rowIndex,columnIndex=_ref2.columnIndex;return mergedCellMap.has(helpers_1.cellIdentifier(rowIndex,columnIndex))}),[mergedCells]),getCellBounds=react_1.useCallback((function(_ref3){var rowIndex=_ref3.rowIndex,columnIndex=_ref3.columnIndex,spanMerges=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(spanMerges){var isMerged=isMergedCell({rowIndex:rowIndex,columnIndex:columnIndex});if(isMerged)return mergedCellMap.get(helpers_1.cellIdentifier(rowIndex,columnIndex))}return{top:rowIndex,left:columnIndex,right:columnIndex,bottom:rowIndex}}),[mergedCellMap]),getActualCellCoords=react_1.useCallback((function(_ref4){var rowIndex=_ref4.rowIndex,columnIndex=_ref4.columnIndex;if(isMergedCell({rowIndex:rowIndex,columnIndex:columnIndex})){var cell=mergedCellMap.get(helpers_1.cellIdentifier(rowIndex,columnIndex));return{rowIndex:null==cell?void 0:cell.top,columnIndex:null==cell?void 0:cell.left}}return{rowIndex:rowIndex,columnIndex:columnIndex}}),[mergedCellMap]),frozenColumnWidth=getColumnOffset(frozenColumns),frozenRowHeight=getRowOffset(frozenRows),_react_1$useMemo2=_slicedToArray(react_1.useMemo((function(){var startIndex=helpers_1.getRowStartIndexForOffset({rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps.current,offset:scrollTop+frozenRowHeight,scale:scale}),stopIndex=helpers_1.getRowStopIndexForStartIndex({startIndex:startIndex,rowCount:rowCount,rowHeight:rowHeight,columnWidth:columnWidth,scrollTop:scrollTop,containerHeight:containerHeight,instanceProps:instanceProps.current,scale:scale}),overscanBackward=isScrolling&&verticalScrollDirection!==types_1.Direction.Up?1:Math.max(1,overscanCount),overscanForward=isScrolling&&verticalScrollDirection!==types_1.Direction.Down?1:Math.max(1,overscanCount);return[Math.max(0,startIndex-overscanBackward),Math.max(0,Math.min(rowCount-1,stopIndex+overscanForward)),startIndex,stopIndex]}),[rowHeight,columnWidth,rowCount,columnCount,scale,scrollTop,containerHeight,frozenRows,overscanCount,frozenRowHeight]),4),rowStartIndex=_react_1$useMemo2[0],rowStopIndex=_react_1$useMemo2[1],visibleRowStartIndex=_react_1$useMemo2[2],visibleRowStopIndex=_react_1$useMemo2[3],_react_1$useMemo4=_slicedToArray(react_1.useMemo((function(){var startIndex=helpers_1.getColumnStartIndexForOffset({rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps.current,offset:scrollLeft+frozenColumnWidth,scale:scale}),stopIndex=helpers_1.getColumnStopIndexForStartIndex({startIndex:startIndex,columnCount:columnCount,rowHeight:rowHeight,columnWidth:columnWidth,scrollLeft:scrollLeft,containerWidth:containerWidth,instanceProps:instanceProps.current,scale:scale}),overscanBackward=isScrolling&&horizontalScrollDirection!==types_1.Direction.Left?1:Math.max(1,overscanCount),overscanForward=isScrolling&&horizontalScrollDirection!==types_1.Direction.Right?1:Math.max(1,overscanCount);return[Math.max(0,startIndex-overscanBackward),Math.max(0,Math.min(columnCount-1,stopIndex+overscanForward)),startIndex,stopIndex]}),[rowHeight,columnWidth,rowCount,columnCount,scale,frozenColumns,containerWidth,scrollLeft,frozenColumnWidth]),4),columnStartIndex=_react_1$useMemo4[0],columnStopIndex=_react_1$useMemo4[1],visibleColumnStartIndex=_react_1$useMemo4[2],visibleColumnStopIndex=_react_1$useMemo4[3],estimatedTotalHeight=helpers_1.getEstimatedTotalHeight(rowCount,instanceProps.current),estimatedTotalWidth=helpers_1.getEstimatedTotalWidth(columnCount,instanceProps.current),getDimensions=react_1.useCallback((function(){return{containerWidth:containerWidth,containerHeight:containerHeight,estimatedTotalWidth:estimatedTotalWidth,estimatedTotalHeight:estimatedTotalHeight}}),[containerWidth,containerHeight,estimatedTotalWidth,estimatedTotalHeight]);react_1.useEffect((function(){snap&&(scrollSnapRefs.current={visibleRowStartIndex:visibleRowStartIndex,rowCount:rowCount,frozenRows:frozenRows,visibleColumnStartIndex:visibleColumnStartIndex,columnCount:columnCount,frozenColumns:frozenColumns,isHiddenRow:isHiddenRow,isHiddenColumn:isHiddenColumn})}),[snap,visibleRowStartIndex,rowCount,frozenRows,visibleColumnStartIndex,columnCount,frozenColumns,isHiddenRow,isHiddenColumn]);var snapToRowFn=react_1.useCallback((function(_ref5){var deltaY=_ref5.deltaY;if(verticalScrollRef.current&&scrollSnapRefs.current&&0!==deltaY){var direction=deltaY<0?types_1.Direction.Up:types_1.Direction.Down,_scrollSnapRefs$curre=scrollSnapRefs.current,_visibleRowStartIndex=_scrollSnapRefs$curre.visibleRowStartIndex,_rowCount=_scrollSnapRefs$curre.rowCount,_isHiddenRow=_scrollSnapRefs$curre.isHiddenRow,nextRowIndex=direction===types_1.Direction.Up?Math.max(0,_visibleRowStartIndex-1):Math.min(_visibleRowStartIndex,_rowCount-1);nextRowIndex=helpers_1.clampIndex(nextRowIndex,_isHiddenRow,direction);var _rowHeight=getRowHeight(nextRowIndex);verticalScrollRef.current.scrollTop+=(direction===types_1.Direction.Up?-1:1)*_rowHeight}}),[]),snapToColumnFn=react_1.useCallback((function(_ref6){var deltaX=_ref6.deltaX;if(horizontalScrollRef.current&&scrollSnapRefs.current&&0!==deltaX){var _scrollSnapRefs$curre2=scrollSnapRefs.current,_visibleColumnStartIndex=_scrollSnapRefs$curre2.visibleColumnStartIndex,_columnCount=_scrollSnapRefs$curre2.columnCount,_isHiddenColumn=_scrollSnapRefs$curre2.isHiddenColumn,direction=deltaX<0?types_1.Direction.Left:types_1.Direction.Right,nextColumnIndex=direction===types_1.Direction.Left?Math.max(0,_visibleColumnStartIndex-1):Math.min(_visibleColumnStartIndex,_columnCount-1);nextColumnIndex=helpers_1.clampIndex(nextColumnIndex,_isHiddenColumn,direction);var _columnWidth=getColumnWidth(nextColumnIndex);horizontalScrollRef.current.scrollLeft+=(direction===types_1.Direction.Left?-1:1)*_columnWidth}}),[]),snapToRowThrottler=react_1.useRef(),snapToColumnThrottler=react_1.useRef();react_1.useEffect((function(){return snap&&(snapToRowThrottler.current=helpers_1.throttle(snapToRowFn,scrollThrottleTimeout),snapToColumnThrottler.current=helpers_1.throttle(snapToColumnFn,scrollThrottleTimeout)),function(){snapToRowThrottler.current=void 0,snapToColumnThrottler.current=void 0}}),[snap]);var isWithinFrozenColumnBoundary=react_1.useCallback((function(x){return frozenColumns>0&&x<frozenColumnWidth}),[frozenColumns,frozenColumnWidth]),isWithinFrozenRowBoundary=react_1.useCallback((function(y){return frozenRows>0&&y<frozenRowHeight}),[frozenRows,frozenRowHeight]),getRelativePositionFromOffset=react_1.useCallback((function(left,top){var _a;if(tiny_invariant_1.default("number"==typeof left&&"number"==typeof top,"Top and left should be a number"),!stageRef.current)return null;var stage=stageRef.current.getStage(),rect=null===(_a=containerRef.current)||void 0===_a?void 0:_a.getBoundingClientRect();rect&&(left-=rect.x,top-=rect.y);var _stage$getAbsoluteTra=stage.getAbsoluteTransform().copy().invert().point({x:left,y:top});return{x:_stage$getAbsoluteTra.x,y:_stage$getAbsoluteTra.y}}),[]),getCellCoordsFromOffset=react_1.useCallback((function(left,top){var includeFrozen=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],pos=getRelativePositionFromOffset(left,top);if(!pos)return null;var x=pos.x,y=pos.y,rowOffset=includeFrozen&&isWithinFrozenRowBoundary(y)?y:y+scrollTop,columnOffset=includeFrozen&&isWithinFrozenColumnBoundary(x)?x:x+scrollLeft;if(rowOffset>estimatedTotalHeight||columnOffset>estimatedTotalWidth)return null;var rowIndex=helpers_1.getRowStartIndexForOffset({rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps.current,offset:rowOffset,scale:scale}),columnIndex=helpers_1.getColumnStartIndexForOffset({rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps.current,offset:columnOffset,scale:scale}),bounds=getCellBounds({rowIndex:rowIndex,columnIndex:columnIndex});return{rowIndex:bounds.top,columnIndex:bounds.left}}),[scrollLeft,rowHeight,columnWidth,scrollTop,rowCount,estimatedTotalHeight,estimatedTotalWidth,columnCount,mergedCellMap]),getCellOffsetFromCoords=react_1.useCallback((function(cell){var _getCellBounds=getCellBounds(cell),rowIndex=_getCellBounds.top,columnIndex=_getCellBounds.left,right=_getCellBounds.right,bottom=_getCellBounds.bottom,x=getColumnOffset(columnIndex),y=getRowOffset(rowIndex);return{x:x,y:y,width:getColumnOffset(right+1)-x,height:getRowOffset(bottom+1)-y}}),[mergedCellMap]),resizeColumns=react_1.useCallback((function(indices){var leftMost=Math.min.apply(Math,_toConsumableArray(indices));instanceProps.current.recalcColumnIndices=indices,resetAfterIndices({columnIndex:leftMost},!1),forceRender()}),[]),resizeRows=react_1.useCallback((function(indices){var topMost=Math.min.apply(Math,_toConsumableArray(indices));instanceProps.current.recalcRowIndices=indices,resetAfterIndices({rowIndex:topMost},!1),forceRender()}),[]);react_1.useEffect((function(){instanceProps.current.recalcColumnIndices.length&&(instanceProps.current.recalcColumnIndices.length=0),instanceProps.current.recalcRowIndices.length&&(instanceProps.current.recalcRowIndices.length=0)}),[rowStopIndex,columnStopIndex,scale]);var getViewPort=react_1.useCallback((function(){return{rowStartIndex:rowStartIndex,rowStopIndex:rowStopIndex,columnStartIndex:columnStartIndex,columnStopIndex:columnStopIndex,visibleRowStartIndex:visibleRowStartIndex,visibleRowStopIndex:visibleRowStopIndex,visibleColumnStartIndex:visibleColumnStartIndex,visibleColumnStopIndex:visibleColumnStopIndex}}),[rowStartIndex,rowStopIndex,columnStartIndex,columnStopIndex,visibleRowStartIndex,visibleRowStopIndex,visibleColumnStartIndex,visibleColumnStopIndex]),resetIsScrollingTimeoutID=react_1.useRef(null),resetIsScrollingDebounced=react_1.useCallback((function(){null!==resetIsScrollingTimeoutID.current&&helpers_1.cancelTimeout(resetIsScrollingTimeoutID.current),resetIsScrollingTimeoutID.current=helpers_1.requestTimeout(resetIsScrolling,exports.RESET_SCROLL_EVENTS_DEBOUNCE_INTERVAL)}),[]),resetIsScrolling=react_1.useCallback((function(){resetIsScrollingTimeoutID.current=null,setScrollState((function(prev){return Object.assign({},prev,{isScrolling:!1})}))}),[]),handleScroll=react_1.useCallback((function(e){var scrollTop=e.target.scrollTop;setScrollState((function(prev){return Object.assign({},prev,{isScrolling:!0,verticalScrollDirection:prev.scrollTop>scrollTop?types_1.Direction.Up:types_1.Direction.Down,scrollTop:scrollTop})})),null==onImmediateScroll||onImmediateScroll({scrollTop:scrollTop,scrollLeft:scrollLeft}),resetIsScrollingDebounced()}),[scrollLeft]),handleScrollLeft=react_1.useCallback((function(e){var scrollLeft=e.target.scrollLeft;setScrollState((function(prev){return Object.assign({},prev,{isScrolling:!0,horizontalScrollDirection:prev.scrollLeft>scrollLeft?types_1.Direction.Left:types_1.Direction.Right,scrollLeft:scrollLeft})})),null==onImmediateScroll||onImmediateScroll({scrollLeft:scrollLeft,scrollTop:scrollTop}),resetIsScrollingDebounced()}),[scrollTop]),scrollTo=react_1.useCallback((function(_ref7){var scrollTop=_ref7.scrollTop,scrollLeft=_ref7.scrollLeft;showScrollbar?(horizontalScrollRef.current&&void 0!==scrollLeft&&(horizontalScrollRef.current.scrollLeft=scrollLeft),verticalScrollRef.current&&void 0!==scrollTop&&(verticalScrollRef.current.scrollTop=scrollTop)):setScrollState((function(prev){return Object.assign({},prev,{scrollLeft:null==scrollLeft?prev.scrollLeft:scrollLeft,scrollTop:null==scrollTop?prev.scrollTop:scrollTop})}))}),[showScrollbar]),scrollToTop=react_1.useCallback((function(){scrollTo({scrollTop:0,scrollLeft:0})}),[]),scrollToBottom=react_1.useCallback((function(){scrollTo({scrollTop:estimatedTotalHeight-containerHeight})}),[estimatedTotalHeight,containerHeight]),scrollBy=react_1.useCallback((function(_ref8){var x=_ref8.x,y=_ref8.y;showScrollbar?(horizontalScrollRef.current&&void 0!==x&&(horizontalScrollRef.current.scrollLeft+=x),verticalScrollRef.current&&void 0!==y&&(verticalScrollRef.current.scrollTop+=y)):setScrollState((function(prev){return Object.assign({},prev,{scrollLeft:null==x?prev.scrollLeft:prev.scrollLeft+x,scrollTop:null==y?prev.scrollTop:prev.scrollTop+y})}))}),[]),scrollToItem=react_1.useCallback((function(_ref9){var rowIndex=_ref9.rowIndex,columnIndex=_ref9.columnIndex,align=arguments.length>1&&void 0!==arguments[1]?arguments[1]:helpers_1.Align.smart,isFrozenRow=void 0!==rowIndex&&rowIndex<frozenRows,isFrozenColumn=void 0!==columnIndex&&columnIndex<frozenColumns,frozenColumnOffset=getColumnOffset(frozenColumns),width=(void 0!==columnIndex&&getColumnOffset(columnIndex),void 0!==rowIndex&&getRowOffset(rowIndex),void 0!==columnIndex?getColumnWidth(columnIndex):0),height=void 0!==rowIndex?getRowHeight(rowIndex):0,columnAlign=width>containerWidth?helpers_1.Align.start:align,rowAlign=height>containerHeight?helpers_1.Align.start:align,newScrollLeft=void 0===columnIndex||isFrozenColumn?void 0:helpers_1.getOffsetForColumnAndAlignment({index:columnIndex,containerHeight:containerHeight,containerWidth:containerWidth,columnCount:columnCount,columnWidth:columnWidth,rowCount:rowCount,rowHeight:rowHeight,scrollOffset:scrollLeft,instanceProps:instanceProps.current,scrollbarSize:scrollbarSize,frozenOffset:frozenColumnOffset,align:columnAlign,scale:scale,estimatedTotalWidth:estimatedTotalWidth,estimatedTotalHeight:estimatedTotalHeight}),frozenRowOffset=getRowOffset(frozenRows),newScrollTop=void 0===rowIndex||isFrozenRow?void 0:helpers_1.getOffsetForRowAndAlignment({index:rowIndex,containerHeight:containerHeight,containerWidth:containerWidth,columnCount:columnCount,columnWidth:columnWidth,rowCount:rowCount,rowHeight:rowHeight,scrollOffset:scrollTop,instanceProps:instanceProps.current,scrollbarSize:scrollbarSize,frozenOffset:frozenRowOffset,align:rowAlign,scale:scale,estimatedTotalWidth:estimatedTotalWidth,estimatedTotalHeight:estimatedTotalHeight}),coords={scrollLeft:newScrollLeft,scrollTop:newScrollTop},isOutsideViewport=void 0!==rowIndex&&rowIndex>rowStopIndex+(rowStopIndex-rowStartIndex)||void 0!==columnIndex&&columnIndex>columnStopIndex+(columnStopIndex-columnStartIndex);isOutsideViewport?window.requestAnimationFrame((function(){scrollTo(coords)})):scrollTo(coords)}),[containerHeight,containerWidth,estimatedTotalWidth,estimatedTotalHeight,rowCount,columnCount,scrollbarSize,scrollLeft,scrollTop,frozenRows,frozenColumns]),handleWheel=react_1.useCallback((function(event){var _a,_b,_c,_d,isScrollingHorizontally=event.shiftKey;event.preventDefault();var deltaX=event.deltaX,deltaY=event.deltaY,deltaMode=event.deltaMode;if(!wheelingRef.current){var dx=isScrollingHorizontally?deltaY:deltaX,dy=deltaY,isHorizontal=isScrollingHorizontally||Math.abs(dx)>Math.abs(dy);if(snap)isHorizontal?null===(_a=snapToColumnThrottler.current)||void 0===_a||_a.call(snapToColumnThrottler,{deltaX:deltaX}):null===(_b=snapToRowThrottler.current)||void 0===_b||_b.call(snapToRowThrottler,{deltaY:deltaY});else if(1===deltaMode&&(dy*=scrollbarSize),horizontalScrollRef.current&&verticalScrollRef.current){var currentScroll=isHorizontal?null===(_c=horizontalScrollRef.current)||void 0===_c?void 0:_c.scrollLeft:null===(_d=verticalScrollRef.current)||void 0===_d?void 0:_d.scrollTop;wheelingRef.current=window.requestAnimationFrame((function(){wheelingRef.current=null,isHorizontal?horizontalScrollRef.current&&(horizontalScrollRef.current.scrollLeft=currentScroll+dx):verticalScrollRef.current&&(verticalScrollRef.current.scrollTop=currentScroll+dy)}))}}}),[]);react_1.useEffect((function(){null==onViewChange||onViewChange({rowStartIndex:rowStartIndex,rowStopIndex:rowStopIndex,columnStartIndex:columnStartIndex,columnStopIndex:columnStopIndex,visibleRowStartIndex:visibleRowStartIndex,visibleRowStopIndex:visibleRowStopIndex,visibleColumnStartIndex:visibleColumnStartIndex,visibleColumnStopIndex:visibleColumnStopIndex})}),[rowStartIndex,rowStopIndex,columnStartIndex,columnStopIndex,visibleRowStartIndex,visibleRowStopIndex,visibleColumnStartIndex,visibleColumnStopIndex]);var gridLines=[],gridLinesFrozenRow=[],gridLinesFrozenColumn=[],gridLinesFrozenIntersection=[];if(showGridLines){for(var rowIndex=rowStartIndex;rowIndex<=rowStopIndex;rowIndex++)if(!(rowIndex<frozenRows||(null==isHiddenRow?void 0:isHiddenRow(rowIndex)))){var x1=getColumnOffset(frozenColumns),x2=getColumnOffset(Math.min(columnStopIndex+1,columnCount)),y1=getRowOffset(Math.min(rowIndex+1,rowCount)),y2=y1;gridLines.push(gridLineRenderer({points:[x1,y1,x2,y2],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetY:-.5,key:helpers_1.itemKey({rowIndex:rowIndex,columnIndex:y1})})),gridLinesFrozenColumn.push(gridLineRenderer({points:[0,y1,x2,y2],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetY:-.5,key:helpers_1.itemKey({rowIndex:rowIndex,columnIndex:y1})}))}for(var columnIndex=columnStartIndex;columnIndex<=columnStopIndex;columnIndex++){var _x=getColumnOffset(Math.min(columnIndex+1,columnCount)),_x2=_x,_y=getRowOffset(frozenRows),_y2=getRowOffset(Math.min(rowStopIndex+1,rowCount));gridLines.push(gridLineRenderer({points:[_x,_y,_x2,_y2],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetX:-.5,key:helpers_1.itemKey({rowIndex:_x,columnIndex:columnIndex})})),gridLinesFrozenRow.push(gridLineRenderer({points:[_x,0,_x2,_y2],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetX:-.5,key:helpers_1.itemKey({rowIndex:_x,columnIndex:columnIndex})}))}for(var _rowIndex=0;_rowIndex<Math.min(columnStopIndex,frozenRows);_rowIndex++)if(!(null==isHiddenRow?void 0:isHiddenRow(_rowIndex))){var _x4=getColumnOffset(Math.min(columnStopIndex+1,columnCount)),_y3=getRowOffset(Math.min(_rowIndex+1,rowCount)),_y4=_y3;gridLinesFrozenRow.push(gridLineRenderer({points:[0,_y3,_x4,_y4],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetY:-.5,key:helpers_1.itemKey({rowIndex:_rowIndex,columnIndex:_y3})})),gridLinesFrozenIntersection.push(gridLineRenderer({points:[0,_y3,_x4,_y4],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetY:-.5,key:helpers_1.itemKey({rowIndex:_rowIndex,columnIndex:_y3})}))}for(var _columnIndex=0;_columnIndex<Math.min(columnStopIndex,frozenColumns);_columnIndex++){var _x5=getColumnOffset(Math.min(_columnIndex+1,columnCount)),_x6=_x5,_y6=getRowOffset(Math.min(rowStopIndex+1,rowCount));gridLinesFrozenColumn.push(gridLineRenderer({points:[_x5,0,_x6,_y6],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetX:-.5,key:helpers_1.itemKey({rowIndex:_x5,columnIndex:_columnIndex})})),gridLinesFrozenIntersection.push(gridLineRenderer({points:[_x5,0,_x6,_y6],stroke:gridLineColor,strokeWidth:gridLineWidth,offsetX:-.5,key:helpers_1.itemKey({rowIndex:_x5,columnIndex:_columnIndex})}))}}var mergedCellRenderMap=new Set,cells=[],cellOverlays=[];if(columnCount>0&&rowCount)for(var _rowIndex2=rowStartIndex;_rowIndex2<=rowStopIndex;_rowIndex2++)if(!(_rowIndex2<frozenRows||(null==isHiddenRow?void 0:isHiddenRow(_rowIndex2)))){null==onBeforeRenderRow||onBeforeRenderRow(_rowIndex2);for(var _columnIndex2=columnStartIndex;_columnIndex2<=columnStopIndex;_columnIndex2++)if(!(_columnIndex2<frozenColumns)){var isMerged=isMergedCell({rowIndex:_rowIndex2,columnIndex:_columnIndex2}),bounds=getCellBounds({rowIndex:_rowIndex2,columnIndex:_columnIndex2}),actualRowIndex=isMerged?bounds.top:_rowIndex2,actualColumnIndex=isMerged?bounds.left:_columnIndex2,actualBottom=Math.max(_rowIndex2,bounds.bottom),actualRight=Math.max(_columnIndex2,bounds.right);if(isMerged||!(null==isHiddenCell?void 0:isHiddenCell(actualRowIndex,actualColumnIndex))){if(isMerged){var cellId=helpers_1.cellIdentifier(bounds.top,bounds.left);if(mergedCellRenderMap.has(cellId))continue;mergedCellRenderMap.add(cellId)}var y=getRowOffset(actualRowIndex),height=getRowOffset(actualBottom)-y+getRowHeight(actualBottom),x=getColumnOffset(actualColumnIndex),width=getColumnOffset(actualRight)-x+getColumnWidth(actualRight);cells.push(itemRenderer({x:x,y:y,width:width,height:height,rowIndex:actualRowIndex,columnIndex:actualColumnIndex,isMergedCell:isMerged,key:helpers_1.itemKey({rowIndex:actualRowIndex,columnIndex:actualColumnIndex})})),enableCellOverlay&&cellOverlays.push(overlayRenderer({x:x,y:y,width:width,height:height,rowIndex:actualRowIndex,columnIndex:actualColumnIndex,isMergedCell:isMerged,key:helpers_1.itemKey({rowIndex:actualRowIndex,columnIndex:actualColumnIndex})}))}}}var _step2,ranges=[],_iterator2=_createForOfIteratorHelper(cellAreas);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ref10=_step2.value,_rowIndex3=_ref10.rowIndex,_columnIndex3=_ref10.columnIndex,toColumnIndex=_ref10.toColumnIndex;if(!(_rowIndex3<frozenRows||_columnIndex3<frozenColumns||isMergedCell({rowIndex:_rowIndex3,columnIndex:_columnIndex3})||(null==isHiddenCell?void 0:isHiddenCell(_rowIndex3,_columnIndex3)))){var _x7=getColumnOffset(_columnIndex3),_y7=getRowOffset(_rowIndex3),_height=getRowHeight(_rowIndex3),_getCellOffsetFromCoo2=getCellOffsetFromCoords({rowIndex:_rowIndex3,columnIndex:toColumnIndex+1}).x,offsetX=void 0===_getCellOffsetFromCoo2?0:_getCellOffsetFromCoo2;ranges.push(itemRenderer({x:_x7,y:_y7,width:offsetX-_x7,height:_height,rowIndex:_rowIndex3,columnIndex:_columnIndex3,key:"range:".concat(helpers_1.itemKey({rowIndex:_rowIndex3,columnIndex:_columnIndex3}))}))}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}for(var frozenRowCells=[],frozenRowCellOverlays=[],_rowIndex4=0;_rowIndex4<Math.min(rowStopIndex,frozenRows);_rowIndex4++)if(!(null==isHiddenRow?void 0:isHiddenRow(_rowIndex4))){null==onBeforeRenderRow||onBeforeRenderRow(_rowIndex4);for(var _columnIndex4=columnStartIndex;_columnIndex4<=columnStopIndex;_columnIndex4++)if(!(_columnIndex4<frozenColumns)){var _isMerged=isMergedCell({rowIndex:_rowIndex4,columnIndex:_columnIndex4}),_bounds=getCellBounds({rowIndex:_rowIndex4,columnIndex:_columnIndex4}),_actualRowIndex=_isMerged?_bounds.top:_rowIndex4,_actualColumnIndex=_isMerged?_bounds.left:_columnIndex4,_actualBottom=Math.max(_rowIndex4,_bounds.bottom),_actualRight=Math.max(_columnIndex4,_bounds.right);if(_isMerged||!(null==isHiddenCell?void 0:isHiddenCell(_actualRowIndex,_actualColumnIndex))){if(_isMerged){var _cellId=helpers_1.cellIdentifier(_bounds.top,_bounds.left);if(mergedCellRenderMap.has(_cellId))continue;mergedCellRenderMap.add(_cellId)}var _y8=getRowOffset(_actualRowIndex),_height2=getRowOffset(_actualBottom)-_y8+getRowHeight(_actualBottom),_x8=getColumnOffset(_actualColumnIndex),_width=getColumnOffset(_actualRight)-_x8+getColumnWidth(_actualRight);frozenRowCells.push(itemRenderer({x:_x8,y:_y8,width:_width,height:_height2,rowIndex:_actualRowIndex,columnIndex:_actualColumnIndex,isMergedCell:_isMerged,key:helpers_1.itemKey({rowIndex:_actualRowIndex,columnIndex:_actualColumnIndex})})),enableCellOverlay&&frozenRowCellOverlays.push(overlayRenderer({x:_x8,y:_y8,width:_width,height:_height2,rowIndex:_actualRowIndex,columnIndex:_actualColumnIndex,isMergedCell:_isMerged,key:helpers_1.itemKey({rowIndex:_actualRowIndex,columnIndex:_actualColumnIndex})}))}}}for(var frozenColumnCells=[],frozenColumnCellOverlays=[],_rowIndex5=rowStartIndex;_rowIndex5<=rowStopIndex;_rowIndex5++)if(!(_rowIndex5<frozenRows||(null==isHiddenRow?void 0:isHiddenRow(_rowIndex5)))){null==onBeforeRenderRow||onBeforeRenderRow(_rowIndex5);for(var _columnIndex5=0;_columnIndex5<Math.min(columnStopIndex,frozenColumns);_columnIndex5++){var _isMerged2=isMergedCell({rowIndex:_rowIndex5,columnIndex:_columnIndex5}),_bounds2=getCellBounds({rowIndex:_rowIndex5,columnIndex:_columnIndex5}),_actualRowIndex2=_isMerged2?_bounds2.top:_rowIndex5,_actualColumnIndex2=_isMerged2?_bounds2.left:_columnIndex5,_actualBottom2=Math.max(_rowIndex5,_bounds2.bottom),_actualRight2=Math.max(_columnIndex5,_bounds2.right);if(_isMerged2||!(null==isHiddenCell?void 0:isHiddenCell(_actualRowIndex2,_actualColumnIndex2))){if(_isMerged2){var _cellId2=helpers_1.cellIdentifier(_bounds2.top,_bounds2.left);if(mergedCellRenderMap.has(_cellId2))continue;mergedCellRenderMap.add(_cellId2)}var _y9=getRowOffset(_actualRowIndex2),_height3=getRowOffset(_actualBottom2)-_y9+getRowHeight(_actualBottom2),_x9=getColumnOffset(_actualColumnIndex2),_width2=getColumnOffset(_actualRight2)-_x9+getColumnWidth(_actualRight2);frozenColumnCells.push(itemRenderer({x:_x9,y:_y9,width:_width2,height:_height3,rowIndex:_actualRowIndex2,columnIndex:_actualColumnIndex2,isMergedCell:_isMerged2,key:helpers_1.itemKey({rowIndex:_actualRowIndex2,columnIndex:_actualColumnIndex2})})),enableCellOverlay&&frozenColumnCellOverlays.push(overlayRenderer({x:_x9,y:_y9,width:_width2,height:_height3,rowIndex:_actualRowIndex2,columnIndex:_actualColumnIndex2,isMergedCell:_isMerged2,key:helpers_1.itemKey({rowIndex:_actualRowIndex2,columnIndex:_actualColumnIndex2})}))}}}for(var frozenColumnShadow=react_1.useMemo((function(){var frozenColumnLineX=getColumnOffset(frozenColumns),frozenColumnLineY=getRowOffset(Math.min(rowStopIndex+1,rowCount));return react_1.default.createElement(ReactKonvaCore_1.Line,Object.assign({points:[frozenColumnLineX,0,frozenColumnLineX,frozenColumnLineY],offsetX:-.5,strokeWidth:1,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,listening:!1,perfectDrawEnabled:!1},shadowSettings))}),[shadowSettings,frozenColumns,rowStopIndex,rowCount,instanceProps.current.lastMeasuredColumnIndex,instanceProps.current.recalcColumnIndices]),frozenRowShadow=react_1.useMemo((function(){var frozenRowLineY=getRowOffset(frozenRows),frozenRowLineX=getColumnOffset(Math.min(columnStopIndex+1,columnCount));return react_1.default.createElement(ReactKonvaCore_1.Line,Object.assign({points:[0,frozenRowLineY,frozenRowLineX,frozenRowLineY],offsetY:-.5,strokeWidth:1,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,listening:!1,perfectDrawEnabled:!1},shadowSettings))}),[shadowSettings,frozenRows,columnStopIndex,columnCount,instanceProps.current.lastMeasuredRowIndex,instanceProps.current.recalcRowIndices]),frozenIntersectionCells=[],frozenIntersectionCellOverlays=[],_rowIndex6=0;_rowIndex6<Math.min(rowStopIndex,frozenRows);_rowIndex6++)if(!(null==isHiddenRow?void 0:isHiddenRow(_rowIndex6)))for(var _columnIndex6=0;_columnIndex6<Math.min(columnStopIndex,frozenColumns);_columnIndex6++){var _isMerged3=isMergedCell({rowIndex:_rowIndex6,columnIndex:_columnIndex6}),_bounds3=getCellBounds({rowIndex:_rowIndex6,columnIndex:_columnIndex6}),_actualRowIndex3=_isMerged3?_bounds3.top:_rowIndex6,_actualColumnIndex3=_isMerged3?_bounds3.left:_columnIndex6,_actualBottom3=Math.max(_rowIndex6,_bounds3.bottom),_actualRight3=Math.max(_columnIndex6,_bounds3.right);if(_isMerged3||!(null==isHiddenCell?void 0:isHiddenCell(_actualRowIndex3,_actualColumnIndex3))){if(_isMerged3){var _cellId3=helpers_1.cellIdentifier(_bounds3.top,_bounds3.left);if(mergedCellRenderMap.has(_cellId3))continue;mergedCellRenderMap.add(_cellId3)}var _y10=getRowOffset(_actualRowIndex3),_height4=getRowOffset(_actualBottom3)-_y10+getRowHeight(_actualBottom3),_x10=getColumnOffset(_actualColumnIndex3),_width3=getColumnOffset(_actualRight3)-_x10+getColumnWidth(_actualRight3);frozenIntersectionCells.push(itemRenderer({x:_x10,y:_y10,width:_width3,height:_height4,rowIndex:_actualRowIndex3,columnIndex:_actualColumnIndex3,isMergedCell:_isMerged3,key:helpers_1.itemKey({rowIndex:_actualRowIndex3,columnIndex:_actualColumnIndex3})})),enableCellOverlay&&frozenIntersectionCellOverlays.push(overlayRenderer({x:_x10,y:_y10,width:_width3,height:_height4,rowIndex:_actualRowIndex3,columnIndex:_actualColumnIndex3,isMergedCell:_isMerged3,key:helpers_1.itemKey({rowIndex:_actualRowIndex3,columnIndex:_actualColumnIndex3})}))}}var fillHandleDimension={},activeCellSelection=null,activeCellSelectionFrozenColumn=null,activeCellSelectionFrozenRow=null,activeCellSelectionFrozenIntersection=null;if(activeCell){var _bounds4=getCellBounds(activeCell),top=_bounds4.top,left=_bounds4.left,right=_bounds4.right,bottom=_bounds4.bottom,_actualBottom4=Math.min(rowStopIndex,bottom),_actualRight4=Math.min(columnStopIndex,right),isInFrozenColumn=left<frozenColumns,isInFrozenRow=top<frozenRows,isInFrozenIntersection=isInFrozenRow&&isInFrozenColumn,_y11=getRowOffset(top),_height5=getRowOffset(_actualBottom4)-_y11+getRowHeight(_actualBottom4),_x11=getColumnOffset(left),_width4=getColumnOffset(_actualRight4)-_x11+getColumnWidth(_actualRight4),cell=selectionRenderer({stroke:selectionBorderColor,strokeWidth:activeCellStrokeWidth,fill:"transparent",x:_x11,y:_y11,width:_width4,height:_height5,type:"activeCell",key:0,activeCell:activeCell,isDragging:isDraggingSelection,draggable:enableSelectionDrag&&!selections.length});isInFrozenIntersection?activeCellSelectionFrozenIntersection=cell:isInFrozenRow?activeCellSelectionFrozenRow=cell:isInFrozenColumn?activeCellSelectionFrozenColumn=cell:activeCellSelection=cell,fillHandleDimension={x:_x11+_width4,y:_y11+_height5}}for(var isSelectionInProgress=!1,selectionAreas=[],selectionAreasFrozenColumns=[],selectionAreasFrozenRows=[],selectionAreasIntersection=[],i=0;i<selections.length;i++){var selection=selections[i],_bounds5=selection.bounds,inProgress=selection.inProgress,style=selection.style,_top=_bounds5.top,_left=_bounds5.left,_right=_bounds5.right,_bottom=_bounds5.bottom,selectionBounds={x:0,y:0,width:0,height:0},_actualBottom5=Math.min(rowStopIndex,_bottom),_actualRight5=Math.min(columnStopIndex,_right),isLeftBoundFrozen=_left<frozenColumns,isTopBoundFrozen=_top<frozenRows,isIntersectionFrozen=_top<frozenRows&&_left<frozenColumns,isLast=i===selections.length-1,styles=Object.assign({stroke:inProgress?selectionBackgroundColor:selectionBorderColor,fill:selectionBackgroundColor,strokeWidth:isDraggingSelection?0:1,isDragging:isDraggingSelection,draggable:!inProgress&&enableSelectionDrag},style);if(inProgress&&(isSelectionInProgress=!0),selectionBounds.y=getRowOffset(_top),selectionBounds.height=getRowOffset(_actualBottom5)-selectionBounds.y+getRowHeight(_actualBottom5),selectionBounds.x=getColumnOffset(_left),selectionBounds.width=getColumnOffset(_actualRight5)-selectionBounds.x+getColumnWidth(_actualRight5),isLeftBoundFrozen){var frozenColumnSelectionWidth=getColumnOffset(Math.min(_right+1,frozenColumns))-getColumnOffset(_left);selectionAreasFrozenColumns.push(selectionRenderer(Object.assign({},styles,{type:"selection",key:i,x:selectionBounds.x,y:selectionBounds.y,width:frozenColumnSelectionWidth,height:selectionBounds.height,strokeRightWidth:frozenColumnSelectionWidth!==selectionBounds.width||isDraggingSelection?0:selectionStrokeWidth,selection:selection,inProgress:inProgress})))}if(isTopBoundFrozen){var frozenRowSelectionHeight=getRowOffset(Math.min(_bottom+1,frozenRows))-getRowOffset(_top);selectionAreasFrozenRows.push(selectionRenderer(Object.assign({},styles,{type:"selection",key:i,x:selectionBounds.x,y:selectionBounds.y,width:selectionBounds.width,height:frozenRowSelectionHeight,strokeBottomWidth:frozenRowSelectionHeight!==selectionBounds.height||isDraggingSelection?0:selectionStrokeWidth,selection:selection,inProgress:inProgress})))}if(isIntersectionFrozen){var frozenIntersectionSelectionHeight=getRowOffset(Math.min(_bottom+1,frozenRows))-getRowOffset(_top),frozenIntersectionSelectionWidth=getColumnOffset(Math.min(_right+1,frozenColumns))-getColumnOffset(_left);selectionAreasIntersection.push(selectionRenderer(Object.assign({},styles,{type:"selection",key:i,x:selectionBounds.x,y:selectionBounds.y,width:frozenIntersectionSelectionWidth,height:frozenIntersectionSelectionHeight,strokeBottomWidth:frozenIntersectionSelectionHeight!==selectionBounds.height||isDraggingSelection?0:selectionStrokeWidth,strokeRightWidth:frozenIntersectionSelectionWidth!==selectionBounds.width||isDraggingSelection?0:selectionStrokeWidth,selection:selection,inProgress:inProgress})))}selectionAreas.push(selectionRenderer(Object.assign({},styles,{type:"selection",key:i,x:selectionBounds.x,y:selectionBounds.y,width:selectionBounds.width,height:selectionBounds.height,selection:selection,inProgress:inProgress}))),isLast&&(fillHandleDimension={x:selectionBounds.x+selectionBounds.width,y:selectionBounds.y+selectionBounds.height})}var fillSelections=null;if(fillSelection){var _bounds6=fillSelection.bounds,_top2=_bounds6.top,_left2=_bounds6.left,_right2=_bounds6.right,_bottom2=_bounds6.bottom,_actualBottom6=Math.min(rowStopIndex,_bottom2),_actualRight6=Math.min(columnStopIndex,_right2),_x12=getColumnOffset(_left2),_y12=getRowOffset(_top2),_height6=getRowOffset(_actualBottom6)-_y12+getRowHeight(_actualBottom6);fillSelections=selectionRenderer({type:"fill",x:_x12,y:_y12,width:getColumnOffset(_actualRight6)-_x12+getColumnWidth(_actualRight6),height:_height6,key:-1,stroke:"gray",strokeStyle:"dashed"})}for(var borderStyleCells=[],borderStyleCellsFrozenColumns=[],borderStyleCellsFrozenRows=[],borderStyleCellsIntersection=[],_i2=0;_i2<borderStyles.length;_i2++){var _borderStyles$_i=borderStyles[_i2],_bounds7=_borderStyles$_i.bounds,_style=_borderStyles$_i.style,_rest=(_borderStyles$_i.title,_objectWithoutProperties(_borderStyles$_i,["bounds","style","title"])),_top3=_bounds7.top,_right3=_bounds7.right,_bottom3=_bounds7.bottom,_left3=_bounds7.left,_isLeftBoundFrozen=_left3<frozenColumns,_isTopBoundFrozen=_top3<frozenRows,_isIntersectionFrozen=_top3<frozenRows&&_left3<frozenColumns,_x13=getColumnOffset(_left3),_y13=getRowOffset(_top3),_width6=getColumnOffset(Math.min(columnCount,_right3+1))-_x13,_height7=getRowOffset(Math.min(rowCount,_bottom3+1))-_y13;if(borderStyleCells.push(utils_1.createHTMLBox(Object.assign({},_rest,_style,{x:_x13,y:_y13,key:_i2,width:_width6,height:_height7,type:"border"}))),_isLeftBoundFrozen){var _frozenColumnSelectionWidth=getColumnOffset(Math.min(_right3+1,frozenColumns))-getColumnOffset(_left3);borderStyleCellsFrozenColumns.push(utils_1.createHTMLBox(Object.assign({},_rest,_style,{type:"border",x:_x13,y:_y13,key:_i2,width:_frozenColumnSelectionWidth,height:_height7,strokeRightWidth:_frozenColumnSelectionWidth===_width6?(null==_style?void 0:_style.strokeRightWidth)||(null==_style?void 0:_style.strokeWidth):0})))}if(_isTopBoundFrozen){var _frozenRowSelectionHeight=getRowOffset(Math.min(_bottom3+1,frozenRows))-getRowOffset(_top3);borderStyleCellsFrozenRows.push(utils_1.createHTMLBox(Object.assign({},_rest,_style,{type:"border",x:_x13,y:_y13,key:_i2,width:_width6,height:_frozenRowSelectionHeight,strokeBottomWidth:_frozenRowSelectionHeight===_height7?(null==_style?void 0:_style.strokeBottomWidth)||(null==_style?void 0:_style.strokeWidth):0})))}if(_isIntersectionFrozen){var _frozenIntersectionSelectionHeight=getRowOffset(Math.min(_bottom3+1,frozenRows))-getRowOffset(_top3),_frozenIntersectionSelectionWidth=getColumnOffset(Math.min(_right3+1,frozenColumns))-getColumnOffset(_left3);borderStyleCellsIntersection.push(utils_1.createHTMLBox(Object.assign({},_rest,_style,{type:"border",x:_x13,y:_y13,key:_i2,width:_frozenIntersectionSelectionWidth,height:_frozenIntersectionSelectionHeight,strokeBottomWidth:_frozenIntersectionSelectionHeight===_height7?selectionStrokeWidth:0,strokeRightWidth:_frozenIntersectionSelectionWidth===_width6?selectionStrokeWidth:0})))}}var listenToEvents=!isScrolling,frozenRowShadowComponent=showFrozenShadow&&0!==frozenRows?frozenRowShadow:null,frozenColumnShadowComponent=showFrozenShadow&&0!==frozenColumns?frozenColumnShadow:null,stageChildren=react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(ReactKonvaCore_1.Layer,null,react_1.default.createElement(ReactKonvaCore_1.Group,{clipX:frozenColumnWidth,clipY:frozenRowHeight,clipWidth:containerWidth-frozenColumnWidth,clipHeight:containerHeight-frozenRowHeight},react_1.default.createElement(ReactKonvaCore_1.Group,{offsetY:scrollTop,offsetX:scrollLeft},gridLines,cells,cellOverlays,ranges)),react_1.default.createElement(ReactKonvaCore_1.Group,{clipX:frozenColumnWidth,clipY:0,clipWidth:containerWidth-frozenColumnWidth,clipHeight:frozenRowHeight+1},react_1.default.createElement(ReactKonvaCore_1.Group,{offsetY:0,offsetX:scrollLeft},gridLinesFrozenRow,frozenRowCells,frozenRowShadowComponent,frozenRowCellOverlays)),react_1.default.createElement(ReactKonvaCore_1.Group,{clipX:0,clipY:frozenRowHeight,clipWidth:frozenColumnWidth+1,clipHeight:containerHeight-frozenRowHeight},react_1.default.createElement(ReactKonvaCore_1.Group,{offsetY:scrollTop,offsetX:0},gridLinesFrozenColumn,frozenColumnCells,frozenColumnShadowComponent,frozenColumnCellOverlays)),react_1.default.createElement(ReactKonvaCore_1.Group,{offsetY:0,offsetX:0,clipX:0,clipY:0,clipWidth:frozenColumnWidth+1,clipHeight:frozenRowHeight+1},gridLinesFrozenIntersection,frozenIntersectionCells,frozenRowShadowComponent,frozenColumnShadowComponent,frozenIntersectionCellOverlays)),children&&"function"==typeof children?children({scrollLeft:scrollLeft,scrollTop:scrollTop}):null),fillhandleComponent=showFillHandle&&!isSelectionInProgress?react_1.default.createElement(FillHandle_1.default,Object.assign({},fillHandleDimension,{stroke:selectionBorderColor,size:8,borderColor:fillhandleBorderColor},fillHandleProps)):null,selectionChildren=react_1.default.createElement("div",{style:{pointerEvents:"none"}},react_1.default.createElement("div",{style:{position:"absolute",left:frozenColumnWidth,top:frozenRowHeight,right:0,bottom:0,overflow:"hidden"}},react_1.default.createElement("div",{style:{transform:"translate(-".concat(scrollLeft+frozenColumnWidth,"px, -").concat(scrollTop+frozenRowHeight,"px)")}},borderStyleCells,fillSelections,selectionAreas,activeCellSelection,fillhandleComponent)),frozenColumns?react_1.default.createElement("div",{style:{position:"absolute",width:frozenColumnWidth+8,top:frozenRowHeight,left:0,bottom:0,overflow:"hidden"}},react_1.default.createElement("div",{style:{transform:"translate(0, -".concat(scrollTop+frozenRowHeight,"px)")}},borderStyleCellsFrozenColumns,selectionAreasFrozenColumns,activeCellSelectionFrozenColumn,fillhandleComponent)):null,frozenRows?react_1.default.createElement("div",{style:{position:"absolute",height:frozenRowHeight+8,left:frozenColumnWidth,right:0,top:0,overflow:"hidden"}},react_1.default.createElement("div",{style:{transform:"translate(-".concat(scrollLeft+frozenColumnWidth,"px, 0)")}},borderStyleCellsFrozenRows,selectionAreasFrozenRows,activeCellSelectionFrozenRow,fillhandleComponent)):null,frozenRows&&frozenColumns?react_1.default.createElement("div",{style:{position:"absolute",height:frozenRowHeight+8,width:frozenColumnWidth+8,left:0,top:0,overflow:"hidden",pointerEvents:"none"}},borderStyleCellsIntersection,selectionAreasIntersection,activeCellSelectionFrozenIntersection,fillhandleComponent):null);return react_1.default.createElement("div",{style:{position:"relative",width:containerWidth,userSelect:"none"},className:"rowsncolumns-grid",ref:scrollContainerRef},react_1.default.createElement("div",Object.assign({className:"rowsncolumns-grid-container",tabIndex:0,ref:containerRef},rest),react_1.default.createElement(ReactKonvaCore_1.Stage,Object.assign({width:containerWidth,height:containerHeight,ref:stageRef,listening:listenToEvents},stageProps),wrapper(stageChildren))),selectionChildren,showScrollbar?react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:"rowsncolumns-grid-scrollbar rowsncolumns-grid-scrollbar-y",tabIndex:-1,style:{height:containerHeight,overflow:"scroll",position:"absolute",right:0,top:0,width:scrollbarSize,willChange:"transform"},onScroll:handleScroll,ref:verticalScrollRef},react_1.default.createElement("div",{style:{position:"absolute",height:estimatedTotalHeight,width:1}})),react_1.default.createElement("div",{className:"rowsncolumns-grid-scrollbar rowsncolumns-grid-scrollbar-x",tabIndex:-1,style:{overflow:"scroll",position:"absolute",bottom:0,left:0,width:containerWidth,height:scrollbarSize,willChange:"transform"},onScroll:handleScrollLeft,ref:horizontalScrollRef},react_1.default.createElement("div",{style:{position:"absolute",width:estimatedTotalWidth,height:1}}))):null)})));exports.default=Grid},345:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(75),__webpack_require__(16),__webpack_require__(346),__webpack_require__(21),__webpack_require__(12),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Cell=exports.CellRenderer=void 0;var react_1=__importStar(__webpack_require__(0)),react_konva_1=__webpack_require__(3),helpers_1=__webpack_require__(58),Cell=react_1.memo((function(props){var _props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,width=props.width,height=props.height,value=props.value,_props$fill=props.fill,fill=void 0===_props$fill?"white":_props$fill,_props$strokeWidth=props.strokeWidth,strokeWidth=void 0===_props$strokeWidth?1:_props$strokeWidth,_props$stroke=props.stroke,stroke=void 0===_props$stroke?"#d9d9d9":_props$stroke,_props$align=props.align,align=void 0===_props$align?"left":_props$align,_props$verticalAlign=props.verticalAlign,verticalAlign=void 0===_props$verticalAlign?"middle":_props$verticalAlign,_props$textColor=props.textColor,textColor=void 0===_props$textColor?"#333":_props$textColor,_props$padding=props.padding,padding=void 0===_props$padding?5:_props$padding,_props$fontFamily=props.fontFamily,fontFamily=void 0===_props$fontFamily?"Arial":_props$fontFamily,_props$fontSize=props.fontSize,fontSize=void 0===_props$fontSize?12:_props$fontSize,children=props.children,_props$wrap=props.wrap,wrap=void 0===_props$wrap?"none":_props$wrap,_props$fontWeight=props.fontWeight,fontWeight=void 0===_props$fontWeight?"normal":_props$fontWeight,_props$fontStyle=props.fontStyle,fontStyle=void 0===_props$fontStyle?"normal":_props$fontStyle,textDecoration=props.textDecoration,_props$alpha=props.alpha,alpha=void 0===_props$alpha?1:_props$alpha,_props$strokeEnabled=props.strokeEnabled,strokeEnabled=void 0===_props$strokeEnabled||_props$strokeEnabled,isOverlay=(props.globalCompositeOperation,props.isOverlay),rest=_objectWithoutProperties(props,["x","y","width","height","value","fill","strokeWidth","stroke","align","verticalAlign","textColor","padding","fontFamily","fontSize","children","wrap","fontWeight","fontStyle","textDecoration","alpha","strokeEnabled","globalCompositeOperation","isOverlay"]);if(isOverlay)return null;var fillEnabled=!!fill,textStyle="".concat(fontWeight," ").concat(fontStyle);return react_1.default.createElement(react_konva_1.Group,Object.assign({},rest),react_1.default.createElement(react_konva_1.Rect,{x:x+.5,y:y+.5,height:height,width:width,fill:fill,stroke:stroke,strokeWidth:strokeWidth,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:alpha,fillEnabled:fillEnabled,strokeEnabled:strokeEnabled}),helpers_1.isNull(value)?null:react_1.default.createElement(react_konva_1.Text,{x:x,y:y,height:height,width:width,text:value,fill:textColor,verticalAlign:verticalAlign,align:align,fontFamily:fontFamily,fontStyle:textStyle,textDecoration:textDecoration,padding:padding,wrap:wrap,fontSize:fontSize,hitStrokeWidth:0}),children)}));exports.Cell=Cell;var CellRenderer=function CellRenderer(props){return react_1.default.createElement(Cell,Object.assign({},props))};exports.CellRenderer=CellRenderer,exports.default=CellRenderer},351:function(module,exports,__webpack_require__){"use strict";__webpack_require__(75),__webpack_require__(16);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CellOverlay=exports.CellRenderer=exports.getOffsetFromWidth=void 0;var react_1=__importStar(__webpack_require__(0)),react_konva_1=__webpack_require__(3),EMPTY_ARRAY=[];exports.getOffsetFromWidth=function getOffsetFromWidth(width){return width/2-.5};var CellOverlay=react_1.memo((function(props){var x=props.x,y=props.y,width=props.width,height=props.height,strokeTopColor=props.strokeTopColor,strokeRightColor=props.strokeRightColor,strokeBottomColor=props.strokeBottomColor,strokeLeftColor=props.strokeLeftColor,_props$strokeTopDash=props.strokeTopDash,strokeTopDash=void 0===_props$strokeTopDash?EMPTY_ARRAY:_props$strokeTopDash,_props$strokeRightDas=props.strokeRightDash,strokeRightDash=void 0===_props$strokeRightDas?EMPTY_ARRAY:_props$strokeRightDas,_props$strokeBottomDa=props.strokeBottomDash,strokeBottomDash=void 0===_props$strokeBottomDa?EMPTY_ARRAY:_props$strokeBottomDa,_props$strokeLeftDash=props.strokeLeftDash,strokeLeftDash=void 0===_props$strokeLeftDash?EMPTY_ARRAY:_props$strokeLeftDash,strokeTopWidth=props.strokeTopWidth,strokeRightWidth=props.strokeRightWidth,strokeBottomWidth=props.strokeBottomWidth,strokeLeftWidth=props.strokeLeftWidth,lineCap=props.lineCap;return strokeTopColor||strokeRightColor||strokeBottomColor||strokeLeftColor?react_1.default.createElement(react_konva_1.Shape,{x:x,y:y,width:width,height:height,sceneFunc:function sceneFunc(context,shape){strokeTopColor&&(context.beginPath(),context.moveTo(strokeLeftColor?-exports.getOffsetFromWidth(strokeLeftWidth):0,.5),context.lineTo(shape.width()+(strokeRightColor?exports.getOffsetFromWidth(strokeRightWidth)+1:1),.5),context.setAttr("strokeStyle",strokeTopColor),context.setAttr("lineWidth",strokeTopWidth),context.setAttr("lineCap",lineCap),context.setLineDash(strokeTopDash),context.stroke()),strokeBottomColor&&(context.beginPath(),context.moveTo(strokeLeftColor?-exports.getOffsetFromWidth(strokeLeftWidth):0,shape.height()+.5),context.lineTo(shape.width()+(strokeRightColor?exports.getOffsetFromWidth(strokeRightWidth)+1:1),shape.height()+.5),context.setAttr("lineWidth",strokeBottomWidth),context.setAttr("strokeStyle",strokeBottomColor),context.setAttr("lineCap",lineCap),context.setLineDash(strokeBottomDash),context.stroke()),strokeLeftColor&&(context.beginPath(),context.moveTo(.5,strokeTopColor?-exports.getOffsetFromWidth(strokeTopWidth):0),context.lineTo(.5,shape.height()+(strokeBottomColor?exports.getOffsetFromWidth(strokeBottomWidth)+1:1)),context.setAttr("strokeStyle",strokeLeftColor),context.setAttr("lineWidth",strokeLeftWidth),context.setAttr("lineCap",lineCap),context.setLineDash(strokeLeftDash),context.stroke()),strokeRightColor&&(context.beginPath(),context.moveTo(shape.width()+.5,strokeTopColor?-exports.getOffsetFromWidth(strokeTopWidth):0),context.lineTo(shape.width()+.5,shape.height()+(strokeBottomColor?exports.getOffsetFromWidth(strokeBottomWidth)+1:1)),context.setAttr("strokeStyle",strokeRightColor),context.setAttr("lineWidth",strokeRightWidth),context.setAttr("lineCap",lineCap),context.setLineDash(strokeRightDash),context.stroke())}}):null}));exports.CellOverlay=CellOverlay;var CellRenderer=function CellRenderer(props){var x=props.x,y=props.y,width=props.width,height=props.height,stroke=props.stroke,_props$strokeTopColor=props.strokeTopColor,strokeTopColor=void 0===_props$strokeTopColor?stroke:_props$strokeTopColor,_props$strokeRightCol=props.strokeRightColor,strokeRightColor=void 0===_props$strokeRightCol?stroke:_props$strokeRightCol,_props$strokeBottomCo=props.strokeBottomColor,strokeBottomColor=void 0===_props$strokeBottomCo?stroke:_props$strokeBottomCo,_props$strokeLeftColo=props.strokeLeftColor,strokeLeftColor=void 0===_props$strokeLeftColo?stroke:_props$strokeLeftColo,_props$strokeDash=props.strokeDash,strokeDash=void 0===_props$strokeDash?EMPTY_ARRAY:_props$strokeDash,_props$strokeTopDash2=props.strokeTopDash,strokeTopDash=void 0===_props$strokeTopDash2?EMPTY_ARRAY:_props$strokeTopDash2,_props$strokeRightDas2=props.strokeRightDash,strokeRightDash=void 0===_props$strokeRightDas2?EMPTY_ARRAY:_props$strokeRightDas2,_props$strokeBottomDa2=props.strokeBottomDash,strokeBottomDash=void 0===_props$strokeBottomDa2?EMPTY_ARRAY:_props$strokeBottomDa2,_props$strokeLeftDash2=props.strokeLeftDash,strokeLeftDash=void 0===_props$strokeLeftDash2?EMPTY_ARRAY:_props$strokeLeftDash2,_props$strokeWidth=props.strokeWidth,strokeWidth=void 0===_props$strokeWidth?1:_props$strokeWidth,_props$strokeTopWidth=props.strokeTopWidth,strokeTopWidth=void 0===_props$strokeTopWidth?strokeWidth:_props$strokeTopWidth,_props$strokeRightWid=props.strokeRightWidth,strokeRightWidth=void 0===_props$strokeRightWid?strokeWidth:_props$strokeRightWid,_props$strokeBottomWi=props.strokeBottomWidth,strokeBottomWidth=void 0===_props$strokeBottomWi?strokeWidth:_props$strokeBottomWi,_props$strokeLeftWidt=props.strokeLeftWidth,strokeLeftWidth=void 0===_props$strokeLeftWidt?strokeWidth:_props$strokeLeftWidt,_props$lineCap=props.lineCap,lineCap=void 0===_props$lineCap?"butt":_props$lineCap,key=props.key;return strokeTopColor||strokeRightColor||strokeBottomColor||strokeLeftColor?react_1.default.createElement(CellOverlay,{key:key,x:x,y:y,width:width,height:height,strokeTopColor:strokeTopColor,strokeRightColor:strokeRightColor,strokeBottomColor:strokeBottomColor,strokeLeftColor:strokeLeftColor,strokeDash:strokeDash,strokeTopDash:strokeTopDash,strokeRightDash:strokeRightDash,strokeBottomDash:strokeBottomDash,strokeLeftDash:strokeLeftDash,strokeTopWidth:strokeTopWidth,strokeRightWidth:strokeRightWidth,strokeBottomWidth:strokeBottomWidth,strokeLeftWidth:strokeLeftWidth,lineCap:lineCap}):null};exports.CellRenderer=CellRenderer,exports.default=CellRenderer},352:function(module,exports,__webpack_require__){"use strict";__webpack_require__(16),__webpack_require__(12),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),utils_1=__webpack_require__(353),Selection=react_1.memo((function(props){return utils_1.createHTMLBox(Object.assign({strokeWidth:1},props))}));exports.default=Selection},353:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(16),__webpack_require__(346),__webpack_require__(12),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHTMLBox=exports.createCanvasBox=void 0;var react_1=__importDefault(__webpack_require__(0)),react_konva_1=__webpack_require__(3);exports.createCanvasBox=function createCanvasBox(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$width=_ref.width,width=void 0===_ref$width?0:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?0:_ref$height,fill=_ref.fill,stroke=_ref.stroke,_ref$strokeLeftColor=_ref.strokeLeftColor,strokeLeftColor=void 0===_ref$strokeLeftColor?stroke:_ref$strokeLeftColor,_ref$strokeTopColor=_ref.strokeTopColor,strokeTopColor=void 0===_ref$strokeTopColor?stroke:_ref$strokeTopColor,_ref$strokeRightColor=_ref.strokeRightColor,strokeRightColor=void 0===_ref$strokeRightColor?stroke:_ref$strokeRightColor,_ref$strokeBottomColo=_ref.strokeBottomColor,strokeBottomColor=void 0===_ref$strokeBottomColo?stroke:_ref$strokeBottomColo,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?0:_ref$strokeWidth,_ref$strokeTopWidth=_ref.strokeTopWidth,strokeTopWidth=void 0===_ref$strokeTopWidth?strokeWidth:_ref$strokeTopWidth,_ref$strokeRightWidth=_ref.strokeRightWidth,strokeRightWidth=void 0===_ref$strokeRightWidth?strokeWidth:_ref$strokeRightWidth,_ref$strokeBottomWidt=_ref.strokeBottomWidth,strokeBottomWidth=void 0===_ref$strokeBottomWidt?strokeWidth:_ref$strokeBottomWidt,_ref$strokeLeftWidth=_ref.strokeLeftWidth,strokeLeftWidth=void 0===_ref$strokeLeftWidth?strokeWidth:_ref$strokeLeftWidth,dash=_ref.dash,dashEnabled=_ref.dashEnabled,_ref$lineCap=_ref.lineCap,lineCap=void 0===_ref$lineCap?"square":_ref$lineCap,key=_ref.key,commonProps={perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,hitStrokeWidth:0,listening:!1},lines=[react_1.default.createElement(react_konva_1.Line,Object.assign({points:[x,y,x+width,y],stroke:strokeTopColor,strokeWidth:strokeTopWidth,dash:dash,dashEnabled:dashEnabled,lineCap:lineCap,key:"top",globalCompositeOperation:void 0},commonProps)),react_1.default.createElement(react_konva_1.Line,Object.assign({points:[x+width,y,x+width,y+height],stroke:strokeRightColor,strokeWidth:strokeRightWidth,dash:dash,dashEnabled:dashEnabled,lineCap:lineCap,key:"right",globalCompositeOperation:void 0},commonProps)),react_1.default.createElement(react_konva_1.Line,Object.assign({points:[x+width,y+height,x,y+height],stroke:strokeBottomColor,strokeWidth:strokeBottomWidth,dash:dash,dashEnabled:dashEnabled,lineCap:lineCap,key:"bottom",globalCompositeOperation:void 0},commonProps)),react_1.default.createElement(react_konva_1.Line,Object.assign({points:[x,y+height,x,y],stroke:strokeLeftColor,strokeWidth:strokeLeftWidth,dash:dash,dashEnabled:dashEnabled,lineCap:lineCap,key:"left",globalCompositeOperation:void 0},commonProps))];return react_1.default.createElement(react_1.default.Fragment,{key:key},fill&&react_1.default.createElement(react_konva_1.Rect,Object.assign({globalCompositeOperation:void 0,fill:fill,x:x,y:y,width:width,height:height},commonProps)),lines)};exports.createHTMLBox=function createHTMLBox(_ref2){var _ref2$x=_ref2.x,x=void 0===_ref2$x?0:_ref2$x,_ref2$y=_ref2.y,y=void 0===_ref2$y?0:_ref2$y,_ref2$width=_ref2.width,width=void 0===_ref2$width?0:_ref2$width,_ref2$height=_ref2.height,height=void 0===_ref2$height?0:_ref2$height,fill=_ref2.fill,stroke=_ref2.stroke,_ref2$strokeLeftColor=_ref2.strokeLeftColor,strokeLeftColor=void 0===_ref2$strokeLeftColor?stroke:_ref2$strokeLeftColor,_ref2$strokeTopColor=_ref2.strokeTopColor,strokeTopColor=void 0===_ref2$strokeTopColor?stroke:_ref2$strokeTopColor,_ref2$strokeRightColo=_ref2.strokeRightColor,strokeRightColor=void 0===_ref2$strokeRightColo?stroke:_ref2$strokeRightColo,_ref2$strokeBottomCol=_ref2.strokeBottomColor,strokeBottomColor=void 0===_ref2$strokeBottomCol?stroke:_ref2$strokeBottomCol,_ref2$strokeWidth=_ref2.strokeWidth,strokeWidth=void 0===_ref2$strokeWidth?0:_ref2$strokeWidth,_ref2$strokeTopWidth=_ref2.strokeTopWidth,strokeTopWidth=void 0===_ref2$strokeTopWidth?strokeWidth:_ref2$strokeTopWidth,_ref2$strokeRightWidt=_ref2.strokeRightWidth,strokeRightWidth=void 0===_ref2$strokeRightWidt?strokeWidth:_ref2$strokeRightWidt,_ref2$strokeBottomWid=_ref2.strokeBottomWidth,strokeBottomWidth=void 0===_ref2$strokeBottomWid?strokeWidth:_ref2$strokeBottomWid,_ref2$strokeLeftWidth=_ref2.strokeLeftWidth,strokeLeftWidth=void 0===_ref2$strokeLeftWidth?strokeWidth:_ref2$strokeLeftWidth,key=_ref2.key,_ref2$strokeStyle=_ref2.strokeStyle,strokeStyle=void 0===_ref2$strokeStyle?"solid":_ref2$strokeStyle,_ref2$fillOpacity=_ref2.fillOpacity,fillOpacity=void 0===_ref2$fillOpacity?1:_ref2$fillOpacity,draggable=_ref2.draggable,isDragging=_ref2.isDragging,_ref2$borderCoverWidt=_ref2.borderCoverWidth,borderCoverWidth=void 0===_ref2$borderCoverWidt?5:_ref2$borderCoverWidt,props=(_ref2.type,_ref2.bounds,_ref2.activeCell,_objectWithoutProperties(_ref2,["x","y","width","height","fill","stroke","strokeLeftColor","strokeTopColor","strokeRightColor","strokeBottomColor","strokeWidth","strokeTopWidth","strokeRightWidth","strokeBottomWidth","strokeLeftWidth","key","strokeStyle","fillOpacity","draggable","isDragging","borderCoverWidth","type","bounds","activeCell"])),lineStyles={borderWidth:0,position:"absolute",pointerEvents:"none"},showBorderCover=draggable,borderCoverStyle={position:"absolute",pointerEvents:draggable?"auto":"none",cursor:draggable?isDragging?"grabbing":"grab":"initial"};width-=Math.floor(strokeWidth/2),height-=Math.floor(strokeWidth/2);var lines=[react_1.default.createElement("div",Object.assign({style:Object.assign({},lineStyles,{left:x,top:y,width:width,height:strokeTopWidth,borderColor:strokeTopColor,borderTopWidth:strokeTopWidth,borderStyle:strokeStyle}),key:"top"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},lineStyles,{left:x+width,top:y,width:strokeRightWidth,height:height,borderColor:strokeRightColor,borderRightWidth:strokeRightWidth,borderStyle:strokeStyle}),key:"right"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},lineStyles,{left:x,top:y+height,width:width+strokeTopWidth,height:strokeBottomWidth,borderColor:strokeBottomColor,borderBottomWidth:strokeBottomWidth,borderStyle:strokeStyle}),key:"bottom"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},lineStyles,{left:x,top:y,width:strokeLeftWidth,height:height,borderColor:strokeLeftColor,borderLeftWidth:strokeLeftWidth,borderStyle:strokeStyle}),key:"left"},props))],borderCovers=[react_1.default.createElement("div",Object.assign({style:Object.assign({},borderCoverStyle,{left:x,top:y,width:width,height:5}),key:"top"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},borderCoverStyle,{left:x+width-borderCoverWidth+strokeRightWidth,top:y,width:borderCoverWidth,height:height}),key:"right"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},borderCoverStyle,{left:x,top:y+height-borderCoverWidth+strokeBottomWidth,width:width+strokeTopWidth,height:borderCoverWidth}),key:"bottom"},props)),react_1.default.createElement("div",Object.assign({style:Object.assign({},borderCoverStyle,{left:x,top:y,width:borderCoverWidth,height:height}),key:"left"},props))];return react_1.default.createElement(react_1.default.Fragment,{key:key},fill&&react_1.default.createElement("div",{style:{position:"absolute",top:y,left:x,height:height,width:width,backgroundColor:fill,opacity:fillOpacity,userSelect:"none",pointerEvents:"none"}}),lines,showBorderCover&&borderCovers)}},355:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(75),__webpack_require__(16),__webpack_require__(12),__webpack_require__(86),__webpack_require__(87),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14),__webpack_require__(38),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultEditor=void 0;var react_1=__importStar(__webpack_require__(0)),types_1=__webpack_require__(97),helpers_1=__webpack_require__(58),DefaultEditor=function DefaultEditor(props){var _onChange=props.onChange,onSubmit=props.onSubmit,onCancel=props.onCancel,position=props.position,cell=props.cell,nextFocusableCell=props.nextFocusableCell,_props$value=props.value,value=void 0===_props$value?"":_props$value,_props$autoFocus=(props.activeCell,props.autoFocus),autoFocus=void 0===_props$autoFocus||_props$autoFocus,_onKeyDown=props.onKeyDown,rest=(props.selections,props.scrollPosition,props.maxWidth,props.maxHeight,props.isFrozenRow,props.isFrozenColumn,props.frozenRowOffset,props.frozenColumnOffset,_objectWithoutProperties(props,["onChange","onSubmit","onCancel","position","cell","nextFocusableCell","value","activeCell","autoFocus","onKeyDown","selections","scrollPosition","maxWidth","maxHeight","isFrozenRow","isFrozenColumn","frozenRowOffset","frozenColumnOffset"])),inputRef=react_1.useRef(null),_position$x=position.x,x=void 0===_position$x?0:_position$x,_position$y=position.y,y=void 0===_position$y?0:_position$y,_position$width=position.width,width=void 0===_position$width?0:_position$width,_position$height=position.height,height=void 0===_position$height?0:_position$height,getWidth=react_1.useCallback((function(text){var _a,textWidth=(null===(_a=helpers_1.autoSizerCanvas.measureText(text))||void 0===_a?void 0:_a.width)||0;return Math.max(textWidth+10,width+1)}),[width]);react_1.useEffect((function(){setInputWidth(getWidth(value))}),[value]);var _react_1$useState2=_slicedToArray(react_1.useState((function(){return getWidth(value)})),2),inputWidth=_react_1$useState2[0],setInputWidth=_react_1$useState2[1];react_1.useEffect((function(){var _a,_b;inputRef.current&&(autoFocus&&inputRef.current.focus(),inputRef.current.selectionStart=null!==(_b=null===(_a=helpers_1.castToString(value))||void 0===_a?void 0:_a.length)&&void 0!==_b?_b:0)}),[]);var inputHeight=height;return react_1.default.createElement("div",{style:{top:y-1,left:x,position:"absolute",width:inputWidth,height:inputHeight+2,padding:2,boxShadow:"0 2px 6px 2px rgba(60,64,67,.15)",border:"2px #1a73e8 solid",background:"white"}},react_1.default.createElement("textarea",Object.assign({rows:1,cols:1,ref:inputRef,value:value,style:{font:"12px Arial",lineHeight:1.2,width:"100%",height:"100%",padding:"0 1px",margin:0,boxSizing:"border-box",borderWidth:0,outline:"none",resize:"none",overflow:"hidden",verticalAlign:"top",background:"transparent"},onChange:function onChange(e){null==_onChange||_onChange(e.target.value,cell)},onKeyDown:function onKeyDown(e){if(inputRef.current){var isShiftKey=e.nativeEvent.shiftKey,value=inputRef.current.value;e.which===types_1.KeyCodes.Enter&&onSubmit&&onSubmit(value,cell,null==nextFocusableCell?void 0:nextFocusableCell(cell,isShiftKey?types_1.Direction.Up:types_1.Direction.Down)),e.which===types_1.KeyCodes.Escape&&onCancel&&onCancel(e),e.which===types_1.KeyCodes.Tab&&(e.preventDefault(),onSubmit&&onSubmit(value,cell,null==nextFocusableCell?void 0:nextFocusableCell(cell,isShiftKey?types_1.Direction.Left:types_1.Direction.Right))),null==_onKeyDown||_onKeyDown(e)}}},rest)))};exports.getDefaultEditor=function getDefaultEditor(cell){return DefaultEditor};var defaultCanEdit=function defaultCanEdit(cell){return!0},defaultIsHidden=function defaultIsHidden(i){return!1};exports.default=function useEditable(_ref){var _a,_b,_c,_d,_e,_f,_ref$getEditor=_ref.getEditor,getEditor=void 0===_ref$getEditor?exports.getDefaultEditor:_ref$getEditor,gridRef=_ref.gridRef,getValue=_ref.getValue,onChange=_ref.onChange,onSubmit=_ref.onSubmit,onCancel=_ref.onCancel,onDelete=_ref.onDelete,_ref$selections=_ref.selections,selections=void 0===_ref$selections?[]:_ref$selections,activeCell=_ref.activeCell,_ref$canEdit=_ref.canEdit,canEdit=void 0===_ref$canEdit?defaultCanEdit:_ref$canEdit,_ref$frozenRows=_ref.frozenRows,frozenRows=void 0===_ref$frozenRows?0:_ref$frozenRows,_ref$frozenColumns=_ref.frozenColumns,frozenColumns=void 0===_ref$frozenColumns?0:_ref$frozenColumns,_ref$hideOnBlur=_ref.hideOnBlur,hideOnBlur=void 0===_ref$hideOnBlur||_ref$hideOnBlur,_ref$isHiddenRow=_ref.isHiddenRow,isHiddenRow=void 0===_ref$isHiddenRow?defaultIsHidden:_ref$isHiddenRow,_ref$isHiddenColumn=_ref.isHiddenColumn,isHiddenColumn=void 0===_ref$isHiddenColumn?defaultIsHidden:_ref$isHiddenColumn,rowCount=_ref.rowCount,columnCount=_ref.columnCount,_ref$selectionTopBoun=_ref.selectionTopBound,selectionTopBound=void 0===_ref$selectionTopBoun?0:_ref$selectionTopBoun,_ref$selectionBottomB=_ref.selectionBottomBound,selectionBottomBound=void 0===_ref$selectionBottomB?rowCount-1:_ref$selectionBottomB,_ref$selectionLeftBou=_ref.selectionLeftBound,selectionLeftBound=void 0===_ref$selectionLeftBou?0:_ref$selectionLeftBou,_ref$selectionRightBo=_ref.selectionRightBound,selectionRightBound=void 0===_ref$selectionRightBo?columnCount-1:_ref$selectionRightBo,editorProps=_ref.editorProps,onBeforeEdit=_ref.onBeforeEdit,onKeyDown=_ref.onKeyDown,_ref$sticky=_ref.sticky,sticky=void 0!==_ref$sticky&&_ref$sticky,_react_1$useState4=_slicedToArray(react_1.useState(!1),2),isEditorShown=_react_1$useState4[0],setShowEditor=_react_1$useState4[1],_react_1$useState6=_slicedToArray(react_1.useState(""),2),value=_react_1$useState6[0],setValue=_react_1$useState6[1],_react_1$useState8=_slicedToArray(react_1.useState({x:0,y:0,width:0,height:0}),2),position=_react_1$useState8[0],setPosition=_react_1$useState8[1],currentActiveCellRef=react_1.useRef(null),initialActiveCell=react_1.useRef(),_react_1$useState10=_slicedToArray(react_1.useState({scrollLeft:0,scrollTop:0}),2),scrollPosition=_react_1$useState10[0],setScrollPosition=_react_1$useState10[1],_react_1$useState12=_slicedToArray(react_1.useState(!0),2),autoFocus=_react_1$useState12[0],setAutoFocus=_react_1$useState12[1],isDirtyRef=react_1.useRef(!1),currentValueRef=react_1.useRef(value),initialValueRef=react_1.useRef(),maxEditorDimensionsRef=react_1.useRef(),getValueRef=react_1.useRef(getValue),showEditor=react_1.useCallback((function(){return setShowEditor(!0)}),[]),hideEditor=react_1.useCallback((function(){setShowEditor(!1),currentActiveCellRef.current=null}),[]),focusGrid=react_1.useCallback((function(){requestAnimationFrame((function(){return gridRef.current&&gridRef.current.focus()}))}),[]);react_1.useEffect((function(){currentValueRef.current=value})),react_1.useEffect((function(){getValueRef.current=getValue}),[getValue]);var makeEditable=react_1.useCallback((function(coords,initialValue){var _a,_b,_c,autoFocus=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(gridRef.current&&(coords=gridRef.current.getActualCellCoords(coords),!helpers_1.isEqualCells(coords,currentActiveCellRef.current)&&canEdit(coords))){null==onBeforeEdit||onBeforeEdit(coords),null===(_a=gridRef.current)||void 0===_a||_a.scrollToItem(coords),currentActiveCellRef.current=coords;var pos=gridRef.current.getCellOffsetFromCoords(coords),_scrollPosition=gridRef.current.getScrollPosition(),cellValue=getValueRef.current(coords),_value=initialValue||cellValue||"",cellPosition=sticky?getCellPosition(pos,_scrollPosition):pos,_gridRef$current$getD=gridRef.current.getDimensions(),containerWidth=_gridRef$current$getD.containerWidth,containerHeight=_gridRef$current$getD.containerHeight;maxEditorDimensionsRef.current={height:containerHeight-(null!==(_b=cellPosition.y)&&void 0!==_b?_b:0),width:containerWidth-(null!==(_c=cellPosition.x)&&void 0!==_c?_c:0)},isDirtyRef.current=!!initialValue,initialValueRef.current=initialValue,setValue(_value),null==onChange||onChange(_value,coords),setAutoFocus(autoFocus),setScrollPosition(_scrollPosition),setPosition(cellPosition),showEditor()}}),[frozenRows,frozenColumns,onBeforeEdit,canEdit,sticky]),isFrozenRow=currentActiveCellRef.current&&(null===(_a=currentActiveCellRef.current)||void 0===_a?void 0:_a.rowIndex)<frozenRows,isFrozenColumn=currentActiveCellRef.current&&(null===(_b=currentActiveCellRef.current)||void 0===_b?void 0:_b.columnIndex)<frozenColumns,getCellPosition=function getCellPosition(position,scrollPosition){return currentActiveCellRef.current?Object.assign({},position,{x:position.x-(isFrozenColumn?0:scrollPosition.scrollLeft),y:position.y-(isFrozenRow?0:scrollPosition.scrollTop)}):{x:0,y:0}},handleDoubleClick=react_1.useCallback((function(e){if(gridRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.nativeEvent.clientX,e.nativeEvent.clientY);if(coords){var rowIndex=coords.rowIndex,columnIndex=coords.columnIndex;makeEditable({rowIndex:rowIndex,columnIndex:columnIndex})}}}),[getValue,frozenRows,frozenColumns]),isSelectionKey=react_1.useCallback((function(keyCode){return[types_1.KeyCodes.Right,types_1.KeyCodes.Left,types_1.KeyCodes.Up,types_1.KeyCodes.Down,types_1.KeyCodes.Meta,types_1.KeyCodes.Escape,types_1.KeyCodes.Tab,types_1.KeyCodes.Home,types_1.KeyCodes.End,types_1.KeyCodes.CapsLock,types_1.KeyCodes.PageDown,types_1.KeyCodes.PageUp,types_1.KeyCodes.ScrollLock,types_1.KeyCodes.NumLock,types_1.KeyCodes.Insert,types_1.KeyCodes.Pause].includes(keyCode)||keyCode>=types_1.KeyCodes.F1&&keyCode<=types_1.KeyCodes.F12}),[]),handleKeyDown=react_1.useCallback((function(e){var keyCode=e.nativeEvent.keyCode;if(keyCode!==types_1.KeyCodes.Tab||initialActiveCell.current||(initialActiveCell.current=activeCell),helpers_1.isArrowKey(keyCode)&&(initialActiveCell.current=void 0),!(isSelectionKey(keyCode)||e.nativeEvent.ctrlKey||e.nativeEvent.shiftKey&&("Shift"===e.nativeEvent.key||e.nativeEvent.which===types_1.KeyCodes.SPACE)||e.nativeEvent.metaKey||e.nativeEvent.which===types_1.KeyCodes.ALT)&&activeCell){var rowIndex=activeCell.rowIndex,columnIndex=activeCell.columnIndex;if(keyCode===types_1.KeyCodes.Delete||keyCode===types_1.KeyCodes.BackSpace)return onDelete&&onDelete(activeCell,selections),void e.preventDefault();var initialValue=keyCode===types_1.KeyCodes.Enter?void 0:e.nativeEvent.key;makeEditable({rowIndex:rowIndex,columnIndex:columnIndex},initialValue),e.preventDefault()}}),[getValue,selections,activeCell,onDelete]),nextFocusableCell=react_1.useCallback((function(currentCell){var _a,_b,_c,_d,_e,nextActiveCell,direction=arguments.length>1&&void 0!==arguments[1]?arguments[1]:types_1.Direction.Right,bounds=null===(_a=gridRef.current)||void 0===_a?void 0:_a.getCellBounds(currentCell);if(!bounds)return null;switch(direction){case types_1.Direction.Right:var columnIndex=helpers_1.clampIndex(Math.min(bounds.right+1,selectionRightBound),isHiddenColumn,direction);nextActiveCell={rowIndex:bounds.top,columnIndex:columnIndex};break;case types_1.Direction.Up:var rowIndex=helpers_1.clampIndex(Math.max(bounds.top-1,selectionTopBound),isHiddenRow,direction);nextActiveCell={rowIndex:rowIndex,columnIndex:bounds.left};break;case types_1.Direction.Left:var _columnIndex=helpers_1.clampIndex(Math.max(bounds.left-1,selectionLeftBound),isHiddenColumn,direction);nextActiveCell={rowIndex:bounds.top,columnIndex:_columnIndex};break;default:var _rowIndex=helpers_1.clampIndex(Math.min((null!==(_c=null===(_b=initialActiveCell.current)||void 0===_b?void 0:_b.rowIndex)&&void 0!==_c?_c:bounds.bottom)+1,selectionBottomBound),isHiddenRow,direction);nextActiveCell={rowIndex:_rowIndex,columnIndex:null!==(_e=null===(_d=initialActiveCell.current)||void 0===_d?void 0:_d.columnIndex)&&void 0!==_e?_e:bounds.left}}if(direction!==types_1.Direction.Right||initialActiveCell.current||(initialActiveCell.current=currentCell),direction===types_1.Direction.Down&&(initialActiveCell.current=void 0),selections.length&&currentCell&&gridRef.current){var _bounds=selections[selections.length-1].bounds,activeCellBounds=gridRef.current.getCellBounds(currentCell),nextCell=helpers_1.findNextCellWithinBounds(activeCellBounds,_bounds,direction);nextCell&&(nextActiveCell=nextCell)}return nextActiveCell}),[selections,isHiddenRow,isHiddenColumn,selectionBottomBound,selectionTopBound]),handleSubmit=react_1.useCallback((function(value,activeCell,nextActiveCell){hideEditor(),onSubmit&&onSubmit(value,activeCell,nextActiveCell),focusGrid()}),[onSubmit]),handleCancel=react_1.useCallback((function(e){hideEditor(),onCancel&&onCancel(e),focusGrid()}),[onCancel]),handleMouseDown=react_1.useCallback((function(e){hideOnBlur&&(currentActiveCellRef.current&&(isDirtyRef.current?handleSubmit(currentValueRef.current,currentActiveCellRef.current):handleCancel()),initialActiveCell.current=void 0)}),[hideOnBlur,handleSubmit,handleCancel]),handleChange=react_1.useCallback((function(newValue,activeCell){void 0===initialValueRef.current||initialValueRef.current!==newValue?currentActiveCellRef.current&&(isDirtyRef.current=newValue!==value,setValue(newValue),null==onChange||onChange(newValue,activeCell)):initialValueRef.current=void 0}),[value]),handleScroll=react_1.useCallback((function(scrollPos){currentActiveCellRef.current&&setScrollPosition(scrollPos)}),[]),editingCell=currentActiveCellRef.current,Editor=react_1.useMemo((function(){return editingCell?getEditor(editingCell)||exports.getDefaultEditor(editingCell):null}),[editingCell]),handleBlur=react_1.useCallback((function(e){currentActiveCellRef.current&&focusGrid()}),[]),finalCellPosition=react_1.useMemo((function(){return sticky?position:getCellPosition(position,scrollPosition)}),[sticky,position,scrollPosition,frozenColumns,frozenRows]),frozenRowOffset=null===(_c=gridRef.current)||void 0===_c?void 0:_c.getRowOffset(frozenRows),frozenColumnOffset=null===(_d=gridRef.current)||void 0===_d?void 0:_d.getColumnOffset(frozenColumns);return{editorComponent:isEditorShown&&Editor?react_1.default.createElement(Editor,Object.assign({},null==editorProps?void 0:editorProps(),{cell:editingCell,activeCell:activeCell,autoFocus:autoFocus,value:value,selections:selections,onChange:handleChange,onSubmit:handleSubmit,onCancel:handleCancel,position:finalCellPosition,scrollPosition:scrollPosition,nextFocusableCell:nextFocusableCell,onBlur:handleBlur,onKeyDown:onKeyDown,maxWidth:null===(_e=maxEditorDimensionsRef.current)||void 0===_e?void 0:_e.width,maxHeight:null===(_f=maxEditorDimensionsRef.current)||void 0===_f?void 0:_f.height,isFrozenRow:isFrozenRow,isFrozenColumn:isFrozenColumn,frozenRowOffset:frozenRowOffset,frozenColumnOffset:frozenColumnOffset})):null,onDoubleClick:handleDoubleClick,onKeyDown:handleKeyDown,nextFocusableCell:nextFocusableCell,isEditInProgress:!!editingCell,editingCell:editingCell,makeEditable:makeEditable,setValue:handleChange,hideEditor:hideEditor,showEditor:showEditor,submitEditor:handleSubmit,cancelEditor:handleCancel,onMouseDown:handleMouseDown,onScroll:handleScroll}}},356:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(16),__webpack_require__(74),__webpack_require__(12),__webpack_require__(21),__webpack_require__(47),__webpack_require__(333),__webpack_require__(226),__webpack_require__(27),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(23),__webpack_require__(35),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),helpers_1=__webpack_require__(58),types_1=__webpack_require__(97),EMPTY_SELECTION=[],defaultIsHidden=function defaultIsHidden(i){return!1},defaultSelectionSpan=function defaultSelectionSpan(){return!0};exports.default=function useSelection(_ref){var gridRef=_ref.gridRef,_ref$initialActiveCel=_ref.initialActiveCell,initialActiveCell=void 0===_ref$initialActiveCel?null:_ref$initialActiveCel,_ref$initialSelection=_ref.initialSelections,initialSelections=void 0===_ref$initialSelection?EMPTY_SELECTION:_ref$initialSelection,_ref$columnCount=_ref.columnCount,columnCount=void 0===_ref$columnCount?0:_ref$columnCount,_ref$rowCount=_ref.rowCount,rowCount=void 0===_ref$rowCount?0:_ref$rowCount,_ref$selectionPolicy=_ref.selectionPolicy,selectionPolicy=void 0===_ref$selectionPolicy?"multiple":_ref$selectionPolicy,_ref$newSelectionMode=_ref.newSelectionMode,newSelectionMode=void 0===_ref$newSelectionMode?"clear":_ref$newSelectionMode,_ref$allowDeselectSel=_ref.allowDeselectSelection,allowDeselectSelection=void 0===_ref$allowDeselectSel||_ref$allowDeselectSel,onFill=_ref.onFill,_ref$isHiddenRow=_ref.isHiddenRow,isHiddenRow=void 0===_ref$isHiddenRow?defaultIsHidden:_ref$isHiddenRow,_ref$isHiddenColumn=_ref.isHiddenColumn,isHiddenColumn=void 0===_ref$isHiddenColumn?defaultIsHidden:_ref$isHiddenColumn,_ref$alwaysScrollToAc=_ref.alwaysScrollToActiveCell,alwaysScrollToActiveCell=void 0===_ref$alwaysScrollToAc||_ref$alwaysScrollToAc,_ref$selectionTopBoun=_ref.selectionTopBound,selectionTopBound=void 0===_ref$selectionTopBoun?0:_ref$selectionTopBoun,_ref$selectionBottomB=_ref.selectionBottomBound,selectionBottomBound=void 0===_ref$selectionBottomB?rowCount-1:_ref$selectionBottomB,_ref$selectionLeftBou=_ref.selectionLeftBound,selectionLeftBound=void 0===_ref$selectionLeftBou?0:_ref$selectionLeftBou,_ref$selectionRightBo=_ref.selectionRightBound,selectionRightBound=void 0===_ref$selectionRightBo?columnCount-1:_ref$selectionRightBo,mouseDownInterceptor=_ref.mouseDownInterceptor,mouseMoveInterceptor=_ref.mouseMoveInterceptor,_ref$mergedCells=_ref.mergedCells,mergedCells=void 0===_ref$mergedCells?[]:_ref$mergedCells,_ref$canSelectionSpan=_ref.canSelectionSpanMergedCells,canSelectionSpanMergedCells=void 0===_ref$canSelectionSpan?defaultSelectionSpan:_ref$canSelectionSpan,getValue=_ref.getValue,onSelectionMove=_ref.onSelectionMove,_react_1$useState2=_slicedToArray(react_1.useState(initialActiveCell),2),activeCell=_react_1$useState2[0],setActiveCell=_react_1$useState2[1],_react_1$useState4=_slicedToArray(react_1.useState(initialSelections),2),selections=_react_1$useState4[0],setSelections=_react_1$useState4[1],_react_1$useState6=_slicedToArray(react_1.useState(null),2),fillSelection=_react_1$useState6[0],setFillSelection=_react_1$useState6[1],selectionStart=react_1.useRef(null),selectionEnd=react_1.useRef(null),isSelecting=react_1.useRef(!1),isFilling=react_1.useRef(!1),firstActiveCell=react_1.useRef(null),_react_1$useReducer2=_slicedToArray(react_1.useReducer((function(s){return s+1}),0),2),forceRender=(_react_1$useReducer2[0],_react_1$useReducer2[1]),isDragging=react_1.useRef(!1),hasUserMovedSelection=react_1.useRef(!1),initialDraggedSelection=react_1.useRef(),initialDraggedCell=react_1.useRef(),draggedSelection=react_1.useRef(),draggedSelectionIndex=react_1.useRef(),activeCellRef=react_1.useRef(activeCell),activeSelectionsRef=react_1.useRef(selections),mergedCellsRef=react_1.useRef(mergedCells);react_1.useEffect((function(){activeCellRef.current=activeCell}),[activeCell]),react_1.useEffect((function(){activeSelectionsRef.current=selections}),[selections]),react_1.useEffect((function(){mergedCellsRef.current=mergedCells}),[mergedCells]);var isCellOutOfBounds=react_1.useCallback((function(cell){return cell.rowIndex<selectionTopBound||cell.columnIndex<selectionLeftBound}),[selectionTopBound,selectionLeftBound]),newSelection=function newSelection(start){var end=arguments.length>1&&void 0!==arguments[1]?arguments[1]:start;if(!isCellOutOfBounds(start)){selectionStart.current=start,selectionEnd.current=end;var bounds=selectionFromStartEnd(start,end);if(bounds){var coords={rowIndex:bounds.top,columnIndex:bounds.left};setActiveCell(coords),"clear"===newSelectionMode?(firstActiveCell.current=coords,clearSelections()):"modify"===newSelectionMode?modifySelection(coords):appendSelection(coords)}}},selectionFromStartEnd=function selectionFromStartEnd(start,end){if(!(null==gridRef?void 0:gridRef.current))return null;var spanMerges=null==canSelectionSpanMergedCells?void 0:canSelectionSpanMergedCells(start,end);return helpers_1.cellRangeToBounds(start,end,spanMerges,gridRef.current.getCellBounds)},modifySelection=function modifySelection(coords,setInProgress){if("single"!==selectionPolicy&&selectionStart.current&&!isCellOutOfBounds(coords)){selectionEnd.current=coords;var bounds=selectionFromStartEnd(selectionStart.current,coords);bounds&&setSelections((function(prevSelection){var len=prevSelection.length;return len?prevSelection.map((function(sel,i){return len-1===i?Object.assign({},sel,{bounds:bounds,inProgress:!!setInProgress}):sel})):[{bounds:bounds,inProgress:!!setInProgress}]}))}},appendSelection=function appendSelection(start){var end=arguments.length>1&&void 0!==arguments[1]?arguments[1]:start;if("multiple"===selectionPolicy&&start&&!isCellOutOfBounds(start)){selectionStart.current=start,selectionEnd.current=end;var bounds=selectionFromStartEnd(start,end);bounds&&(setActiveCell({rowIndex:bounds.top,columnIndex:bounds.left}),setSelections((function(prev){return[].concat(_toConsumableArray(prev),[{bounds:bounds}])})))}},removeSelectionByIndex=react_1.useCallback((function(index){var newSelection=selections.filter((function(_,idx){return idx!==index}));return setSelections(newSelection),newSelection}),[selections]),clearSelections=function clearSelections(){setSelections(EMPTY_SELECTION)},cellIndexInSelection=function cellIndexInSelection(cell,selections){var id=helpers_1.cellIdentifier(Math.max(selectionTopBound,cell.rowIndex),Math.max(selectionLeftBound,cell.columnIndex));return selections.findIndex((function(sel){return helpers_1.getBoundedCells(sel.bounds).has(id)}))},handleMouseDown=react_1.useCallback((function(e){var _a;if(gridRef&&gridRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.nativeEvent.clientX,e.nativeEvent.clientY);if(coords){var isContextMenuClick=e.nativeEvent.which===types_1.MouseButtonCodes.right;if(isContextMenuClick)if(-1!==cellIndexInSelection(coords,selections))return;var isShiftKey=e.nativeEvent.shiftKey,isMetaKey=e.nativeEvent.ctrlKey||e.nativeEvent.metaKey,allowMultiple=isMetaKey,allowDeselect=allowDeselectSelection,hasSelections=selections.length>0,isDeselecting=isMetaKey&&allowDeselect;if(isContextMenuClick||"single"===selectionPolicy||(document.addEventListener("mouseup",handleMouseUp),document.addEventListener("mousemove",handleMouseMove)),isSelecting.current=!0,!1!==(null==mouseDownInterceptor?void 0:mouseDownInterceptor(e,coords,selectionStart,selectionEnd)))if(isShiftKey)modifySelection(coords);else{var isSameAsActiveCell=helpers_1.isEqualCells(coords,activeCell);if(activeCell&&allowMultiple){if(isSameAsActiveCell&&(!isDeselecting||!hasSelections))return;if(isMetaKey&&!hasSelections&&appendSelection(activeCell),isMetaKey&&allowDeselect){var _cellIndex=cellIndexInSelection(coords,selections);if(-1!==_cellIndex){var _newSelection=removeSelectionByIndex(_cellIndex),nextActiveCell=function getPossibleActiveCellFromSelections(selections){if(!selections.length)return null;var bounds=selections[selections.length-1].bounds;return{rowIndex:bounds.top,columnIndex:bounds.left}}(_newSelection);return null!==nextActiveCell&&setActiveCell(nextActiveCell),void(1===_newSelection.length&&function cellEqualsSelection(cell,selections){return null!==cell&&selections.some((function(sel){return sel.bounds.left===cell.columnIndex&&sel.bounds.top===cell.rowIndex&&sel.bounds.right===cell.columnIndex&&sel.bounds.bottom===cell.rowIndex}))}(nextActiveCell,_newSelection)&&clearSelections())}}appendSelection(coords)}else alwaysScrollToActiveCell&&(null===(_a=gridRef.current)||void 0===_a||_a.scrollToItem(coords)),isSameAsActiveCell||newSelection(coords)}}}}),[activeCell,selections,selectionPolicy,allowDeselectSelection,alwaysScrollToActiveCell,rowCount,columnCount,newSelectionMode]),handleMouseMove=react_1.useCallback((function(e){var _a;if(isSelecting.current&&(null==gridRef?void 0:gridRef.current)){var coords=gridRef.current.getCellCoordsFromOffset(e.clientX,e.clientY);if(coords&&!1!==(null==mouseMoveInterceptor?void 0:mouseMoveInterceptor(e,coords,selectionStart,selectionEnd))){if(helpers_1.isEqualCells(firstActiveCell.current,coords))return clearSelections();modifySelection(coords,!0),null===(_a=gridRef.current)||void 0===_a||_a.scrollToItem(coords)}}}),[]),handleMouseUp=react_1.useCallback((function(){isSelecting.current=!1,document.removeEventListener("mousemove",handleMouseMove),document.removeEventListener("mouseup",handleMouseUp),setSelections((function(prevSelection){var len=prevSelection.length;return len?prevSelection.map((function(sel,i){return len-1===i?Object.assign({},sel,{inProgress:!1}):sel})):EMPTY_SELECTION}))}),[]),keyNavigate=react_1.useCallback((function(direction,modify,metaKeyPressed){if(selectionStart.current&&selectionEnd.current&&(null==gridRef?void 0:gridRef.current)&&activeCell){var currentCell=modify?selectionEnd.current:activeCell,rowIndex=currentCell.rowIndex,columnIndex=currentCell.columnIndex,isMergedCell=null==gridRef?void 0:gridRef.current.isMergedCell({rowIndex:rowIndex,columnIndex:columnIndex}),currentBounds=gridRef.current.getCellBounds({rowIndex:rowIndex,columnIndex:columnIndex});switch(direction){case types_1.Direction.Up:if(isMergedCell&&(rowIndex=currentBounds.top),rowIndex=helpers_1.clampIndex(Math.max(rowIndex-1,selectionTopBound),isHiddenRow,direction),metaKeyPressed){var startCell=Object.assign({},currentCell,{columnIndex:selectionStart.current.columnIndex});rowIndex=helpers_1.findNextCellInDataRegion(startCell,getValue,isHiddenRow,direction,selectionTopBound)}break;case types_1.Direction.Down:if(isMergedCell&&(rowIndex=currentBounds.bottom),rowIndex=helpers_1.clampIndex(Math.min(rowIndex+1,selectionBottomBound),isHiddenRow,direction),metaKeyPressed){var _startCell=Object.assign({},currentCell,{columnIndex:selectionStart.current.columnIndex});rowIndex=helpers_1.findNextCellInDataRegion(_startCell,getValue,isHiddenRow,direction,selectionBottomBound)}break;case types_1.Direction.Left:if(isMergedCell&&(columnIndex=currentBounds.left),columnIndex=helpers_1.clampIndex(Math.max(columnIndex-1,selectionLeftBound),isHiddenColumn,direction),metaKeyPressed){var _startCell2=Object.assign({},currentCell,{rowIndex:selectionStart.current.rowIndex});columnIndex=helpers_1.findNextCellInDataRegion(_startCell2,getValue,isHiddenColumn,direction,selectionLeftBound)}break;case types_1.Direction.Right:if(isMergedCell&&(columnIndex=currentBounds.right),columnIndex=helpers_1.clampIndex(Math.min(columnIndex+1,selectionRightBound),isHiddenColumn,direction),metaKeyPressed){var _startCell3=Object.assign({},currentCell,{rowIndex:selectionStart.current.rowIndex});columnIndex=helpers_1.findNextCellInDataRegion(_startCell3,getValue,isHiddenColumn,direction,selectionRightBound)}}var newBounds=gridRef.current.getCellBounds({rowIndex:rowIndex,columnIndex:columnIndex}),coords={rowIndex:newBounds.top,columnIndex:newBounds.left},scrollToCell=modify?selectionEnd.current.rowIndex===coords.rowIndex?{columnIndex:coords.columnIndex}:{rowIndex:coords.rowIndex}:{rowIndex:rowIndex,columnIndex:columnIndex},isUserNavigatingToActiveCell=helpers_1.isEqualCells(firstActiveCell.current,coords);modify&&!isUserNavigatingToActiveCell?modifySelection(coords):newSelection(coords),gridRef.current.scrollToItem(scrollToCell)}}),[activeCell,isHiddenRow,isHiddenColumn,selectionLeftBound,selectionTopBound,selectionPolicy,newSelectionMode]),selectAll=function selectAll(){selectionStart.current={rowIndex:selectionTopBound,columnIndex:selectionLeftBound},modifySelection({rowIndex:selectionBottomBound,columnIndex:selectionRightBound})},selectColumn=react_1.useCallback((function(){selectionEnd.current&&selectionStart.current&&(selectionStart.current={rowIndex:selectionTopBound,columnIndex:selectionStart.current.columnIndex},modifySelection({rowIndex:rowCount-1,columnIndex:selectionEnd.current.columnIndex}))}),[selectionTopBound]),selectRow=react_1.useCallback((function(){selectionEnd.current&&selectionStart.current&&(selectionStart.current={rowIndex:selectionStart.current.rowIndex,columnIndex:selectionLeftBound},modifySelection({rowIndex:selectionEnd.current.rowIndex,columnIndex:selectionRightBound}))}),[selectionLeftBound]),handleKeyDown=react_1.useCallback((function(e){if(null==gridRef?void 0:gridRef.current){var isShiftKey=e.nativeEvent.shiftKey,isAltKey=e.nativeEvent.altKey,isMetaKey=e.nativeEvent.ctrlKey||e.nativeEvent.metaKey;switch(e.nativeEvent.which){case types_1.KeyCodes.Right:keyNavigate(types_1.Direction.Right,isShiftKey,isMetaKey),e.preventDefault();break;case types_1.KeyCodes.Left:keyNavigate(types_1.Direction.Left,isShiftKey,isMetaKey),e.preventDefault();break;case types_1.KeyCodes.Up:keyNavigate(types_1.Direction.Up,isShiftKey,isMetaKey),e.preventDefault();break;case types_1.KeyCodes.Down:keyNavigate(types_1.Direction.Down,isShiftKey,isMetaKey),e.preventDefault();break;case types_1.KeyCodes.A:isMetaKey&&selectAll(),e.preventDefault();break;case types_1.KeyCodes.Home:isMetaKey?function selectFirstCellInColumn(){if(selectionStart.current&&(null==gridRef?void 0:gridRef.current)){var cell={rowIndex:selectionTopBound,columnIndex:selectionStart.current.columnIndex};newSelection(cell),null==gridRef||gridRef.current.scrollToItem(cell)}}():function selectFirstCellInRow(){if(selectionStart.current&&(null==gridRef?void 0:gridRef.current)){var cell={rowIndex:selectionStart.current.rowIndex,columnIndex:selectionLeftBound};newSelection(cell),null==gridRef||gridRef.current.scrollToItem(cell)}}();break;case types_1.KeyCodes.End:isMetaKey?function selectLastCellInColumn(){if(selectionStart.current&&(null==gridRef?void 0:gridRef.current)){var cell={rowIndex:rowCount-1,columnIndex:selectionStart.current.columnIndex};newSelection(cell),null==gridRef||gridRef.current.scrollToItem(cell)}}():function selectLastCellInRow(){if(selectionStart.current&&(null==gridRef?void 0:gridRef.current)){var cell={rowIndex:selectionStart.current.rowIndex,columnIndex:selectionRightBound};newSelection(cell),null==gridRef||gridRef.current.scrollToItem(cell)}}();break;case types_1.KeyCodes.BackSpace:isMetaKey&&function scrollToActiveCell(){activeCell&&(null==gridRef?void 0:gridRef.current)&&(null==gridRef||gridRef.current.scrollToItem(activeCell,helpers_1.Align.smart))}();break;case types_1.KeyCodes.SPACE:isMetaKey&&isShiftKey?selectAll():isMetaKey?selectColumn():isShiftKey&&selectRow();break;case types_1.KeyCodes.Tab:if(selections.length&&activeCell&&gridRef){var bounds=selections[selections.length-1].bounds,activeCellBounds=gridRef.current.getCellBounds(activeCell),direction=isShiftKey?types_1.Direction.Left:types_1.Direction.Right,nextCell=helpers_1.findNextCellWithinBounds(activeCellBounds,bounds,direction);nextCell&&(setActiveCell(nextCell),gridRef.current&&gridRef.current.scrollToItem(nextCell))}else keyNavigate(isShiftKey?types_1.Direction.Left:types_1.Direction.Right);e.preventDefault();break;case types_1.KeyCodes.PageDown:isAltKey?function pageRight(){if(activeCell&&(null==gridRef?void 0:gridRef.current)){var _gridRef$current$getV3=gridRef.current.getViewPort(),visibleColumnStartIndex=_gridRef$current$getV3.visibleColumnStartIndex,pageSize=_gridRef$current$getV3.visibleColumnStopIndex-visibleColumnStartIndex,columnIndex=Math.min(activeCell.columnIndex+pageSize,selectionRightBound),newActiveCell={columnIndex:columnIndex,rowIndex:activeCell.rowIndex};handleSetActiveCell(newActiveCell,!1),null==gridRef||gridRef.current.scrollToItem({columnIndex:columnIndex},helpers_1.Align.end)}}():function pageDown(){if(activeCell&&(null==gridRef?void 0:gridRef.current)){var _gridRef$current$getV=gridRef.current.getViewPort(),visibleRowStartIndex=_gridRef$current$getV.visibleRowStartIndex,pageSize=_gridRef$current$getV.visibleRowStopIndex-visibleRowStartIndex,rowIndex=Math.min(activeCell.rowIndex+pageSize,rowCount-1),newActiveCell={rowIndex:rowIndex,columnIndex:activeCell.columnIndex};handleSetActiveCell(newActiveCell,!1),null==gridRef||gridRef.current.scrollToItem({rowIndex:rowIndex},helpers_1.Align.end)}}();break;case types_1.KeyCodes.PageUp:isAltKey?function pageLeft(){if(activeCell&&(null==gridRef?void 0:gridRef.current)){var _gridRef$current$getV4=gridRef.current.getViewPort(),visibleColumnStartIndex=_gridRef$current$getV4.visibleColumnStartIndex,pageSize=_gridRef$current$getV4.visibleColumnStopIndex-visibleColumnStartIndex,columnIndex=Math.max(activeCell.columnIndex-pageSize,selectionLeftBound),newActiveCell={columnIndex:columnIndex,rowIndex:activeCell.rowIndex};handleSetActiveCell(newActiveCell,!1),null==gridRef||gridRef.current.scrollToItem({columnIndex:columnIndex},helpers_1.Align.end)}}():function pageUp(){if(activeCell&&(null==gridRef?void 0:gridRef.current)){var _gridRef$current$getV2=gridRef.current.getViewPort(),visibleRowStartIndex=_gridRef$current$getV2.visibleRowStartIndex,pageSize=_gridRef$current$getV2.visibleRowStopIndex-visibleRowStartIndex,rowIndex=Math.max(activeCell.rowIndex-pageSize,selectionTopBound),newActiveCell={rowIndex:rowIndex,columnIndex:activeCell.columnIndex};handleSetActiveCell(newActiveCell,!1),null==gridRef||gridRef.current.scrollToItem({rowIndex:rowIndex},helpers_1.Align.end)}}()}}}),[rowCount,columnCount,activeCell,selections,selectionPolicy,newSelectionMode]),handleSetActiveCell=react_1.useCallback((function(coords){var shouldScroll=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];selectionStart.current=coords,firstActiveCell.current=coords,selectionEnd.current=coords,setActiveCell(coords),shouldScroll&&coords&&(null==gridRef?void 0:gridRef.current)&&gridRef.current.scrollToItem(coords)}),[]),handleFillHandleMouseDown=react_1.useCallback((function(e){e.stopPropagation(),isFilling.current=!0,document.addEventListener("mousemove",handleFillHandleMouseMove),document.addEventListener("mouseup",handleFillHandleMouseUp)}),[selections]),handleFillHandleMouseMove=react_1.useCallback((function(e){if(isFilling.current&&(null==gridRef?void 0:gridRef.current)&&activeCellRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.clientX,e.clientY,!1);if(coords){var selections=activeSelectionsRef.current,bounds=selectionFromStartEnd(activeCellRef.current,coords),hasSelections=selections.length>0,activeCellBounds=hasSelections?selections[selections.length-1].bounds:gridRef.current.getCellBounds(activeCellRef.current);if(bounds){var direction=bounds.top<activeCellBounds.top?types_1.Direction.Up:bounds.bottom>activeCellBounds.bottom?types_1.Direction.Down:bounds.right>activeCellBounds.right?types_1.Direction.Right:types_1.Direction.Left;direction===types_1.Direction.Right&&(bounds=Object.assign({},activeCellBounds,{right:Math.min(selectionRightBound,bounds.right)})),direction===types_1.Direction.Up&&(bounds=Object.assign({},activeCellBounds,{top:Math.max(selectionTopBound,bounds.top)})),direction===types_1.Direction.Left&&(bounds=Object.assign({},activeCellBounds,{left:Math.max(selectionLeftBound,bounds.left)})),direction===types_1.Direction.Down&&(bounds=Object.assign({},activeCellBounds,{bottom:Math.min(selectionBottomBound,bounds.bottom)})),hasSelections&&function boundsSubsetOfSelection(bounds,selection){return bounds.top>=selection.top&&bounds.bottom<=selection.bottom&&bounds.left>=selection.left&&bounds.right<=selection.right}(bounds,selections[0].bounds)?setFillSelection(null):(setFillSelection({bounds:bounds}),gridRef.current.scrollToItem(coords))}}}}),[]),handleFillHandleMouseUp=react_1.useCallback((function(e){var _a,_b;if(isFilling.current=!1,document.removeEventListener("mousemove",handleFillHandleMouseMove),document.removeEventListener("mouseup",handleFillHandleMouseUp),gridRef&&activeCellRef.current){var fillSelection=null;setFillSelection((function(prev){return fillSelection=prev,null}));var selections=activeSelectionsRef.current,activeCell=activeCellRef.current;if(activeCell&&fillSelection){var newBounds=null===(_a=fillSelection)||void 0===_a?void 0:_a.bounds;newBounds&&(null===(_b=gridRef.current)||void 0===_b||_b.focus(),onFill&&onFill(activeCell,fillSelection,selections),setSelections((function(prevSelection){var len=prevSelection.length;return len?prevSelection.map((function(sel,i){return len-1===i?Object.assign({},sel,{bounds:newBounds}):sel})):[{bounds:newBounds}]})))}}}),[]),handleClearLastSelection=react_1.useCallback((function(){setSelections((function(prev){return prev.slice(0,-1)}))}),[]),fillHandleProps=react_1.useMemo((function(){return{onMouseDown:handleFillHandleMouseDown}}),[handleFillHandleMouseDown]),handleSelectionMouseDown=react_1.useCallback((function(e,activeCell,selection,index){var shouldClamp=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(gridRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.nativeEvent.clientX,e.nativeEvent.clientY,!1);coords&&(initialDraggedCell.current=coords,shouldClamp&&(coords=helpers_1.clampCellCoords(coords,activeCell,selection)),activeCell&&(initialDraggedSelection.current=draggedSelection.current={bounds:gridRef.current.getCellBounds(activeCell)}),selection&&(initialDraggedSelection.current=draggedSelection.current=selection,draggedSelectionIndex.current=index),isDragging.current=!0,document.addEventListener("mouseup",handleSelectionMouseUp),document.addEventListener("mousemove",handleSelectionMouseMove),forceRender())}}),[selectionTopBound,selectionLeftBound,rowCount,columnCount,selections]),handleSelectionMouseMove=react_1.useCallback((function(e){var _a;if(null==gridRef?void 0:gridRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.clientX,e.clientY);if(coords&&initialDraggedSelection.current&&initialDraggedCell.current&&(hasUserMovedSelection.current||!helpers_1.isEqualCells(initialDraggedCell.current,coords))){var sel=helpers_1.newSelectionFromDrag(initialDraggedSelection.current,initialDraggedCell.current,coords,selectionTopBound,selectionLeftBound,rowCount,columnCount);draggedSelection.current=sel,hasUserMovedSelection.current=!0,null===(_a=gridRef.current)||void 0===_a||_a.scrollToItem(coords),forceRender()}}}),[]),handleSelectionMouseUp=react_1.useCallback((function(){var _a,sel=draggedSelection.current;if(sel){var coords={rowIndex:sel.bounds.top,columnIndex:sel.bounds.left};setActiveCell(coords),selectionStart.current=coords,helpers_1.selectionSpansCells(null==sel?void 0:sel.bounds)&&(setSelections((function(prev){return prev.map((function(cur,index){return index===draggedSelectionIndex.current?sel:cur}))})),selectionEnd.current={rowIndex:sel.bounds.bottom,columnIndex:sel.bounds.right})}initialDraggedSelection.current&&sel&&(null==onSelectionMove||onSelectionMove(initialDraggedSelection.current,sel)),null===(_a=gridRef.current)||void 0===_a||_a.focus(),isDragging.current=!1,draggedSelection.current=void 0,draggedSelectionIndex.current=void 0,hasUserMovedSelection.current=!1,document.removeEventListener("mouseup",handleSelectionMouseUp),document.removeEventListener("mousemove",handleSelectionMouseMove),forceRender()}),[]);return{activeCell:activeCell,selections:selections,isDragging:isDragging.current,draggedSelection:draggedSelection.current,initialDraggedSelection:initialDraggedSelection.current,onSelectionMouseDown:handleSelectionMouseDown,onMouseDown:handleMouseDown,onKeyDown:handleKeyDown,newSelection:newSelection,setSelections:setSelections,setActiveCell:handleSetActiveCell,setActiveCellState:setActiveCell,fillHandleProps:fillHandleProps,fillSelection:fillSelection,clearLastSelection:handleClearLastSelection,modifySelection:modifySelection,selectAll:selectAll,appendSelection:appendSelection,clearSelections:clearSelections}}},357:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(75),__webpack_require__(16),__webpack_require__(21),__webpack_require__(12),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(__webpack_require__(0)),helpers_1=__webpack_require__(58),DefaultTooltipComponent=function DefaultTooltipComponent(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,_ref$scrollLeft=_ref.scrollLeft,scrollLeft=void 0===_ref$scrollLeft?0:_ref$scrollLeft,_ref$scrollTop=_ref.scrollTop,scrollTop=void 0===_ref$scrollTop?0:_ref$scrollTop,_ref$width=_ref.width,width=void 0===_ref$width?0:_ref$width,posX=(_ref.height,x+width-scrollLeft),posY=y-scrollTop;return react_1.default.createElement("div",{style:{position:"absolute",left:0,top:0,transform:"translate(".concat(posX,"px, ").concat(posY,"px)"),maxWidth:200,minWidth:160,background:"white",boxShadow:"0 4px 8px 3px rgba(60,64,67,.15)",padding:12,borderRadius:4,fontSize:13}},x)},getDefaultTooltip=function getDefaultTooltip(){return DefaultTooltipComponent};exports.default=function useTooltip(_ref2){var gridRef=_ref2.gridRef,_ref2$getTooltip=_ref2.getTooltip,getTooltip=void 0===_ref2$getTooltip?getDefaultTooltip:_ref2$getTooltip,_react_1$useState2=_slicedToArray(react_1.useState(null),2),activeCell=_react_1$useState2[0],setActiveCell=_react_1$useState2[1],isTooltipActive=react_1.useRef(!1),activeCellRef=react_1.useRef(activeCell),_react_1$useState4=_slicedToArray(react_1.useState({}),2),tooltipPosition=_react_1$useState4[0],setTooltipPosition=_react_1$useState4[1],showTooltip=!!activeCell,TooltipComponent=react_1.useMemo((function(){return getTooltip(activeCell)}),[activeCell,getTooltip]),handleTooltipMouseEnter=react_1.useCallback((function(){isTooltipActive.current=!0}),[]),handleTooltipMouseLeave=react_1.useCallback((function(){isTooltipActive.current=!1,setActiveCell(null)}),[]),tooltipComponent=showTooltip&&TooltipComponent?react_1.default.createElement(TooltipComponent,Object.assign({},tooltipPosition,{onMouseEnter:handleTooltipMouseEnter,onMouseLeave:handleTooltipMouseLeave})):null,handleMouseMove=react_1.useCallback((function(e){if(gridRef.current){var coords=gridRef.current.getCellCoordsFromOffset(e.clientX,e.clientY);if(coords){var rowIndex=coords.rowIndex,columnIndex=coords.columnIndex;if(!activeCellRef.current||activeCellRef.current.rowIndex!==rowIndex||activeCellRef.current.columnIndex!==columnIndex){var pos=gridRef.current.getCellOffsetFromCoords(coords),scrollPosition=gridRef.current.getScrollPosition();setTooltipPosition(Object.assign({},pos,scrollPosition)),setActiveCell({rowIndex:rowIndex,columnIndex:columnIndex})}}}}),[]),handleMouseLeave=react_1.useCallback((function(){isTooltipActive.current||setActiveCell(null)}),[]),mouseMoveThrottler=react_1.useRef(),mouseLeaveThrottler=react_1.useRef();return react_1.useEffect((function(){mouseMoveThrottler.current=helpers_1.throttle(handleMouseMove,100),mouseLeaveThrottler.current=helpers_1.debounce(handleMouseLeave,2e3)}),[]),react_1.useEffect((function(){activeCellRef.current=activeCell}),[activeCell]),{tooltipComponent:tooltipComponent,onMouseMove:mouseMoveThrottler.current,onMouseLeave:mouseLeaveThrottler.current}}},361:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(16),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),types_1=__webpack_require__(97),helpers_1=__webpack_require__(58);exports.default=function useUndo(){var props=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},enableGlobalKeyHandlers=props.enableGlobalKeyHandlers,onRedo=props.onRedo,onUndo=props.onUndo,undoStack=(props.identifier,react_1.useRef([])),undoStackPointer=react_1.useRef(-1),_react_1$useReducer=react_1.useReducer((function(s){return s+1}),0),_react_1$useReducer2=_slicedToArray(_react_1$useReducer,2),forceRender=(_react_1$useReducer2[0],_react_1$useReducer2[1]);react_1.useEffect((function(){return enableGlobalKeyHandlers&&document.addEventListener("keydown",handleKeyDown),function(){return document.removeEventListener("keydown",handleKeyDown)}}),[enableGlobalKeyHandlers]);var handleKeyDown=react_1.useCallback((function(e){var _a;if(!document.activeElement||!helpers_1.focusableNodeNames.has(null===(_a=document.activeElement)||void 0===_a?void 0:_a.nodeName)){var isUndo=(e.metaKey||e.ctrlKey)&&e.which===types_1.KeyCodes.Z,isRedo=e.shiftKey&&isUndo||e.which===types_1.KeyCodes.KEY_Y;(isRedo||isUndo)&&(isRedo?handleRedo():handleUndo())}}),[]),handleUndo=react_1.useCallback((function(){if(!(undoStackPointer.current<0)){var patches=undoStack.current[undoStackPointer.current].inversePatches;undoStackPointer.current--,onUndo&&onUndo(patches),forceRender()}}),[]),handleRedo=react_1.useCallback((function(){if(undoStackPointer.current!==undoStack.current.length-1){undoStackPointer.current++;var patches=undoStack.current[undoStackPointer.current].patches;onRedo&&onRedo(patches),forceRender()}}),[]),addUndoable=react_1.useCallback((function(history){var patches=history.patches,inversePatches=history.inversePatches,pointer=++undoStackPointer.current;undoStack.current.length=pointer,undoStack.current[pointer]={patches:patches,inversePatches:inversePatches},forceRender()}),[]),replaceLastPatch=react_1.useCallback((function(patches,inversePatches){var _curPatches$patches;if(void 0!==patches){var _curPatches$inversePa,curPatches=undoStack.current[undoStackPointer.current];if(void 0!==(null==curPatches?void 0:curPatches.patches))if((_curPatches$patches=curPatches.patches).push.apply(_curPatches$patches,_toConsumableArray(patches)),inversePatches&&(null==curPatches?void 0:curPatches.inversePatches))(_curPatches$inversePa=curPatches.inversePatches).unshift.apply(_curPatches$inversePa,_toConsumableArray(inversePatches))}}),[]);return{undo:handleUndo,redo:handleRedo,add:addUndoable,replace:replaceLastPatch,onKeyDown:enableGlobalKeyHandlers?void 0:handleKeyDown,canUndo:!(undoStackPointer.current<0),canRedo:!(undoStackPointer.current===undoStack.current.length-1)}}},362:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(75),__webpack_require__(16),__webpack_require__(85),__webpack_require__(13),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(35),__webpack_require__(47),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(29),__webpack_require__(27),__webpack_require__(23);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(__webpack_require__(0)),helpers_1=__webpack_require__(58),getDefaultFilerComponent=function getDefaultFilerComponent(cell){return null};exports.default=function useFilter(_ref){var _ref$getFilterCompone=_ref.getFilterComponent,getFilterComponent=void 0===_ref$getFilterCompone?getDefaultFilerComponent:_ref$getFilterCompone,gridRef=_ref.gridRef,_ref$width=_ref.width,width=void 0===_ref$width?220:_ref$width,_ref$offset=_ref.offset,offset=void 0===_ref$offset?20:_ref$offset,getValue=_ref.getValue,_ref$frozenRows=_ref.frozenRows,frozenRows=void 0===_ref$frozenRows?0:_ref$frozenRows,_ref$frozenColumns=_ref.frozenColumns,frozenColumns=void 0===_ref$frozenColumns?0:_ref$frozenColumns,_react_1$useState2=_slicedToArray(react_1.useState(null),2),filterCell=_react_1$useState2[0],setFilterCell=_react_1$useState2[1],_react_1$useState4=_slicedToArray(react_1.useState(!1),2),isFilterVisible=_react_1$useState4[0],setIsFilterVisible=_react_1$useState4[1],_react_1$useState6=_slicedToArray(react_1.useState(null),2),currentFilter=_react_1$useState6[0],setCurrentFilter=_react_1$useState6[1],_react_1$useState8=_slicedToArray(react_1.useState({x:0,y:0}),2),position=_react_1$useState8[0],setPosition=_react_1$useState8[1],FilterComponent=react_1.useMemo((function(){return getFilterComponent(filterCell)}),[filterCell]),handleShowFilter=react_1.useCallback((function(coords,index,filterView,filter){if(gridRef.current){coords=gridRef.current.getActualCellCoords(coords);var scrollPosition=gridRef.current.getScrollPosition(),pos=gridRef.current.getCellOffsetFromCoords(coords),isFrozenColumn=coords.columnIndex<frozenColumns,isFrozenRow=coords.rowIndex<frozenRows;setPosition((function(prev){var left=pos.x,top=pos.y,cellWidth=pos.width;return{x:left+cellWidth-(isFrozenColumn?0:scrollPosition.scrollLeft)<width?left+cellWidth-offset-(isFrozenColumn?0:scrollPosition.scrollLeft):left+cellWidth-(isFrozenColumn?0:scrollPosition.scrollLeft)-width,y:top-(isFrozenRow?0:scrollPosition.scrollTop)+offset}})),setFilterCell(coords),setCurrentFilter({filter:filter,filterView:filterView,index:index}),showFilter()}}),[frozenRows,frozenColumns]),hideFilter=react_1.useCallback((function(){setIsFilterVisible(!1)}),[]),showFilter=react_1.useCallback((function(){setIsFilterVisible(!0)}),[]),values=react_1.useMemo((function(){if(!filterCell||!currentFilter)return[];for(var filterView=currentFilter.filterView,columnIndex=filterCell.columnIndex,bounds=filterView.bounds,filterValues=new Set,i=bounds.top+1;i<=bounds.bottom;i++){var text=getValue({rowIndex:i,columnIndex:columnIndex}),value=helpers_1.isNull(text)?"":text;filterValues.add(value)}return Array.from(filterValues)}),[filterCell,currentFilter]);return{filterComponent:isFilterVisible&&FilterComponent?react_1.default.createElement(FilterComponent,{position:position,width:width,values:values,index:null==currentFilter?void 0:currentFilter.index,filterView:null==currentFilter?void 0:currentFilter.filterView,filter:null==currentFilter?void 0:currentFilter.filter,columnIndex:null==filterCell?void 0:filterCell.columnIndex,rowIndex:null==filterCell?void 0:filterCell.rowIndex,onRequestClose:hideFilter,onRequestShow:handleShowFilter}):null,showFilter:handleShowFilter,hideFilter:hideFilter}}},363:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(75),__webpack_require__(16),__webpack_require__(12),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(__webpack_require__(0)),react_konva_1=__webpack_require__(3),useImage_1=__importDefault(__webpack_require__(794)),ImageComponent=react_1.memo((function(props){var url=props.url,_props$width=props.width,width=void 0===_props$width?0:_props$width,_props$height=props.height,height=void 0===_props$height?0:_props$height,_props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$spacing=props.spacing,spacing=void 0===_props$spacing?1:_props$spacing,rest=_objectWithoutProperties(props,["url","width","height","x","y","spacing"]),_useImage_1$default=useImage_1.default({url:url}),image=_useImage_1$default.image,imageWidth=_useImage_1$default.width,imageHeight=_useImage_1$default.height,status=_useImage_1$default.status,aspectRatio=react_1.useMemo((function(){return Math.min((width-spacing)/imageWidth,(height-spacing)/imageHeight)}),[imageWidth,imageHeight,width,height,spacing]);return x+=spacing,y+=spacing,width=Math.min(imageWidth,aspectRatio*imageWidth),height=Math.min(imageHeight,aspectRatio*imageHeight),"loaded"!==status?null:react_1.default.createElement(react_konva_1.Image,Object.assign({},rest,{x:x,y:y,height:height,width:width,image:image}))}));exports.default=ImageComponent},372:function(module,exports,__webpack_require__){__webpack_require__(373),__webpack_require__(543),__webpack_require__(544),__webpack_require__(805),module.exports=__webpack_require__(737)},447:function(module,exports){},544:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(193)},58:function(module,exports,__webpack_require__){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}__webpack_require__(16),__webpack_require__(85),__webpack_require__(13),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(21),__webpack_require__(86),__webpack_require__(87),__webpack_require__(747),__webpack_require__(748),__webpack_require__(344),__webpack_require__(12),__webpack_require__(43),__webpack_require__(44),__webpack_require__(145),__webpack_require__(65),__webpack_require__(143),__webpack_require__(120),__webpack_require__(14),__webpack_require__(26),__webpack_require__(29),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35),__webpack_require__(38),Object.defineProperty(exports,"__esModule",{value:!0}),exports.isArrowKey=exports.castToString=exports.focusableNodeNames=exports.findNextCellInDataRegion=exports.findLastContentfulCell=exports.findNextContentfulCell=exports.clampIndex=exports.isCellWithinBounds=exports.isEqualCells=exports.isNull=exports.autoSizerCanvas=exports.AutoSizerCanvas=exports.canUseDOM=exports.cellRangeToBounds=exports.extendAreaToMergedCells=exports.isAreasEqual=exports.areaInsideArea=exports.areaIntersects=exports.findNextCellWithinBounds=exports.prepareClipboardData=exports.numberToAlphabet=exports.clampCellCoords=exports.newSelectionFromDrag=exports.selectionSpansCells=exports.selectionFromActiveCell=exports.requestTimeout=exports.cancelTimeout=exports.getOffsetForRowAndAlignment=exports.getOffsetForColumnAndAlignment=exports.getOffsetForIndexAndAlignment=exports.rafThrottle=exports.debounce=exports.throttle=exports.cellIdentifier=exports.getEstimatedTotalWidth=exports.getEstimatedTotalHeight=exports.getItemMetadata=exports.getColumnWidth=exports.getRowHeight=exports.getColumnOffset=exports.getRowOffset=exports.itemKey=exports.getBoundedCells=exports.getColumnStopIndexForStartIndex=exports.getColumnStartIndexForOffset=exports.getRowStopIndexForStartIndex=exports.getRowStartIndexForOffset=exports.ItemType=exports.Align=void 0;var Align,ItemType,types_1=__webpack_require__(97);!function(Align){Align.start="start",Align.end="end",Align.center="center",Align.auto="auto",Align.smart="smart"}(Align=exports.Align||(exports.Align={})),function(ItemType){ItemType.row="row",ItemType.column="column"}(ItemType=exports.ItemType||(exports.ItemType={}));exports.getRowStartIndexForOffset=function getRowStartIndexForOffset(_ref){var rowHeight=_ref.rowHeight,columnWidth=_ref.columnWidth,rowCount=_ref.rowCount,columnCount=_ref.columnCount,instanceProps=_ref.instanceProps,offset=_ref.offset,scale=_ref.scale;return findNearestItem({itemType:ItemType.row,rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps,offset:offset,scale:scale})};exports.getRowStopIndexForStartIndex=function getRowStopIndexForStartIndex(_ref2){for(var startIndex=_ref2.startIndex,rowCount=_ref2.rowCount,rowHeight=_ref2.rowHeight,columnWidth=_ref2.columnWidth,scrollTop=_ref2.scrollTop,containerHeight=_ref2.containerHeight,instanceProps=_ref2.instanceProps,scale=_ref2.scale,itemMetadata=exports.getItemMetadata({itemType:ItemType.row,rowHeight:rowHeight,columnWidth:columnWidth,index:startIndex,instanceProps:instanceProps,scale:scale}),maxOffset=scrollTop+containerHeight,offset=itemMetadata.offset+itemMetadata.size,stopIndex=startIndex;stopIndex<rowCount-1&&offset<maxOffset;)stopIndex++,offset+=exports.getItemMetadata({itemType:ItemType.row,rowHeight:rowHeight,columnWidth:columnWidth,index:stopIndex,instanceProps:instanceProps,scale:scale}).size;return stopIndex};exports.getColumnStartIndexForOffset=function getColumnStartIndexForOffset(_ref3){var rowHeight=_ref3.rowHeight,columnWidth=_ref3.columnWidth,rowCount=_ref3.rowCount,columnCount=_ref3.columnCount,instanceProps=_ref3.instanceProps,offset=_ref3.offset,scale=_ref3.scale;return findNearestItem({itemType:ItemType.column,rowHeight:rowHeight,columnWidth:columnWidth,rowCount:rowCount,columnCount:columnCount,instanceProps:instanceProps,offset:offset,scale:scale})};exports.getColumnStopIndexForStartIndex=function getColumnStopIndexForStartIndex(_ref4){for(var startIndex=_ref4.startIndex,rowHeight=_ref4.rowHeight,columnWidth=_ref4.columnWidth,instanceProps=_ref4.instanceProps,containerWidth=_ref4.containerWidth,scrollLeft=_ref4.scrollLeft,columnCount=_ref4.columnCount,scale=_ref4.scale,itemMetadata=exports.getItemMetadata({itemType:ItemType.column,index:startIndex,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps,scale:scale}),maxOffset=scrollLeft+containerWidth,offset=itemMetadata.offset+itemMetadata.size,stopIndex=startIndex;stopIndex<columnCount-1&&offset<maxOffset;)stopIndex++,offset+=exports.getItemMetadata({itemType:ItemType.column,rowHeight:rowHeight,columnWidth:columnWidth,index:stopIndex,instanceProps:instanceProps,scale:scale}).size;return stopIndex};exports.getBoundedCells=function getBoundedCells(area){var cells=new Set;if(!area)return cells;for(var top=area.top,bottom=area.bottom,left=area.left,right=area.right,i=top;i<=bottom;i++)for(var j=left;j<=right;j++)cells.add(exports.cellIdentifier(i,j));return cells};exports.itemKey=function itemKey(_ref5){var rowIndex=_ref5.rowIndex,columnIndex=_ref5.columnIndex;return"".concat(rowIndex,":").concat(columnIndex)};exports.getRowOffset=function getRowOffset(_ref6){var index=_ref6.index,rowHeight=_ref6.rowHeight,columnWidth=_ref6.columnWidth,instanceProps=_ref6.instanceProps,scale=_ref6.scale;return exports.getItemMetadata({itemType:ItemType.row,index:index,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps,scale:scale}).offset};exports.getColumnOffset=function getColumnOffset(_ref7){var index=_ref7.index,rowHeight=_ref7.rowHeight,columnWidth=_ref7.columnWidth,instanceProps=_ref7.instanceProps,scale=_ref7.scale;return exports.getItemMetadata({itemType:ItemType.column,index:index,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps,scale:scale}).offset};exports.getRowHeight=function getRowHeight(index,instanceProps){return instanceProps.rowMetadataMap[index].size};exports.getColumnWidth=function getColumnWidth(index,instanceProps){return instanceProps.columnMetadataMap[index].size};exports.getItemMetadata=function getItemMetadata(_ref8){var _a,itemMetadataMap,itemSize,lastMeasuredIndex,recalcIndices,itemType=_ref8.itemType,index=_ref8.index,rowHeight=_ref8.rowHeight,columnWidth=_ref8.columnWidth,instanceProps=_ref8.instanceProps,_ref8$scale=_ref8.scale,scale=void 0===_ref8$scale?2:_ref8$scale;"column"===itemType?(itemMetadataMap=instanceProps.columnMetadataMap,itemSize=columnWidth,lastMeasuredIndex=instanceProps.lastMeasuredColumnIndex,recalcIndices=instanceProps.recalcColumnIndices):(itemMetadataMap=instanceProps.rowMetadataMap,itemSize=rowHeight,lastMeasuredIndex=instanceProps.lastMeasuredRowIndex,recalcIndices=instanceProps.recalcRowIndices);var recalcWithinBoundsOnly=recalcIndices.length>0;if(index>lastMeasuredIndex){var offset=0;if(lastMeasuredIndex>=0){var itemMetadata=itemMetadataMap[lastMeasuredIndex];offset=itemMetadata.offset+itemMetadata.size}for(var i=lastMeasuredIndex+1;i<=index;i++){var size=recalcWithinBoundsOnly?recalcIndices.includes(i)?itemSize(i)*scale:(null===(_a=itemMetadataMap[i])||void 0===_a?void 0:_a.size)||itemSize(i)*scale:itemSize(i)*scale;itemMetadataMap[i]={offset:offset,size:size},offset+=size}"column"===itemType?instanceProps.lastMeasuredColumnIndex=index:instanceProps.lastMeasuredRowIndex=index}return itemMetadataMap[index]};var findNearestItem=function findNearestItem(_ref9){var itemMetadataMap,lastMeasuredIndex,itemType=_ref9.itemType,rowHeight=_ref9.rowHeight,columnWidth=_ref9.columnWidth,rowCount=_ref9.rowCount,columnCount=_ref9.columnCount,instanceProps=_ref9.instanceProps,offset=_ref9.offset,scale=_ref9.scale;return"column"===itemType?(itemMetadataMap=instanceProps.columnMetadataMap,lastMeasuredIndex=instanceProps.lastMeasuredColumnIndex):(itemMetadataMap=instanceProps.rowMetadataMap,lastMeasuredIndex=instanceProps.lastMeasuredRowIndex),(lastMeasuredIndex>0?itemMetadataMap[lastMeasuredIndex].offset:0)>=offset?findNearestItemBinarySearch({itemType:itemType,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps,high:lastMeasuredIndex,low:0,offset:offset,scale:scale}):findNearestItemExponentialSearch({itemType:itemType,rowHeight:rowHeight,rowCount:rowCount,columnCount:columnCount,columnWidth:columnWidth,instanceProps:instanceProps,index:Math.max(0,lastMeasuredIndex),offset:offset,scale:scale})},findNearestItemBinarySearch=function findNearestItemBinarySearch(_ref10){for(var itemType=_ref10.itemType,rowHeight=_ref10.rowHeight,columnWidth=_ref10.columnWidth,instanceProps=_ref10.instanceProps,high=_ref10.high,low=_ref10.low,offset=_ref10.offset,scale=_ref10.scale;low<=high;){var middle=low+Math.floor((high-low)/2),currentOffset=exports.getItemMetadata({itemType:itemType,rowHeight:rowHeight,columnWidth:columnWidth,index:middle,instanceProps:instanceProps,scale:scale}).offset;if(currentOffset===offset)return middle;currentOffset<offset?low=middle+1:currentOffset>offset&&(high=middle-1)}return low>0?low-1:0},findNearestItemExponentialSearch=function findNearestItemExponentialSearch(_ref11){for(var itemType=_ref11.itemType,rowHeight=_ref11.rowHeight,columnWidth=_ref11.columnWidth,rowCount=_ref11.rowCount,columnCount=_ref11.columnCount,instanceProps=_ref11.instanceProps,index=_ref11.index,offset=_ref11.offset,scale=_ref11.scale,itemCount="column"===itemType?columnCount:rowCount,interval=1;index<itemCount&&exports.getItemMetadata({itemType:itemType,rowHeight:rowHeight,columnWidth:columnWidth,index:index,instanceProps:instanceProps,scale:scale}).offset<offset;)index+=interval,interval*=2;return findNearestItemBinarySearch({itemType:itemType,rowHeight:rowHeight,columnWidth:columnWidth,instanceProps:instanceProps,high:Math.min(index,itemCount-1),low:Math.floor(index/2),offset:offset,scale:scale})};exports.getEstimatedTotalHeight=function getEstimatedTotalHeight(rowCount,instanceProps){var estimatedRowHeight=instanceProps.estimatedRowHeight,totalSizeOfMeasuredRows=0,lastMeasuredRowIndex=instanceProps.lastMeasuredRowIndex,rowMetadataMap=instanceProps.rowMetadataMap;if(lastMeasuredRowIndex>=rowCount&&(lastMeasuredRowIndex=rowCount-1),lastMeasuredRowIndex>=0){var itemMetadata=rowMetadataMap[lastMeasuredRowIndex];totalSizeOfMeasuredRows=itemMetadata.offset+itemMetadata.size}return totalSizeOfMeasuredRows+(rowCount-lastMeasuredRowIndex-1)*estimatedRowHeight};exports.getEstimatedTotalWidth=function getEstimatedTotalWidth(columnCount,instanceProps){var estimatedColumnWidth=instanceProps.estimatedColumnWidth,totalSizeOfMeasuredRows=0,lastMeasuredColumnIndex=instanceProps.lastMeasuredColumnIndex,columnMetadataMap=instanceProps.columnMetadataMap;if(lastMeasuredColumnIndex>=columnCount&&(lastMeasuredColumnIndex=columnCount-1),lastMeasuredColumnIndex>=0){var itemMetadata=columnMetadataMap[lastMeasuredColumnIndex];totalSizeOfMeasuredRows=itemMetadata.offset+itemMetadata.size}return totalSizeOfMeasuredRows+(columnCount-lastMeasuredColumnIndex-1)*estimatedColumnWidth};exports.cellIdentifier=function cellIdentifier(rowIndex,columnIndex){return"".concat(rowIndex,",").concat(columnIndex)},exports.throttle=function throttle(func,limit){var lastEventTimestamp=null;return function callable(){var now=Date.now();(!lastEventTimestamp||now-lastEventTimestamp>=limit)&&(lastEventTimestamp=now,func.apply(void 0,arguments))}},exports.debounce=function debounce(cb){var wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,h=0,callable=function callable(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];clearTimeout(h),h=window.setTimeout((function(){return cb.apply(void 0,args)}),wait)};return callable},exports.rafThrottle=function rafThrottle(callback){var evt,active=!1,handler=function handler(){active=!1,callback(evt)};return function handleEvent(e){(evt=e)&&evt.persist&&evt.persist(),active||(active=!0,requestAnimationFrame(handler))}};exports.getOffsetForIndexAndAlignment=function getOffsetForIndexAndAlignment(_ref12){var itemType=_ref12.itemType,containerHeight=_ref12.containerHeight,containerWidth=_ref12.containerWidth,rowHeight=_ref12.rowHeight,columnWidth=_ref12.columnWidth,index=(_ref12.columnCount,_ref12.rowCount,_ref12.index),_ref12$align=_ref12.align,align=void 0===_ref12$align?Align.smart:_ref12$align,scrollOffset=_ref12.scrollOffset,instanceProps=_ref12.instanceProps,scrollbarSize=_ref12.scrollbarSize,_ref12$frozenOffset=_ref12.frozenOffset,frozenOffset=void 0===_ref12$frozenOffset?0:_ref12$frozenOffset,scale=_ref12.scale,estimatedTotalHeight=_ref12.estimatedTotalHeight,estimatedTotalWidth=_ref12.estimatedTotalWidth,size="column"===itemType?containerWidth:containerHeight,itemMetadata=exports.getItemMetadata({itemType:itemType,rowHeight:rowHeight,columnWidth:columnWidth,index:index,instanceProps:instanceProps,scale:scale}),estimatedTotalSize="column"===itemType?estimatedTotalWidth:estimatedTotalHeight,maxOffset=Math.max(0,Math.min(estimatedTotalSize-size,itemMetadata.offset-frozenOffset)),minOffset=Math.max(0,itemMetadata.offset-size+scrollbarSize+itemMetadata.size);switch(align===Align.smart&&(align=scrollOffset>=minOffset-size&&scrollOffset<=maxOffset+size?Align.auto:Align.center),align){case Align.start:return maxOffset;case Align.end:return minOffset;case Align.center:return Math.round(minOffset+(maxOffset-minOffset)/2);case Align.auto:default:return scrollOffset>=minOffset&&scrollOffset<=maxOffset?scrollOffset:minOffset>maxOffset||scrollOffset<minOffset?minOffset:maxOffset}};exports.getOffsetForColumnAndAlignment=function getOffsetForColumnAndAlignment(props){return exports.getOffsetForIndexAndAlignment(Object.assign({itemType:ItemType.column},props))};exports.getOffsetForRowAndAlignment=function getOffsetForRowAndAlignment(props){return exports.getOffsetForIndexAndAlignment(Object.assign({itemType:ItemType.row},props))};var now="object"===("undefined"==typeof performance?"undefined":_typeof(performance))&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};exports.cancelTimeout=function cancelTimeout(timeoutID){cancelAnimationFrame(timeoutID.id)},exports.requestTimeout=function requestTimeout(callback,delay){var start=now(),timeoutID={id:requestAnimationFrame((function tick(){now()-start>=delay?callback.call(null):timeoutID.id=requestAnimationFrame(tick)}))};return timeoutID};exports.selectionFromActiveCell=function selectionFromActiveCell(activeCell){return activeCell?[{bounds:{top:activeCell.rowIndex,left:activeCell.columnIndex,bottom:activeCell.rowIndex,right:activeCell.columnIndex}}]:[]};exports.selectionSpansCells=function selectionSpansCells(sel){return!!sel&&(sel.bottom!==sel.top||sel.left!==sel.right)};exports.newSelectionFromDrag=function newSelectionFromDrag(initialSelection,from,to){var topBound=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,leftBound=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,rowCount=arguments.length>5?arguments[5]:void 0,columnCount=arguments.length>6?arguments[6]:void 0,currentBounds=initialSelection.bounds,top=Math.max(topBound,Math.min(rowCount,to.rowIndex+currentBounds.top-from.rowIndex)),left=Math.max(leftBound,Math.min(columnCount,to.columnIndex+currentBounds.left-from.columnIndex));return{bounds:{top:top,left:left,bottom:top+(currentBounds.bottom-currentBounds.top),right:left+(currentBounds.right-currentBounds.left)}}};exports.clampCellCoords=function clampCellCoords(coords,activeCell,selection){return activeCell&&(coords.rowIndex=Math.max(activeCell.rowIndex,coords.rowIndex),coords.columnIndex=Math.min(activeCell.columnIndex,coords.columnIndex)),selection&&(coords.rowIndex=Math.min(selection.bounds.bottom,Math.max(selection.bounds.top,coords.rowIndex)),coords.columnIndex=Math.min(selection.bounds.right,Math.max(selection.bounds.left,coords.columnIndex))),coords};exports.numberToAlphabet=function numberToAlphabet(i){return((i>=26?exports.numberToAlphabet((i/26>>0)-1):"")+"abcdefghijklmnopqrstuvwxyz"[i%26>>0]).toUpperCase()};exports.prepareClipboardData=function prepareClipboardData(rows){var html=["<table>"],csv=[];return rows.forEach((function(row){html.push("<tr>");var csvRow=[];row.forEach((function(cell){var _a;html.push("<td>".concat(function sanitizeCell(value){return exports.isNull(value)?"":value}(cell),"</td>")),csvRow.push("".concat(null===(_a=exports.castToString(cell))||void 0===_a?void 0:_a.replace(/"/g,'""')))})),csv.push(csvRow.join(",")),html.push("</tr>")})),html.push("</table>"),[html.join(""),csv.join("\n")]};exports.findNextCellWithinBounds=function findNextCellWithinBounds(activeCellBounds,selectionBounds){var rowIndex,columnIndex,direction=arguments.length>2&&void 0!==arguments[2]?arguments[2]:types_1.Direction.Right,intersects=exports.areaIntersects(activeCellBounds,selectionBounds);if(!intersects)return null;var nextActiveCell=null;return direction===types_1.Direction.Right&&(rowIndex=activeCellBounds.top,(columnIndex=activeCellBounds.left+1)>selectionBounds.right&&(rowIndex+=1,columnIndex=selectionBounds.left,rowIndex>selectionBounds.bottom&&(rowIndex=selectionBounds.top)),nextActiveCell={rowIndex:rowIndex,columnIndex:columnIndex}),direction===types_1.Direction.Left&&(rowIndex=activeCellBounds.bottom,(columnIndex=activeCellBounds.left-1)<selectionBounds.left&&(rowIndex-=1,columnIndex=selectionBounds.right,rowIndex<selectionBounds.top&&(rowIndex=selectionBounds.bottom)),nextActiveCell={rowIndex:rowIndex,columnIndex:columnIndex}),direction===types_1.Direction.Down&&(rowIndex=activeCellBounds.bottom+1,columnIndex=activeCellBounds.left,rowIndex>selectionBounds.bottom&&(columnIndex=activeCellBounds.left+1,rowIndex=selectionBounds.top,columnIndex>selectionBounds.right&&(columnIndex=selectionBounds.left)),nextActiveCell={rowIndex:rowIndex,columnIndex:columnIndex}),direction===types_1.Direction.Up&&(rowIndex=activeCellBounds.top-1,columnIndex=activeCellBounds.left,rowIndex<selectionBounds.top&&(columnIndex=activeCellBounds.left-1,rowIndex=selectionBounds.bottom,columnIndex<selectionBounds.left&&(columnIndex=selectionBounds.right)),nextActiveCell={rowIndex:rowIndex,columnIndex:columnIndex}),nextActiveCell};exports.areaIntersects=function areaIntersects(area1,area2){return!(area1.left>area2.right||area2.left>area1.right)&&!(area1.top>area2.bottom||area2.top>area1.bottom)};exports.areaInsideArea=function areaInsideArea(needle,haystack){return needle.top>=haystack.top&&needle.bottom<=haystack.bottom&&needle.left>=haystack.left&&needle.right<=haystack.right};exports.isAreasEqual=function isAreasEqual(area1,area2){return void 0!==area1&&void 0!==area2&&(area1.bottom===area2.bottom&&area1.top===area2.top&&area1.left===area2.left&&area1.right===area2.right)};exports.extendAreaToMergedCells=function extendAreaToMergedCells(_area,mergedCells){var _step,area=Object.assign({},_area),_iterator=_createForOfIteratorHelper(mergedCells);try{for(_iterator.s();!(_step=_iterator.n()).done;){var bounds=_step.value;exports.areaIntersects(area,bounds)&&(area.top=Math.min(area.top,bounds.top),area.bottom=Math.max(area.bottom,bounds.bottom),area.right=Math.max(area.right,bounds.right),area.left=Math.min(area.left,bounds.left))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return area};exports.cellRangeToBounds=function cellRangeToBounds(start,end){var spanMerges=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],getCellBounds=arguments.length>3?arguments[3]:void 0,top=Math.min(start.rowIndex,end.rowIndex),bottom=Math.max(start.rowIndex,end.rowIndex),left=Math.min(start.columnIndex,end.columnIndex),right=Math.max(start.columnIndex,end.columnIndex);if(spanMerges){for(var columnIndex=left;columnIndex<=right;columnIndex++){var topCell=getCellBounds({rowIndex:top,columnIndex:columnIndex}),bottomCell=getCellBounds({rowIndex:bottom,columnIndex:columnIndex});bottom=Math.max(topCell.bottom,bottomCell.bottom,bottom),top=Math.min(topCell.top,bottomCell.top,top)}for(var rowIndex=top;rowIndex<=bottom;rowIndex++){var _topCell=getCellBounds({rowIndex:rowIndex,columnIndex:left}),_bottomCell=getCellBounds({rowIndex:rowIndex,columnIndex:right});right=Math.max(_topCell.right,_bottomCell.right,right),left=Math.min(_topCell.left,_bottomCell.left,left)}}return{top:top,left:left,right:right,bottom:bottom}},exports.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);exports.AutoSizerCanvas=function AutoSizerCanvas(){var defaults=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_defaults$fontFamily=defaults.fontFamily,fontFamily=void 0===_defaults$fontFamily?"Arial":_defaults$fontFamily,_defaults$fontSize=defaults.fontSize,fontSize=void 0===_defaults$fontSize?12:_defaults$fontSize,_defaults$fontWeight=defaults.fontWeight,fontWeight=void 0===_defaults$fontWeight?"":_defaults$fontWeight,_defaults$fontStyle=defaults.fontStyle,fontStyle=void 0===_defaults$fontStyle?"":_defaults$fontStyle,_defaults$lineHeight=defaults.lineHeight,lineHeight=void 0===_defaults$lineHeight?16:_defaults$lineHeight,_defaults$scale=defaults.scale,scale=void 0===_defaults$scale?1:_defaults$scale,o={fontFamily:fontFamily,fontSize:fontSize,fontWeight:fontWeight,fontStyle:fontStyle,lineHeight:lineHeight,scale:scale},canvas=exports.canUseDOM&&document.createElement("canvas"),context=canvas?canvas.getContext("2d"):null,setFont=function setFont(){var _a,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var key in options)o[key]=null!==(_a=options[key])&&void 0!==_a?_a:o[key];context&&(context.font="".concat(o.fontStyle," ").concat(o.fontWeight," ").concat(o.fontSize*o.scale,"px ").concat(o.fontFamily))},getWidthOfLongestText=function getWidthOfLongestText(text){var _a,width=0,height=0;if(void 0===text)return{width:width,height:height};for(var lines=text.split("\n"),i=0;i<lines.length;i++){var line=lines[i],lineWidth=null!==(_a=null==context?void 0:context.measureText(line).width)&&void 0!==_a?_a:0;width=Math.max(width,lineWidth),height+=1.2*o.fontSize*o.scale}return{width:Math.ceil(width),height:Math.ceil(height)}},measureText=function measureText(text){return getWidthOfLongestText(exports.castToString(text))},reset=function reset(){return setFont(defaults)};return setFont(o),{context:context,measureText:measureText,setFont:setFont,reset:reset}},exports.autoSizerCanvas=exports.AutoSizerCanvas();exports.isNull=function isNull(value){return null==value||""===value};exports.isEqualCells=function isEqualCells(a,b){return!exports.isNull(a)&&!exports.isNull(b)&&null!==a&&null!==b&&(a.rowIndex===b.rowIndex&&a.columnIndex===b.columnIndex)};exports.isCellWithinBounds=function isCellWithinBounds(cell,bounds){return!(cell.rowIndex<bounds.top||cell.rowIndex>bounds.bottom)&&!(cell.columnIndex<bounds.left||cell.columnIndex>bounds.right)};exports.clampIndex=function clampIndex(index,isHidden,direction){switch(direction){case types_1.Direction.Right:case types_1.Direction.Down:for(var hidden=null==isHidden?void 0:isHidden(index);!0===hidden;)hidden=null==isHidden?void 0:isHidden(++index);break;case types_1.Direction.Left:case types_1.Direction.Up:for(var _hidden=null==isHidden?void 0:isHidden(index);!0===_hidden;)_hidden=null==isHidden?void 0:isHidden(--index)}return index};exports.findNextContentfulCell=function findNextContentfulCell(activeCell,getValue,isHidden,direction,limit){var rowIndex=activeCell.rowIndex,columnIndex=activeCell.columnIndex;switch(direction){case types_1.Direction.Down:for(var value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.min(rowIndex+1,limit),isHidden,direction),columnIndex:columnIndex});exports.isNull(value)&&rowIndex<limit;)value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.min(++rowIndex,limit),isHidden,direction),columnIndex:columnIndex});return{rowIndex:rowIndex,columnIndex:columnIndex};case types_1.Direction.Up:for(var _value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.max(rowIndex-1,limit),isHidden,direction),columnIndex:columnIndex});exports.isNull(_value)&&rowIndex>limit;)_value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.max(--rowIndex,limit),isHidden,direction),columnIndex:columnIndex});return{rowIndex:rowIndex,columnIndex:columnIndex};case types_1.Direction.Right:for(var _value2=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.min(columnIndex+1,limit),isHidden,direction)});exports.isNull(_value2)&&columnIndex<limit;)_value2=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.min(++columnIndex,limit),isHidden,direction)});return{rowIndex:rowIndex,columnIndex:columnIndex};case types_1.Direction.Left:for(var _value3=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.max(columnIndex-1,limit),isHidden,direction)});exports.isNull(_value3)&&columnIndex>limit;)_value3=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.max(--columnIndex,limit),isHidden,direction)});return{rowIndex:rowIndex,columnIndex:columnIndex};default:return activeCell}};exports.findLastContentfulCell=function findLastContentfulCell(activeCell,getValue,isHidden,direction,limit){var rowIndex=activeCell.rowIndex,columnIndex=activeCell.columnIndex;switch(direction){case types_1.Direction.Down:for(var value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.min(rowIndex+1,limit),isHidden,direction),columnIndex:columnIndex});!exports.isNull(value)&&rowIndex<limit;)value=getValue({rowIndex:rowIndex=exports.clampIndex(Math.min(++rowIndex,limit),isHidden,direction),columnIndex:columnIndex});return{columnIndex:columnIndex,rowIndex:exports.isNull(getValue({columnIndex:columnIndex,rowIndex:rowIndex}))?rowIndex-1:rowIndex};case types_1.Direction.Up:for(var _value4=getValue({rowIndex:rowIndex=exports.clampIndex(Math.max(rowIndex-1,limit),isHidden,direction),columnIndex:columnIndex});!exports.isNull(_value4)&&rowIndex>limit;)_value4=getValue({rowIndex:rowIndex=exports.clampIndex(Math.max(--rowIndex,limit),isHidden,direction),columnIndex:columnIndex});return{columnIndex:columnIndex,rowIndex:exports.isNull(getValue({columnIndex:columnIndex,rowIndex:rowIndex}))?rowIndex+1:rowIndex};case types_1.Direction.Right:for(var _value5=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.min(columnIndex+1,limit),isHidden,direction)});!exports.isNull(_value5)&&columnIndex<limit;)_value5=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.min(++columnIndex,limit),isHidden,direction)});return{rowIndex:rowIndex,columnIndex:exports.isNull(getValue({columnIndex:columnIndex,rowIndex:rowIndex}))?columnIndex-1:columnIndex};case types_1.Direction.Left:for(var _value6=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.max(columnIndex-1,limit),isHidden,direction)});!exports.isNull(_value6)&&columnIndex>limit;)_value6=getValue({rowIndex:rowIndex,columnIndex:columnIndex=exports.clampIndex(Math.max(--columnIndex,limit),isHidden,direction)});return{rowIndex:rowIndex,columnIndex:exports.isNull(getValue({columnIndex:columnIndex,rowIndex:rowIndex}))?columnIndex+1:columnIndex};default:return activeCell}};exports.findNextCellInDataRegion=function findNextCellInDataRegion(activeCell,getValue,isHidden,direction,limit){var rowIndex=activeCell.rowIndex,columnIndex=activeCell.columnIndex,isCurrentCellEmpty=exports.isNull(getValue(activeCell)),didWeReachTheEdge=function didWeReachTheEdge(cur,next){return cur&&next||cur&&!next||!cur&&next};switch(direction){case types_1.Direction.Down:var nextCellValue=getValue({rowIndex:rowIndex+1,columnIndex:columnIndex}),nextCell=didWeReachTheEdge(isCurrentCellEmpty,exports.isNull(nextCellValue))?exports.findNextContentfulCell(activeCell,getValue,isHidden,direction,limit):exports.findLastContentfulCell(activeCell,getValue,isHidden,direction,limit);return null==nextCell?void 0:nextCell.rowIndex;case types_1.Direction.Up:var _nextCellValue=getValue({rowIndex:rowIndex-1,columnIndex:columnIndex}),_nextCell=didWeReachTheEdge(isCurrentCellEmpty,exports.isNull(_nextCellValue))?exports.findNextContentfulCell(activeCell,getValue,isHidden,direction,limit):exports.findLastContentfulCell(activeCell,getValue,isHidden,direction,limit);return null==_nextCell?void 0:_nextCell.rowIndex;case types_1.Direction.Right:var _nextCellValue2=getValue({rowIndex:rowIndex,columnIndex:columnIndex+1}),_nextCell2=didWeReachTheEdge(isCurrentCellEmpty,exports.isNull(_nextCellValue2))?exports.findNextContentfulCell(activeCell,getValue,isHidden,direction,limit):exports.findLastContentfulCell(activeCell,getValue,isHidden,direction,limit);return null==_nextCell2?void 0:_nextCell2.columnIndex;case types_1.Direction.Left:var _nextCellValue3=getValue({rowIndex:rowIndex,columnIndex:columnIndex-1}),_nextCell3=didWeReachTheEdge(isCurrentCellEmpty,exports.isNull(_nextCellValue3))?exports.findNextContentfulCell(activeCell,getValue,isHidden,direction,limit):exports.findLastContentfulCell(activeCell,getValue,isHidden,direction,limit);return null==_nextCell3?void 0:_nextCell3.columnIndex}},exports.focusableNodeNames=new Set(["INPUT","TEXTAREA","SELECT"]);exports.castToString=function castToString(value){if(null!=value)return"string"!=typeof value?""+value:value};exports.isArrowKey=function isArrowKey(keyCode){return[types_1.KeyCodes.Up,types_1.KeyCodes.Down,types_1.KeyCodes.Left,types_1.KeyCodes.Right].includes(keyCode)}},737:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(193).configure)([__webpack_require__(738)],module,!1)}).call(this,__webpack_require__(152)(module))},738:function(module,exports,__webpack_require__){var map={"./Grid.stories.tsx":739,"./collaborative.stories.tsx":795,"./copypaste.stories.tsx":796,"./overlay.stories.tsx":797,"./pagination.stories.tsx":798,"./styling.stories.tsx":799,"./theme.stories.tsx":800,"./ticking.stories.tsx":801,"./touch.stories.tsx":802,"./treetable.stories.tsx":803,"./undo.stories.tsx":804};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=738},739:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BaseGrid",(function(){return BaseGrid})),__webpack_require__.d(__webpack_exports__,"BaseGridSnap",(function(){return BaseGridSnap})),__webpack_require__.d(__webpack_exports__,"FullWidthGrid",(function(){return FullWidthGrid})),__webpack_require__.d(__webpack_exports__,"AutoSizer",(function(){return AutoSizer})),__webpack_require__.d(__webpack_exports__,"MergedCells",(function(){return MergedCells})),__webpack_require__.d(__webpack_exports__,"BaseGridWithSelection",(function(){return BaseGridWithSelection})),__webpack_require__.d(__webpack_exports__,"VariableSizeGrid",(function(){return VariableSizeGrid})),__webpack_require__.d(__webpack_exports__,"LargeGrid",(function(){return LargeGrid})),__webpack_require__.d(__webpack_exports__,"DataGrid",(function(){return DataGrid})),__webpack_require__.d(__webpack_exports__,"DataGridResize",(function(){return DataGridResize})),__webpack_require__.d(__webpack_exports__,"GridWithFrozenRow",(function(){return GridWithFrozenRow})),__webpack_require__.d(__webpack_exports__,"GridWithFrozenColumns",(function(){return GridWithFrozenColumns})),__webpack_require__.d(__webpack_exports__,"GridWithFrozenEdges",(function(){return GridWithFrozenEdges})),__webpack_require__.d(__webpack_exports__,"EditableGrid",(function(){return EditableGrid})),__webpack_require__.d(__webpack_exports__,"WithTooltip",(function(){return WithTooltip})),__webpack_require__.d(__webpack_exports__,"GridWithContextMenu",(function(){return GridWithContextMenu}));__webpack_require__(18),__webpack_require__(14),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(37),__webpack_require__(27),__webpack_require__(13),__webpack_require__(23),__webpack_require__(35),__webpack_require__(20),__webpack_require__(26),__webpack_require__(29),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38),__webpack_require__(12),__webpack_require__(21),__webpack_require__(84);var react__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_23__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__),react_use__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(806),react_konva__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(3);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default={title:"Grid",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a};var BaseGrid=function BaseGrid(){var App=function App(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Cell,_extends({},props,{value:"".concat(props.rowIndex,":").concat(props.columnIndex)}))},rowHeight:function rowHeight(index){return 20}})};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},BaseGridSnap=function BaseGridSnap(){var Cell=function Cell(_ref){var rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex,x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))},App=function App(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},snap:!0,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Cell,props)},rowHeight:function rowHeight(index){return 20}})};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)};BaseGridSnap.story={name:"Autosnap"};var FullWidthGrid=function FullWidthGrid(){var itemRenderer=function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Cell,_extends({value:"".concat(props.rowIndex,":").concat(props.columnIndex)},props))},App=function App(){var _useMeasure2=_slicedToArray(Object(react_use__WEBPACK_IMPORTED_MODULE_25__.a)(),2),containerRef=_useMeasure2[0],_useMeasure2$=_useMeasure2[1],width=_useMeasure2$.width,height=_useMeasure2$.height;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{flex:1,width:"100%",height:600},ref:containerRef},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:width,height:height,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},itemRenderer:itemRenderer,rowHeight:function rowHeight(index){return 20}}))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},AutoSizer=function AutoSizer(){var Cell=function Cell(_ref2){var rowIndex=_ref2.rowIndex,columnIndex=_ref2.columnIndex,x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,text=_ref2.value||"".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"left",offsetX:-5}))},App=function App(){var _useState3,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)((_defineProperty(_useState3={},[1,2],"Hello, good morning"),_defineProperty(_useState3,[30,4],"lorem asd asd as das dasd asd as da sdasdasda"),_defineProperty(_useState3,[2,15],"lorem asd asd as das dasd asd as da sdasdasda"),_useState3)),2),data=_useState2[0],gridRef=(_useState2[1],Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(null)),getCellValue=Object(react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(_ref3){var rowIndex=_ref3.rowIndex,columnIndex=_ref3.columnIndex;return data[[rowIndex,columnIndex]]}),[data]),autoSizerProps=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSizer)({gridRef:gridRef,getValue:getCellValue});return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({ref:gridRef,width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Cell,_extends({value:data[[props.rowIndex,props.columnIndex]]},props))},rowHeight:function rowHeight(index){return 20}},autoSizerProps))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},MergedCells=function MergedCells(){var Cell=function Cell(_ref4){var rowIndex=_ref4.rowIndex,columnIndex=_ref4.columnIndex,x=_ref4.x,y=_ref4.y,width=_ref4.width,height=_ref4.height,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))},App=function App(){var mergedCells=[{top:5,left:5,right:6,bottom:5},{top:1,left:2,right:4,bottom:5},{top:5,left:0,right:1,bottom:5}],gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200,mergedCells:mergedCells}),onSelectionMouseDown=(_useSelection.selection,_useSelection.onSelectionMouseDown),isDragging=_useSelection.isDragging,draggedSelection=_useSelection.draggedSelection,selectionProps=_objectWithoutProperties(_useSelection,["selection","onSelectionMouseDown","isDragging","draggedSelection"]),borderStyles=Object(react__WEBPACK_IMPORTED_MODULE_23__.useMemo)((function(){return draggedSelection?[_objectSpread(_objectSpread({},draggedSelection),{},{style:{strokeStyle:"dashed",strokeWidth:2,stroke:"#1a73e8"}})]:[]}),[draggedSelection]);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({width:900,height:600,columnCount:200,rowCount:200,ref:gridRef,mergedCells:mergedCells,columnWidth:function columnWidth(index){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Cell,props)},rowHeight:function rowHeight(index){return 20},isDraggingSelection:isDragging,selectionRenderer:function selectionRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Selection,_extends({},props,{onMouseDown:function onMouseDown(e){null==onSelectionMouseDown||onSelectionMouseDown(e,props.activeCell,props.selection,props.key)}}))},borderStyles:borderStyles},selectionProps))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},BaseGridWithSelection=function BaseGridWithSelection(){var initialSelections=[{bounds:{top:2,right:3,left:2,bottom:20},style:{borderStyle:"dashed"}}],Cell=function Cell(_ref5){var rowIndex=_ref5.rowIndex,columnIndex=_ref5.columnIndex,x=_ref5.x,y=_ref5.y,width=_ref5.width,height=_ref5.height,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))},App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useSelection2=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSelection)({initialSelections:initialSelections,gridRef:gridRef,rowCount:200,columnCount:200}),selections=_useSelection2.selections,activeCell=_useSelection2.activeCell,selectionProps=_objectWithoutProperties(_useSelection2,["selections","activeCell"]);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({width:900,height:600,selections:selections,activeCell:activeCell,columnCount:2e3,rowCount:2e3,showGridLines:!0,gridLineColor:"gray",showFillHandle:!1,frozenColumns:1,frozenRows:1,snap:!0,ref:gridRef},selectionProps,{columnWidth:function columnWidth(index){return 100},rowHeight:function rowHeight(index){return 20},itemRenderer:Cell}))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},VariableSizeGrid=function VariableSizeGrid(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},itemRenderer:function Cell(_ref6){var rowIndex=_ref6.rowIndex,columnIndex=_ref6.columnIndex,x=_ref6.x,y=_ref6.y,width=_ref6.width,height=_ref6.height,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))}})},LargeGrid=function LargeGrid(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:1e6,rowCount:1e6,columnWidth:function columnWidth(index){return index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},itemRenderer:function Cell(_ref7){var rowIndex=_ref7.rowIndex,columnIndex=_ref7.columnIndex,x=_ref7.x,y=_ref7.y,width=_ref7.width,height=_ref7.height,text="".concat(rowIndex,"x").concat(columnIndex),fill=columnIndex%2==0?rowIndex%2==0?"#f8f8f0":"white":rowIndex%2?"#f8f8f0":"white";return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:fill,stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))}})};LargeGrid.story={name:"1,000,000 rows and cols"};var DataGrid=function DataGrid(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),Cell=function Cell(_ref8){var rowIndex=_ref8.rowIndex,columnIndex=_ref8.columnIndex,x=_ref8.x,y=_ref8.y,width=_ref8.width,height=_ref8.height,header=_ref8.header,text=header?columnIndex<1?"S/No":"Header ".concat(columnIndex):"".concat(rowIndex,"x").concat(columnIndex),fill=header?"#eee":"white";return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:fill,stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,fontStyle:header?"bold":"normal",verticalAlign:"middle",align:"center"}))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{columnCount:1e5,height:40,rowCount:1,frozenColumns:1,ref:gridRef,width:900,columnWidth:function columnWidth(index){return 0===index?80:index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},showScrollbar:!1,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Cell,_extends({},props,{header:!0}))}}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{columnCount:1e5,rowCount:1e5,frozenColumns:1,height:600,width:900,columnWidth:function columnWidth(index){return 0===index?80:index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},onScroll:function onScroll(_ref9){var scrollLeft=_ref9.scrollLeft;gridRef.current.scrollTo({scrollLeft:scrollLeft})},itemRenderer:Cell}))},DataGridResize=function DataGridResize(){var DraggableRect=function DraggableRect(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,_extends({fill:"blue",draggable:!0,hitStrokeWidth:20,onMouseEnter:function onMouseEnter(){return document.body.style.cursor="ew-resize"},onMouseLeave:function onMouseLeave(){return document.body.style.cursor="default"},dragBoundFunc:function dragBoundFunc(pos){return _objectSpread(_objectSpread({},pos),{},{y:0})}},props))},HeaderComponent=function HeaderComponent(_ref10){_ref10.rowIndex;var columnIndex=_ref10.columnIndex,x=_ref10.x,y=_ref10.y,width=_ref10.width,height=_ref10.height,frozenColumns=_ref10.frozenColumns,onResize=_ref10.onResize,text=columnIndex<frozenColumns?"S/No":"Header ".concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Group,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"#eee",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,fontStyle:"bold",verticalAlign:"middle",align:"center"}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(DraggableRect,{x:x+width-5,y:y,width:5,height:height,onDragMove:function onDragMove(e){var newWidth=e.target.x()-x+5;onResize(columnIndex,newWidth)}}))},Cell=function Cell(_ref11){var rowIndex=_ref11.rowIndex,columnIndex=_ref11.columnIndex,x=_ref11.x,y=_ref11.y,width=_ref11.width,height=_ref11.height,key=_ref11.key,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,{key:key},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,fontStyle:"normal",verticalAlign:"middle",align:"center"}))},App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),mainGridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useState5=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)({}),2),columnWidthMap=_useState5[0],setColumnWidthMap=_useState5[1],handleResize=function handleResize(columnIndex,newWidth){setColumnWidthMap((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},columnIndex,newWidth))})),gridRef.current.resizeColumns([columnIndex]),mainGridRef.current.resizeColumns([columnIndex])};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{columnCount:1e5,height:40,rowCount:1,frozenColumns:1,ref:gridRef,width:900,columnWidth:function columnWidth(index){return index in columnWidthMap?columnWidthMap[index]:0===index?80:index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},showScrollbar:!1,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(HeaderComponent,_extends({onResize:handleResize,frozenColumns:1},props))}}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{columnCount:1e5,rowCount:1e5,frozenColumns:1,height:600,width:900,ref:mainGridRef,columnWidth:function columnWidth(index){return index in columnWidthMap?columnWidthMap[index]:0===index?80:index%3==0?200:100},rowHeight:function rowHeight(index){return index%2==0?40:20},onScroll:function onScroll(_ref12){var scrollLeft=_ref12.scrollLeft;gridRef.current.scrollTo({scrollLeft:scrollLeft})},itemRenderer:Cell}))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)};DataGridResize.story={name:"Grid with resizable headers"};var GridWithFrozenRow=function GridWithFrozenRow(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:200,rowCount:200,frozenRows:1,columnWidth:function columnWidth(index){return 100},rowHeight:function rowHeight(index){return 20},itemRenderer:function Cell(_ref13){var rowIndex=_ref13.rowIndex,columnIndex=_ref13.columnIndex,x=_ref13.x,y=_ref13.y,width=_ref13.width,height=_ref13.height,text="".concat(rowIndex,"x").concat(columnIndex),isFrozen=rowIndex<1;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:isFrozen?"lightblue":"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))}})};GridWithFrozenRow.story={name:"Frozen rows"};var GridWithFrozenColumns=function GridWithFrozenColumns(){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{width:900,height:600,columnCount:200,rowCount:200,frozenColumns:1,columnWidth:function columnWidth(index){return 100},rowHeight:function rowHeight(index){return 20},itemRenderer:function Cell(_ref14){var rowIndex=_ref14.rowIndex,columnIndex=_ref14.columnIndex,x=_ref14.x,y=_ref14.y,width=_ref14.width,height=_ref14.height,text="".concat(rowIndex,"x").concat(columnIndex),isFrozen=columnIndex<1;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:isFrozen?"lightblue":"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))}})};GridWithFrozenColumns.story={name:"Frozen columns"};var GridWithFrozenEdges=function GridWithFrozenEdges(){var Cell=function Cell(_ref15){var rowIndex=_ref15.rowIndex,columnIndex=_ref15.columnIndex,x=_ref15.x,y=_ref15.y,width=_ref15.width,height=_ref15.height,text="".concat(rowIndex,"x").concat(columnIndex),isFrozen=rowIndex<2||columnIndex<2;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:isFrozen?"lightblue":"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))},App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useSelection3=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200}),selection=_useSelection3.selection,selectionProps=_objectWithoutProperties(_useSelection3,["selection"]);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({ref:gridRef,selection:selection,width:900,height:600,columnCount:1e5,rowCount:1e5,frozenColumns:2,frozenRows:2,columnWidth:function columnWidth(index){return 100},rowHeight:function rowHeight(index){return 20},itemRenderer:Cell},selectionProps))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)};GridWithFrozenEdges.story={name:"Frozen columns and rows"};var EditableGrid=function EditableGrid(){var SelectEditor=function SelectEditor(props){var _React$createElement,position=props.position,onSubmit=props.onSubmit,value=props.value,cell=props.cell,nextFocusableCell=props.nextFocusableCell,onBlur=props.onBlur;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{position:"absolute",left:position.x,top:position.y,width:position.width,height:position.height}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("select",(_defineProperty(_React$createElement={style:{width:"100%"},autoFocus:!0,value:value,onBlur:onBlur},"value",value),_defineProperty(_React$createElement,"onChange",(function onChange(e){onSubmit(e.target.value,cell,nextFocusableCell(cell,_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Direction.Down))})),_React$createElement),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("option",null,"Yay Select"),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("option",null,"This can be any React Component")))},App=function App(){var _useState8,_useState7=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)((_defineProperty(_useState8={},[1,2],"Hello lorem ipsum lorem"),_defineProperty(_useState8,[1,1],"Select editor"),_defineProperty(_useState8,[2,3],"Cannot be edited"),_defineProperty(_useState8,[30,4],"lorem asd asd as das dasd asd as da sdasdasda"),_defineProperty(_useState8,[2,15],"lorem asd asd as das dasd asd as da sdasdasda"),_defineProperty(_useState8,[100,80],"asdhasd asd asd asd as dasdas"),_useState8)),2),data=_useState7[0],setData=_useState7[1],gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(null),getCellValue=Object(react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(_ref16){var rowIndex=_ref16.rowIndex,columnIndex=_ref16.columnIndex;return data[[rowIndex,columnIndex]]}),[data]),_useSelection4=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200,onFill:function onFill(activeCell,fillSelection){if(fillSelection){for(var bounds=fillSelection.bounds,changes={},value=getCellValue(activeCell),i=bounds.top;i<=bounds.bottom;i++)for(var j=bounds.left;j<=bounds.right;j++)changes[[i,j]]=value;setData((function(prev){return _objectSpread(_objectSpread({},prev),changes)}))}}}),activeCell=_useSelection4.activeCell,selections=_useSelection4.selections,setActiveCell=_useSelection4.setActiveCell,selectionProps=_objectWithoutProperties(_useSelection4,["activeCell","selections","setActiveCell"]),_useAutoSizer=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useSizer)({gridRef:gridRef,getValue:getCellValue,resizeStrategy:"lazy",rowCount:200,autoResize:!1}),autoSizerProps=(_useAutoSizer.getTextMetrics,_objectWithoutProperties(_useAutoSizer,["getTextMetrics"])),_useEditable=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useEditable)({rowCount:200,columnCount:200,gridRef:gridRef,getValue:getCellValue,selections:selections,frozenRows:2,frozenColumns:2,getEditor:function getEditor(_ref17){var rowIndex=_ref17.rowIndex,columnIndex=_ref17.columnIndex;if(1==rowIndex&&1===columnIndex)return SelectEditor},activeCell:activeCell,onDelete:function onDelete(activeCell,selections){if(selections.length){var newValues=selections.reduce((function(acc,_ref18){for(var sel=_ref18.bounds,i=sel.top;i<=sel.bottom;i++)for(var j=sel.left;j<=sel.right;j++)acc[[i,j]]="";return acc}),{});setData((function(prev){return _objectSpread(_objectSpread({},prev),newValues)}));var selectionBounds=selections[0].bounds;gridRef.current.resetAfterIndices({columnIndex:selectionBounds.left,rowIndex:selectionBounds.top},!0)}else activeCell&&(setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[activeCell.rowIndex,activeCell.columnIndex],""))})),gridRef.current.resetAfterIndices(activeCell))},canEdit:function canEdit(_ref19){var rowIndex=_ref19.rowIndex,columnIndex=_ref19.columnIndex;return 2!==rowIndex||3!==columnIndex},onSubmit:function onSubmit(value,_ref20,nextActiveCell){var rowIndex=_ref20.rowIndex,columnIndex=_ref20.columnIndex;setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[rowIndex,columnIndex],value))})),gridRef.current.resizeColumns([columnIndex]),nextActiveCell&&setActiveCell(nextActiveCell)}}),editorComponent=_useEditable.editorComponent,isEditInProgress=_useEditable.isEditInProgress,editableProps=_objectWithoutProperties(_useEditable,["editorComponent","isEditInProgress"]),rowHeight=Object(react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(){return 20}),[]),columnWidth=Object(react__WEBPACK_IMPORTED_MODULE_23__.useCallback)((function(){return 100}),[]);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{position:"relative"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({frozenColumns:2,frozenRows:2,width:900,height:600,columnCount:1e5,rowCount:1e5,ref:gridRef,activeCell:activeCell,selections:selections,columnWidth:columnWidth,showFillHandle:!isEditInProgress,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Cell,_extends({value:data[[props.rowIndex,props.columnIndex]],align:"left"},props))},rowHeight:rowHeight},selectionProps,editableProps,autoSizerProps,{onKeyDown:function onKeyDown(){selectionProps.onKeyDown.apply(selectionProps,arguments),editableProps.onKeyDown.apply(editableProps,arguments)},onMouseDown:function onMouseDown(){selectionProps.onMouseDown.apply(selectionProps,arguments),editableProps.onMouseDown.apply(editableProps,arguments)}})),editorComponent)};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},WithTooltip=function WithTooltip(){var Cell=function Cell(_ref21){var rowIndex=_ref21.rowIndex,columnIndex=_ref21.columnIndex,x=_ref21.x,y=_ref21.y,width=_ref21.width,height=_ref21.height,text="".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_23___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"grey",strokeWidth:.5}),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_26__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"}))},App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useTooltip=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.useTooltip)({gridRef:gridRef,getValue:function getValue(_ref22){var rowIndex=_ref22.rowIndex,columnIndex=_ref22.columnIndex;return"You are at: ".concat(rowIndex,", ").concat(columnIndex)}}),tooltipComponent=_useTooltip.tooltipComponent,tooltipProps=_objectWithoutProperties(_useTooltip,["tooltipComponent"]);return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{position:"relative"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,_extends({ref:gridRef,width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(Cell,props)},rowHeight:function rowHeight(index){return 20}},tooltipProps)),tooltipComponent)};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)},GridWithContextMenu=function GridWithContextMenu(){var ContextMenu=function ContextMenu(_ref23){var left=_ref23.left,top=_ref23.top,rowIndex=_ref23.rowIndex,columnIndex=_ref23.columnIndex;return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{left:left,top:top,position:"absolute",padding:8,background:"white",boxShadow:"0 1px 2px 3px rgba(0,0,0,0.2)"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",null,"You selected ",rowIndex,": ",columnIndex),react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("a",{href:"#",style:{display:"block",padding:8}},"Hide column"))},App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_23__.useRef)(),_useState10=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_23__.useState)(null),2),contextMenuPostion=_useState10[0],setContextMenuPosition=_useState10[1];return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement("div",{style:{position:"relative"}},react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24___default.a,{ref:gridRef,onContextMenu:function onContextMenu(e){var _gridRef$current$getC=gridRef.current.getCellCoordsFromOffset(e.clientX,e.clientY),rowIndex=_gridRef$current$getC.rowIndex,columnIndex=_gridRef$current$getC.columnIndex;setContextMenuPosition({left:e.clientX+10,top:e.clientY+10,rowIndex:rowIndex,columnIndex:columnIndex}),e.preventDefault()},onMouseDown:function onMouseDown(){return setContextMenuPosition(null)},width:900,height:600,columnCount:200,rowCount:200,columnWidth:function columnWidth(index){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_24__.Cell,_extends({},props,{value:"".concat(props.rowIndex,":").concat(props.columnIndex)}))},rowHeight:function rowHeight(index){return 20}}),contextMenuPostion&&react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(ContextMenu,contextMenuPostion))};return react__WEBPACK_IMPORTED_MODULE_23___default.a.createElement(App,null)}},784:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_require__(16),__webpack_require__(12),__webpack_require__(21),__webpack_require__(18),__webpack_require__(37),__webpack_require__(14);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(__webpack_require__(0));exports.default=function FillHandle(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?0:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?0:_ref$y,stroke=_ref.stroke,_ref$strokeWidth=_ref.strokeWidth,strokeWidth=void 0===_ref$strokeWidth?1:_ref$strokeWidth,_ref$size=_ref.size,size=void 0===_ref$size?8:_ref$size,borderColor=_ref.borderColor,props=_objectWithoutProperties(_ref,["x","y","stroke","strokeWidth","size","borderColor"]);return 0===x||0===y?null:react_1.default.createElement("div",Object.assign({style:{position:"absolute",left:x-size/2,top:y-size/2,width:size,height:size,border:"".concat(strokeWidth,"px ").concat(borderColor," solid"),borderRightWidth:0,borderBottomWidth:0,background:stroke,cursor:"crosshair",pointerEvents:"all"}},props))}},785:function(module,exports,__webpack_require__){"use strict";__webpack_require__(16);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importDefault(__webpack_require__(0)),react_konva_1=__webpack_require__(3);exports.default=function GridLine(props){var points=props.points,stroke=props.stroke,strokeWidth=props.strokeWidth,offsetY=props.offsetY,offsetX=props.offsetX;return react_1.default.createElement(react_konva_1.Line,{points:points,stroke:stroke,strokeWidth:strokeWidth,offsetY:offsetY,offsetX:offsetX,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,listening:!1,perfectDrawEnabled:!1})}},786:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(16),__webpack_require__(787),__webpack_require__(788),__webpack_require__(12),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),helpers_1=__webpack_require__(58),tiny_invariant_1=__importDefault(__webpack_require__(354)),defaultGetText=function defaultGetText(text){return text};exports.default=function useAutoSizer(_ref){var gridRef=_ref.gridRef,getValue=_ref.getValue,_ref$initialVisibleRo=_ref.initialVisibleRows,initialVisibleRows=void 0===_ref$initialVisibleRo?20:_ref$initialVisibleRo,_ref$cellSpacing=_ref.cellSpacing,cellSpacing=void 0===_ref$cellSpacing?10:_ref$cellSpacing,_ref$minColumnWidth=_ref.minColumnWidth,minColumnWidth=void 0===_ref$minColumnWidth?60:_ref$minColumnWidth,_ref$timeout=_ref.timeout,timeout=void 0===_ref$timeout?300:_ref$timeout,_ref$resizeStrategy=_ref.resizeStrategy,resizeStrategy=void 0===_ref$resizeStrategy?"lazy":_ref$resizeStrategy,rowCount=_ref.rowCount,_ref$resizeOnScroll=_ref.resizeOnScroll,resizeOnScroll=void 0===_ref$resizeOnScroll||_ref$resizeOnScroll,_ref$fontFamily=_ref.fontFamily,fontFamily=void 0===_ref$fontFamily?"Arial":_ref$fontFamily,_ref$fontSize=_ref.fontSize,fontSize=void 0===_ref$fontSize?12:_ref$fontSize,_ref$fontWeight=_ref.fontWeight,fontWeight=void 0===_ref$fontWeight?"":_ref$fontWeight,_ref$fontStyle=_ref.fontStyle,fontStyle=void 0===_ref$fontStyle?"":_ref$fontStyle,_ref$autoResize=_ref.autoResize,autoResize=void 0===_ref$autoResize||_ref$autoResize,_ref$frozenRows=(_ref.columnSizes,_ref.frozenRows),frozenRows=void 0===_ref$frozenRows?0:_ref$frozenRows,_ref$scale=_ref.scale,scale=void 0===_ref$scale?1:_ref$scale,isHiddenRow=_ref.isHiddenRow,_ref$getText=(_ref.isHiddenColumn,_ref.getText),getText=void 0===_ref$getText?defaultGetText:_ref$getText;tiny_invariant_1.default(!("full"===resizeStrategy&&void 0===rowCount),"Row count should be specified if resize stragtegy is full");var autoSizer=react_1.useRef(helpers_1.autoSizerCanvas),_react_1$useState2=_slicedToArray(react_1.useState({rowStartIndex:0,rowStopIndex:0,columnStartIndex:0,columnStopIndex:0,visibleRowStartIndex:0,visibleRowStopIndex:0,visibleColumnStartIndex:0,visibleColumnStopIndex:0}),2),viewport=_react_1$useState2[0],setViewport=_react_1$useState2[1],isMounted=react_1.useRef(!1),getValueRef=react_1.useRef(),viewPortRef=react_1.useRef(),hiddenRowRef=react_1.useRef(isHiddenRow),handleResize=react_1.useCallback((function(_ref2){var rowIndex=_ref2.rowIndex,columnIndex=_ref2.columnIndex;gridRef.current&&gridRef.current.resetAfterIndices({rowIndex:rowIndex,columnIndex:columnIndex})}),[]),debounceResizer=react_1.useRef(null);react_1.useEffect((function(){getValueRef.current=getValue,viewPortRef.current=viewport,hiddenRowRef.current=isHiddenRow})),react_1.useEffect((function(){isMounted.current=!0,debounceResizer.current=helpers_1.debounce(handleResize,timeout)}),[]),react_1.useEffect((function(){autoSizer.current.setFont({fontFamily:fontFamily,fontSize:fontSize,fontWeight:fontWeight,fontStyle:fontStyle})}),[fontFamily,fontSize,fontWeight,fontStyle]);var getTextMetrics=react_1.useCallback((function(text){return autoSizer.current.measureText(helpers_1.castToString(text))}),[]),getCellWidth=react_1.useCallback((function(rowIndex,columnIndex){var _a,_b,_c,cellValue=null!==(_b=null===(_a=getValueRef.current)||void 0===_a?void 0:_a.call(getValueRef,{rowIndex:rowIndex,columnIndex:columnIndex}))&&void 0!==_b?_b:null,width=null!==(_c=null==cellValue?void 0:cellValue.spacing)&&void 0!==_c?_c:0;if(null!==cellValue){var isCellConfig="object"===_typeof(cellValue),text=getText(cellValue);if(void 0!==helpers_1.cellIdentifier&&!helpers_1.isNull(text)&&void 0!==text){if(autoSizer.current.reset(),isCellConfig){var isBold=cellValue.bold;autoSizer.current.setFont({fontWeight:isBold?"bold":"",fontSize:(cellValue.fontSize||fontSize)*scale,fontFamily:cellValue.fontFamily,fontStyle:cellValue.italic?"italic":""})}var metrics=autoSizer.current.measureText(text);metrics&&(width+=Math.ceil(metrics.width)+cellSpacing)}}return width}),[scale]),getColumnWidth=react_1.useCallback((function(columnIndex){for(var _a,_b,_c,_ref3=null!==(_a=viewPortRef.current)&&void 0!==_a?_a:{},_ref3$rowStartIndex=_ref3.rowStartIndex,rowStartIndex=void 0===_ref3$rowStartIndex?0:_ref3$rowStartIndex,_ref3$rowStopIndex=_ref3.rowStopIndex,visibleRows="full"===resizeStrategy?rowCount:(void 0===_ref3$rowStopIndex?0:_ref3$rowStopIndex)||initialVisibleRows,start="full"===resizeStrategy?0:rowStartIndex,maxWidth=minColumnWidth,i=0;i<frozenRows;i++)if(!(null===(_b=hiddenRowRef.current)||void 0===_b?void 0:_b.call(hiddenRowRef,i))){var width=getCellWidth(i,columnIndex);width>maxWidth&&(maxWidth=width)}for(;start<visibleRows;)if(null===(_c=hiddenRowRef.current)||void 0===_c?void 0:_c.call(hiddenRowRef,start))start++;else{var _width=getCellWidth(start,columnIndex);_width>maxWidth&&(maxWidth=_width),start++}return maxWidth/scale}),[viewport,initialVisibleRows,frozenRows,scale]),handleViewChange=react_1.useCallback((function(cells){if(setViewport(cells),"full"!==resizeStrategy&&resizeOnScroll&&(cells.rowStartIndex!==viewport.rowStartIndex||cells.columnStartIndex!==viewport.columnStartIndex)&&gridRef.current){if(!isMounted.current)return;debounceResizer.current({rowIndex:cells.rowStartIndex,columnIndex:cells.columnStartIndex})}}),[resizeOnScroll,viewport,resizeStrategy]);return Object.assign({},autoResize?{columnWidth:getColumnWidth}:void 0,{getColumnWidth:getColumnWidth,onViewChange:handleViewChange,getTextMetrics:getTextMetrics})}},789:function(module,exports,__webpack_require__){"use strict";__webpack_require__(16),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),scroller_1=__webpack_require__(790),helpers_1=__webpack_require__(58);exports.default=function useTouch(_ref){var gridRef=_ref.gridRef,scrollerRef=react_1.useRef(null),isTouchDevice=react_1.useRef(!1);react_1.useEffect((function(){var _a,_b,_c,_d,_e,_f,_g;if(isTouchDevice.current=helpers_1.canUseDOM&&"ontouchstart"in window,isTouchDevice.current){null===(_b=null===(_a=gridRef.current)||void 0===_a?void 0:_a.container)||void 0===_b||_b.addEventListener("touchstart",handleTouchStart),null===(_d=null===(_c=gridRef.current)||void 0===_c?void 0:_c.container)||void 0===_d||_d.addEventListener("touchend",handleTouchEnd),null===(_f=null===(_e=gridRef.current)||void 0===_e?void 0:_e.container)||void 0===_f||_f.addEventListener("touchmove",handleTouchMove),scrollerRef.current=new scroller_1.Scroller(handleTouchScroll,{scrollingX:!0,scrollingY:!0,decelerationRate:.95,penetrationAcceleration:.08});var dims=null===(_g=gridRef.current)||void 0===_g?void 0:_g.getDimensions();updateScrollDimensions(dims)}}),[]);var scrollTo=react_1.useCallback((function(_ref2){var scrollLeft=_ref2.scrollLeft,scrollTop=_ref2.scrollTop;scrollerRef.current&&scrollerRef.current.scrollTo(scrollLeft,scrollTop)}),[]),scrollToTop=react_1.useCallback((function(){scrollerRef.current&&scrollerRef.current.scrollTo(0,0)}),[]),updateScrollDimensions=react_1.useCallback((function(_ref3){var containerWidth=_ref3.containerWidth,containerHeight=_ref3.containerHeight,estimatedTotalWidth=_ref3.estimatedTotalWidth,estimatedTotalHeight=_ref3.estimatedTotalHeight;scrollerRef.current.setDimensions(containerWidth,containerHeight,estimatedTotalWidth,estimatedTotalHeight)}),[]),handleTouchScroll=react_1.useCallback((function(scrollLeft,scrollTop){var _a;null===(_a=gridRef.current)||void 0===_a||_a.scrollTo({scrollTop:scrollTop,scrollLeft:scrollLeft})}),[]),handleTouchStart=react_1.useCallback((function(e){scrollerRef.current.doTouchStart(e.touches,e.timeStamp)}),[]),handleTouchMove=react_1.useCallback((function(e){e.preventDefault(),scrollerRef.current.doTouchMove(e.touches,e.timeStamp)}),[]),handleTouchEnd=react_1.useCallback((function(e){scrollerRef.current.doTouchEnd(e.timeStamp)}),[]);return{isTouchDevice:isTouchDevice.current,scrollTo:scrollTo,scrollToTop:scrollToTop}}},792:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(16),__webpack_require__(12),__webpack_require__(120),__webpack_require__(65),__webpack_require__(145),__webpack_require__(124),__webpack_require__(13),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0),helpers_1=__webpack_require__(58),types_1=__webpack_require__(97),defaultGetText=function defaultGetText(text){return text};exports.default=function useCopyPaste(_ref){var _ref$selections=_ref.selections,selections=void 0===_ref$selections?[]:_ref$selections,_ref$activeCell=_ref.activeCell,activeCell=void 0===_ref$activeCell?null:_ref$activeCell,getValue=_ref.getValue,gridRef=_ref.gridRef,onPaste=_ref.onPaste,onCopy=(_ref.onCut,_ref.onCopy),_ref$getText=_ref.getText,getText=void 0===_ref$getText?defaultGetText:_ref$getText,selectionRef=react_1.useRef({selections:selections,activeCell:activeCell,getValue:getValue}),cutSelections=react_1.useRef();react_1.useEffect((function(){selectionRef.current={selections:selections,activeCell:activeCell,getValue:getValue}}),[selections,activeCell,getValue]);var currentSelections=function currentSelections(){var sel=selectionRef.current.selections.length?selectionRef.current.selections:helpers_1.selectionFromActiveCell(selectionRef.current.activeCell);return sel[sel.length-1]};react_1.useEffect((function(){if(gridRef.current)return document.addEventListener("copy",handleCopy),document.addEventListener("paste",handlePaste),document.addEventListener("cut",handleCut),function(){document.removeEventListener("copy",handleCopy),document.removeEventListener("paste",handlePaste),document.removeEventListener("cut",handleCut)}}),[]);var handleCut=react_1.useCallback((function(){var _a;document.activeElement===(null===(_a=gridRef.current)||void 0===_a?void 0:_a.container)&&(cutSelections.current=currentSelections(),handleProgramaticCopy())}),[]),handleCopy=react_1.useCallback((function(e){var _a,_b,_c,_d,_e;if(document.activeElement===(null===(_a=gridRef.current)||void 0===_a?void 0:_a.container)){for(var selection=currentSelections(),bounds=selection.bounds,top=bounds.top,left=bounds.left,right=bounds.right,bottom=bounds.bottom,rows=[],cells=[],i=top;i<=bottom;i++){for(var row=[],cell=[],j=left;j<=right;j++){var coords={rowIndex:i,columnIndex:j},config=Object.assign({},selectionRef.current.getValue(coords),{sourceCell:coords}),value=getText(config);cell.push(config),row.push(value)}rows.push(row),cells.push(cell)}var _helpers_1$prepareCli2=_slicedToArray(helpers_1.prepareClipboardData(rows),2),html=_helpers_1$prepareCli2[0],csv=_helpers_1$prepareCli2[1];null===(_b=e.clipboardData)||void 0===_b||_b.setData(types_1.MimeType.html,html),null===(_c=e.clipboardData)||void 0===_c||_c.setData(types_1.MimeType.plain,csv),null===(_d=e.clipboardData)||void 0===_d||_d.setData(types_1.MimeType.csv,csv),null===(_e=e.clipboardData)||void 0===_e||_e.setData(types_1.MimeType.json,JSON.stringify(cells)),e.preventDefault(),null==onCopy||onCopy([selection])}}),[currentSelections]),handlePaste=function handlePaste(e){var _a,_b,_c,_d;if(document.activeElement===(null===(_a=gridRef.current)||void 0===_a?void 0:_a.container)&&(null===(_b=e.clipboardData)||void 0===_b?void 0:_b.items)){for(var type,value,mimeTypes=[types_1.MimeType.json,types_1.MimeType.html,types_1.MimeType.csv,types_1.MimeType.plain],plainTextValue=null===(_c=e.clipboardData)||void 0===_c?void 0:_c.getData(types_1.MimeType.plain),_i2=0,_mimeTypes=mimeTypes;_i2<_mimeTypes.length&&(type=_mimeTypes[_i2],!(value=null===(_d=e.clipboardData)||void 0===_d?void 0:_d.getData(type)));_i2++);if(type&&value){var rows=[];if(/^text\/html/.test(type)){var nodes=(new DOMParser).parseFromString(value,type).querySelectorAll("table, p, h1, h2, h3, h4, h5, h6");0===nodes.length&&rows.push([plainTextValue]);for(var i=0;i<nodes.length;i++){var node=nodes[i];if("TABLE"===node.nodeName)for(var tableRows=node.querySelectorAll("tr"),_i3=0;_i3<tableRows.length;_i3++){for(var row=[],cells=tableRows[_i3].querySelectorAll("td"),j=0;j<cells.length;j++){var cell=cells[j];row.push(cell.textContent)}rows.push(row)}else rows.push([node.textContent])}}else if(type===types_1.MimeType.json)rows=JSON.parse(value);else if(type===types_1.MimeType.plain)rows=[[value]];else{var _step,_iterator=_createForOfIteratorHelper(value.split("\n"));try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,val=_step.value,_row=[],_iterator2=_createForOfIteratorHelper(val.split(","));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _cell=_step2.value;_row.push(_cell.replace(/^\"|\"$/gi,""))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}rows.push(_row)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}onPaste&&onPaste(rows,selectionRef.current.activeCell,selectionRef.current.selections,cutSelections.current),cutSelections.current=void 0}else console.warn("No clipboard data to paste")}},handleProgramaticCopy=react_1.useCallback((function(){gridRef.current&&(gridRef.current.focus(),document.execCommand("copy"))}),[]),handleProgramaticPaste=react_1.useCallback(_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var text,clipboardData,event;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(gridRef.current){_context.next=2;break}return _context.abrupt("return");case 2:return gridRef.current.focus(),_context.next=5,navigator.clipboard.readText();case 5:text=_context.sent,(clipboardData=new DataTransfer).setData(types_1.MimeType.plain,text),event=new ClipboardEvent("paste",{clipboardData:clipboardData}),handlePaste(event);case 10:case"end":return _context.stop()}}),_callee)}))),[]);return{copy:handleProgramaticCopy,paste:handleProgramaticPaste,cut:handleCut}}},793:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(75),__webpack_require__(16),__webpack_require__(12),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function get(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__importStar(__webpack_require__(0)),PaginationComponent=function PaginationComponent(_ref){for(var currentPage=_ref.currentPage,goToFirst=_ref.goToFirst,goToLast=_ref.goToLast,goToPage=_ref.goToPage,totalPages=_ref.totalPages,nextPage=_ref.nextPage,prevPage=_ref.prevPage,pages=[],_loop=function _loop(i){var isActive=currentPage===i;pages.push(react_1.default.createElement("button",{onClick:function onClick(){return goToPage(i)}},isActive?react_1.default.createElement("strong",null,i):i))},i=1;i<=totalPages;i++)_loop(i);return react_1.default.createElement("div",null,react_1.default.createElement("button",{onClick:goToFirst,disabled:1===currentPage},"First page"),react_1.default.createElement("button",{onClick:prevPage,disabled:1===currentPage},"Prev page"),pages,react_1.default.createElement("button",{onClick:nextPage,disabled:currentPage===totalPages},"Next page"),react_1.default.createElement("button",{onClick:goToLast,disabled:currentPage===totalPages},"Last page"))};exports.default=function usePagination(props){var _props$initialCurrent=props.initialCurrentPage,initialCurrentPage=void 0===_props$initialCurrent?1:_props$initialCurrent,_props$pageSize=props.pageSize,pageSize=void 0===_props$pageSize?10:_props$pageSize,_props$total=props.total,total=void 0===_props$total?0:_props$total,onChange=props.onChange,_props$component=props.component,component=void 0===_props$component?PaginationComponent:_props$component,_react_1$useState2=_slicedToArray(react_1.useState(initialCurrentPage),2),currentPage=_react_1$useState2[0],setCurrentPage=_react_1$useState2[1],totalPages=Math.ceil(total/pageSize);react_1.useEffect((function(){onChange&&onChange(currentPage)}),[currentPage]);var pageProps={currentPage:currentPage,totalPages:totalPages,nextPage:function nextPage(){return setCurrentPage((function(prev){return Math.min(prev+1,totalPages)}))},prevPage:function prevPage(){return setCurrentPage((function(prev){return Math.max(prev-1,1)}))},goToFirst:function goToFirst(){return setCurrentPage(1)},goToLast:function goToLast(){return setCurrentPage(totalPages)},goToPage:function goToPage(page){return setCurrentPage(page)},pageSize:pageSize},paginationComponent=react_1.default.createElement(component,pageProps);return Object.assign({paginationComponent:paginationComponent},pageProps)}},794:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_require__(16),__webpack_require__(12),__webpack_require__(38),__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35),Object.defineProperty(exports,"__esModule",{value:!0});var react_1=__webpack_require__(0);exports.default=function useImage(_ref){var url=_ref.url,crossOrigin=_ref.crossOrigin,_react_1$useState2=_slicedToArray(react_1.useState((function(){return{image:void 0,status:"loading",width:0,height:0}})),2),state=_react_1$useState2[0],setState=_react_1$useState2[1];return react_1.useEffect((function(){if(url){var img=new Image;return img.addEventListener("load",onload),img.addEventListener("error",onerror),crossOrigin&&(img.crossOrigin=crossOrigin),img.src=url,function(){img.removeEventListener("load",onload),img.removeEventListener("error",onerror)}}function onload(){setState({image:img,height:img.height,width:img.width,status:"loaded"})}function onerror(){setState((function(prev){return Object.assign({},prev,{image:void 0,status:"failed"})}))}}),[url,crossOrigin]),state}},795:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"SharedActiveCells",(function(){return SharedActiveCells}));__webpack_require__(12),__webpack_require__(14),__webpack_require__(37),__webpack_require__(18),__webpack_require__(211),__webpack_require__(21),__webpack_require__(74);var react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.default={title:"Collaboration",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8___default.a};var SharedActiveCells=function SharedActiveCells(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_7__.useRef)(),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200,getValue:function getValue(){return""}}),selections=_useSelection.selections,selectionProps=_objectWithoutProperties(_useSelection,["selections"]),touchProps=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__.useTouch)({gridRef:gridRef}),sharedActiveCells=[{label:"User A",isEditing:!1,cell:{rowIndex:1,columnIndex:2},style:{fill:"rgba(0,0,0,0.2)",stroke:"green",strokeWidth:2}},{label:"User B",isEditing:!1,cell:{rowIndex:4,columnIndex:6},style:{stroke:"green",strokeWidth:2}}],_useTooltip=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__.useTooltip)({gridRef:gridRef,getTooltip:function getTooltip(cell){return function(props){var _props$x=props.x,x=void 0===_props$x?0:_props$x,_props$y=props.y,y=void 0===_props$y?0:_props$y,_props$scrollLeft=props.scrollLeft,scrollLeft=void 0===_props$scrollLeft?0:_props$scrollLeft,_props$scrollTop=props.scrollTop,scrollTop=void 0===_props$scrollTop?0:_props$scrollTop,_props$width=props.width,width=void 0===_props$width?0:_props$width,isSharedActiveCell=(props.height,sharedActiveCells.find((function(item){return item.cell.rowIndex===cell.rowIndex&&item.cell.columnIndex===cell.columnIndex})));if(!isSharedActiveCell)return null;var posX=x+width-scrollLeft,posY=y-scrollTop;return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"absolute",left:0,top:0,transform:"translate(".concat(posX,"px, ").concat(posY,"px)"),background:"green",boxShadow:"0 4px 8px 3px rgba(60,64,67,.15)",padding:2,borderTopRightRadius:2,borderBottomRightRadius:2,fontSize:12,fontFamily:"Arial",color:"white"}},isSharedActiveCell.label)}}}),tooltipComponent=_useTooltip.tooltipComponent,tooltipProps=_objectWithoutProperties(_useTooltip,["tooltipComponent"]),borderStyles=sharedActiveCells.map((function(_ref){var cell=_ref.cell,style=_ref.style;return{bounds:{top:cell.rowIndex,bottom:cell.rowIndex,left:cell.columnIndex,right:cell.columnIndex},style:style}}));return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{style:{position:"relative"}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8___default.a,_extends({ref:gridRef,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_8__.Cell,_extends({},props,{value:"".concat(props.rowIndex,":").concat(props.columnIndex)}))},showFillHandle:!0,rowCount:200,columnCount:200,selections:selections,borderStyles:borderStyles},selectionProps,touchProps,tooltipProps)),tooltipComponent)};SharedActiveCells.story={name:"Default"}},796:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default}));__webpack_require__(12),__webpack_require__(18),__webpack_require__(14),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38),__webpack_require__(37),__webpack_require__(27),__webpack_require__(23),__webpack_require__(35);var react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_21__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Copy Paste",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22___default.a};var Default=function Default(){var App=function App(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(_defineProperty({},[1,2],"Hello world")),2),data=_useState2[0],setData=_useState2[1],gridRef=Object(react__WEBPACK_IMPORTED_MODULE_21__.useRef)(),getValue=Object(react__WEBPACK_IMPORTED_MODULE_21__.useCallback)((function(_ref){var rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex;return data[[rowIndex,columnIndex]]}),[data]),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22__.useSelection)({gridRef:gridRef,columnCount:100,rowCount:100}),activeCell=_useSelection.activeCell,selections=_useSelection.selections,setSelections=_useSelection.setSelections,selectionProps=_objectWithoutProperties(_useSelection,["activeCell","selections","setSelections"]),_useCopyPaste=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22__.useCopyPaste)({gridRef:gridRef,selections:selections,activeCell:activeCell,getValue:getValue,onPaste:function onPaste(rows,activeCell){var _step,rowIndex=activeCell.rowIndex,columnIndex=activeCell.columnIndex,endRowIndex=Math.max(rowIndex,rowIndex+rows.length-1),endColumnIndex=Math.max(columnIndex,columnIndex+(rows.length&&rows[0].length-1)),changes={},_iterator=_createForOfIteratorHelper(rows.entries());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step2,_step$value=_slicedToArray(_step.value,2),i=_step$value[0],_iterator2=_createForOfIteratorHelper(_step$value[1].entries());try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _step2$value=_slicedToArray(_step2.value,2),j=_step2$value[0],cell=_step2$value[1];changes[[rowIndex+i,columnIndex+j]]=cell}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}catch(err){_iterator.e(err)}finally{_iterator.f()}setData((function(prev){return _objectSpread(_objectSpread({},prev),changes)})),rowIndex===endRowIndex&&columnIndex===endColumnIndex||setSelections([{bounds:{top:rowIndex,left:columnIndex,bottom:endRowIndex,right:endColumnIndex}}])},onCut:function onCut(selection){for(var bounds=selection.bounds,changes={},i=bounds.top;i<=bounds.bottom;i++)for(var j=bounds.left;j<=bounds.right;j++)changes[[i,j]]=void 0;setData((function(prev){return _objectSpread(_objectSpread({},prev),changes)}))}}),copy=_useCopyPaste.copy,paste=_useCopyPaste.paste;return react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_21___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement("button",{onClick:function onClick(){return copy()}},"Copy"),react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement("button",{onClick:function onClick(){return paste()}},"Paste"),react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22___default.a,_extends({activeCell:activeCell,selections:selections,ref:gridRef,rowCount:100,columnCount:100,columnWidth:function columnWidth(){return 100},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_22__.Cell,_extends({},props,{value:data[[props.rowIndex,props.columnIndex]]}))}},selectionProps)))};return react__WEBPACK_IMPORTED_MODULE_21___default.a.createElement(App,null)};Default.story={name:"Copy cells"}},797:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CanvasOverlay",(function(){return CanvasOverlay})),__webpack_require__.d(__webpack_exports__,"ChartJs",(function(){return ChartJs}));__webpack_require__(18),__webpack_require__(14),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(27),__webpack_require__(13),__webpack_require__(23),__webpack_require__(35),__webpack_require__(20),__webpack_require__(26),__webpack_require__(29),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38);var react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),react_konva__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(3),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21__);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Overlays",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21___default.a};var Resizable=function Resizable(_ref){var scrollTop=_ref.scrollTop,scrollLeft=_ref.scrollLeft,isSelected=_ref.isSelected,onSelect=_ref.onSelect,trRef=Object(react__WEBPACK_IMPORTED_MODULE_19__.useRef)(null),shapeRef=Object(react__WEBPACK_IMPORTED_MODULE_19__.useRef)();Object(react__WEBPACK_IMPORTED_MODULE_19__.useEffect)((function(){isSelected&&(trRef.current.attachTo(shapeRef.current),trRef.current.getLayer().batchDraw())}),[isSelected]);var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_19__.useState)({x:100,y:100,width:100,height:100}),2),dimensions=_useState2[0],setDimensions=_useState2[1],x=dimensions.x-scrollLeft,y=dimensions.y-scrollTop;return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_19___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_20__.Rect,{onMouseDown:onSelect,ref:shapeRef,draggable:!0,onDragEnd:function onDragEnd(e){setDimensions((function(prev){return _objectSpread(_objectSpread({},prev),{},{x:e.target.x()+scrollLeft,y:e.target.y()+scrollTop})}))},onTransformEnd:function onTransformEnd(e){var node=shapeRef.current,scaleX=node.scaleX(),scaleY=node.scaleY();node.scaleX(1),node.scaleY(1),setDimensions({x:node.x(),y:node.y(),width:Math.max(5,node.width()*scaleX),height:Math.max(node.height()*scaleY)})},fill:"lightblue",stroke:"#aaa",strokeWidth:1,x:x,y:y,width:dimensions.width,height:dimensions.height}),isSelected&&react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_20__.Transformer,{ref:trRef,rotateEnabled:!1,boundBoxFunc:function boundBoxFunc(oldBox,newBox){return newBox.width<5||newBox.height<5?oldBox:newBox}}))},CanvasOverlay=function CanvasOverlay(){var App=function App(){var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_19__.useState)(!1),2),isSelected=_useState4[0],setIsSelected=_useState4[1];return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21___default.a,{rowCount:100,columnCount:100,stageProps:{onMouseDown:function handleMouseDown(e){!0!==e.target.attrs.draggable&&setIsSelected(!1)}}},(function(_ref2){var scrollTop=_ref2.scrollTop,scrollLeft=_ref2.scrollLeft;return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_20__.Layer,null,react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(Resizable,{scrollTop:scrollTop,scrollLeft:scrollLeft,isSelected:isSelected,onSelect:function onSelect(){setIsSelected(!0)}}))}))};return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(App,null)},ChartJSLayer=function ChartJSLayer(){var canvasRef=Object(react__WEBPACK_IMPORTED_MODULE_19__.useRef)(null),_useReducer2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_19__.useReducer)((function(s){return s+1}),0),2),forceRender=(_useReducer2[0],_useReducer2[1]);return Object(react__WEBPACK_IMPORTED_MODULE_19__.useEffect)((function(){canvasRef.current=document.createElement("canvas"),canvasRef.current.width=600,canvasRef.current.height=400,document.body.appendChild(canvasRef.current);var ctx=canvasRef.current.getContext("2d");new Chart(ctx,{type:"bar",data:{labels:["January","February","March","April","May","June","July"],datasets:[{label:"My First dataset",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[0,10,5,2,20,30,45]}]},options:{animation:!1}});document.body.removeChild(canvasRef.current),forceRender()}),[]),canvasRef.current?react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_20__.Image,{image:canvasRef.current,draggable:!0,fill:"white",stroke:"#aaa",x:100,y:100,width:600,height:400}):null},ChartJs=function ChartJs(){return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_21___default.a,{rowCount:100,columnCount:100},(function(_ref3){_ref3.scrollTop,_ref3.scrollLeft;return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_20__.Layer,null,react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(ChartJSLayer,null))}))}},798:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Pagination",(function(){return Pagination}));__webpack_require__(12),__webpack_require__(14),__webpack_require__(37),__webpack_require__(18),__webpack_require__(21);var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.default={title:"Pagination",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default.a};var Pagination=function Pagination(){var App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.useSelection)({gridRef:gridRef}),selections=_useSelection.selections,selectionProps=_objectWithoutProperties(_useSelection,["selections"]),_usePagination=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.usePagination)({pageSize:8,total:100,onChange:function onChange(page){}}),currentPage=_usePagination.currentPage,paginationComponent=_usePagination.paginationComponent;return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default.a,_extends({ref:gridRef,rowCount:8,columnCount:100,selections:selections,rowHeight:function rowHeight(){return 60},itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.Cell,_extends({},props,{padding:0,value:"Page: ".concat(currentPage," Row: ").concat(props.rowIndex+8*(currentPage-1))}))}},selectionProps)),paginationComponent)};return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(App,null)};Pagination.story={name:"Pagination"}},799:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Borders",(function(){return Borders}));__webpack_require__(12),__webpack_require__(14),__webpack_require__(37),__webpack_require__(18);var react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.default={title:"Styling",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5___default.a};var Borders=function Borders(){var App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_4__.useRef)(),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5__.useSelection)({gridRef:gridRef}),selections=_useSelection.selections,selectionProps=_objectWithoutProperties(_useSelection,["selections"]);return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_5___default.a,_extends({ref:gridRef,rowCount:100,columnCount:100,selections:selections,borderStyles:[{bounds:{top:1,left:1,right:1,bottom:1},style:{strokeWidth:1,stroke:"red"}},{bounds:{top:5,left:5,right:8,bottom:8},style:{strokeWidth:1,stroke:"green",fill:"red"}}]},selectionProps))};return react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(App,null)};Borders.story={name:"Borders"}},800:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ThemedGrid",(function(){return ThemedGrid}));__webpack_require__(12),__webpack_require__(27),__webpack_require__(13),__webpack_require__(23),__webpack_require__(35),__webpack_require__(20),__webpack_require__(14),__webpack_require__(26),__webpack_require__(29),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38),__webpack_require__(21);var react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Themes",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14___default.a};var darkTheme={cellColor:"#ccc",cellBackground:"#181E20",cellOddBackground:"#444"},lightTheme={cellColor:"#333",cellBackground:"white",cellOddBackground:"#eee"},ThemeContext=Object(react__WEBPACK_IMPORTED_MODULE_13__.createContext)(lightTheme),ThemedGrid=function ThemedGrid(){var App=function App(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_13__.useState)(lightTheme),2),theme=_useState2[0],setTheme=_useState2[1],gridRef=Object(react__WEBPACK_IMPORTED_MODULE_13__.useRef)(null);return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_13___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement("button",{type:"button",onClick:function switchTheme(){setTheme((function(prev){return prev===lightTheme?darkTheme:lightTheme}))}},"Switch to ",theme===lightTheme?"Dark":"Light"),react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14___default.a,{ref:gridRef,rowCount:100,columnCount:100,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(ThemedCell,props)},wrapper:function wrapper(children){return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(ThemeContext.Provider,{value:theme},children)}}))};return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(App,null)},ThemedCell=function ThemedCell(props){var theme=Object(react__WEBPACK_IMPORTED_MODULE_13__.useContext)(ThemeContext),fill=props.rowIndex%2==0?theme.cellBackground:theme.cellOddBackground;return react__WEBPACK_IMPORTED_MODULE_13___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_14__.Cell,_extends({},props,{value:"".concat(props.rowIndex," x ").concat(props.columnIndex),fill:fill,textColor:theme.cellColor}))};ThemedGrid.story={name:"Dark mode"}},801:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TickingGrid",(function(){return TickingGrid}));__webpack_require__(14),__webpack_require__(37),__webpack_require__(18),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(27),__webpack_require__(13),__webpack_require__(23),__webpack_require__(35),__webpack_require__(20),__webpack_require__(26),__webpack_require__(29),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38),__webpack_require__(12),__webpack_require__(344);var react__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_22__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}__webpack_exports__.default={title:"Ticking",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default.a};var generateKey=function generateKey(){var min=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,rowIndex=Math.floor(30*Math.random())+min,columnIndex=Math.floor(30*Math.random())+min;return[rowIndex,columnIndex]},DataCell=Object(react__WEBPACK_IMPORTED_MODULE_22__.memo)((function(props){var color=props.value>0?"green":"red";return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.Cell,_extends({},props,{textColor:color,align:"right",padding:5}))})),TickingGrid=function TickingGrid(){var _useState3,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_22__.useState)((_defineProperty(_useState3={},[0,0],1),_defineProperty(_useState3,[0,2],-20),_useState3)),2),data=_useState2[0],setData=_useState2[1],gridRef=Object(react__WEBPACK_IMPORTED_MODULE_22__.useRef)();Object(react__WEBPACK_IMPORTED_MODULE_22__.useEffect)((function(){var interval=setInterval((function(){setData((function(prev){var _objectSpread2,isNegative=Math.random()<.5?-1:1,key=generateKey(),key2=generateKey();return _objectSpread(_objectSpread({},prev),{},(_defineProperty(_objectSpread2={},key,isNegative*Math.floor(100*Math.random())+1),_defineProperty(_objectSpread2,key2,isNegative*Math.floor(100*Math.random())+1),_objectSpread2))}))}),20);return function(){return clearInterval(interval)}}),[]);var getValue=Object(react__WEBPACK_IMPORTED_MODULE_22__.useCallback)((function(_ref){var rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex;return data[[rowIndex,columnIndex]]}),[data]),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200}),selections=_useSelection.selections,selectionProps=_objectWithoutProperties(_useSelection,["selections"]);return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default.a,_extends({ref:gridRef,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(DataCell,_extends({},props,{value:getValue({rowIndex:props.rowIndex,columnIndex:props.columnIndex})}))},rowCount:200,columnCount:200,selections:selections},selectionProps))};TickingGrid.story={name:"Default"}},802:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TouchGrid",(function(){return TouchGrid}));__webpack_require__(12),__webpack_require__(14),__webpack_require__(37),__webpack_require__(18),__webpack_require__(21);var react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.default={title:"Mobile (touch)",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default.a};var TouchGrid=function TouchGrid(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_5__.useRef)(),_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.useSelection)({gridRef:gridRef,rowCount:200,columnCount:200}),selections=_useSelection.selections,selectionProps=_objectWithoutProperties(_useSelection,["selections"]),touchProps=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.useTouch)({gridRef:gridRef});return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6___default.a,_extends({ref:gridRef,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_6__.Cell,_extends({},props,{value:"".concat(props.rowIndex,":").concat(props.columnIndex)}))},rowCount:200,columnCount:200,selections:selections},selectionProps,touchProps))};TouchGrid.story={name:"Default"}},803:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"TreeTable",(function(){return TreeTable})),__webpack_require__.d(__webpack_exports__,"ExpandCollapseRows",(function(){return ExpandCollapseRows}));__webpack_require__(14),__webpack_require__(26),__webpack_require__(13),__webpack_require__(29),__webpack_require__(20),__webpack_require__(19),__webpack_require__(22),__webpack_require__(35),__webpack_require__(38),__webpack_require__(12),__webpack_require__(18),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(37),__webpack_require__(27),__webpack_require__(23),__webpack_require__(86),__webpack_require__(87),__webpack_require__(21),__webpack_require__(84),__webpack_require__(120),__webpack_require__(65),__webpack_require__(226);var react__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_28___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_28__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__),react_konva__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(3);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Treetable",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29___default.a};var TreeTable=function TreeTable(){var ColumnHeader=function ColumnHeader(_ref){var _data,rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex,x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height,data=_ref.data,headers=_ref.headers,onToggleNode=_ref.onToggleNode,treeState=_ref.treeState,column=headers[columnIndex]&&headers[columnIndex].name,datapoint=data[rowIndex-2],text=column&&data[rowIndex-2]?data[rowIndex-2].text:null,hasKids=datapoint&&datapoint.kids,isOpen=!!data[rowIndex-2]&&treeState.open.includes(data[rowIndex-2].id),paddingLeft=8+12*((null===(_data=data[rowIndex-2])||void 0===_data?void 0:_data.depth)||0);return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Group,null,react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"#ccc",strokeWidth:.5}),hasKids&&react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.RegularPolygon,{x:x+paddingLeft,y:y+10,sides:3,radius:5,rotation:isOpen?180:90,fill:"#333",onClick:function onClick(){return onToggleNode(data[rowIndex-2].id,!isOpen)},hitStrokeWidth:20}),text&&react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Text,{x:x+paddingLeft+8,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"left"}))},RowHeader=function RowHeader(_ref2){_ref2.rowIndex;var columnIndex=_ref2.columnIndex,x=_ref2.x,y=_ref2.y,width=_ref2.width,height=_ref2.height,headers=_ref2.headers,text=headers[columnIndex]&&headers[columnIndex].header[columnIndex-1].name,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_28__.useState)(!1),2),setIsHovered=(_useState2[0],_useState2[1]);return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Group,{onMouseEnter:function onMouseEnter(){return setIsHovered(!0)},onMouseLeave:function onMouseLeave(){return setIsHovered(!1)}},react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Rect,{x:x,y:y,height:height,width:width,fill:"#eee",stroke:"#ccc",strokeWidth:.5}),text&&react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_28___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Text,{x:x,y:y,height:height,width:width,text:text,verticalAlign:"middle",align:"center"})))},Cell=function Cell(_ref3){var rowIndex=_ref3.rowIndex,columnIndex=_ref3.columnIndex,x=_ref3.x,y=_ref3.y,width=_ref3.width,height=_ref3.height,data=(_ref3.isHovered,_ref3.data),headers=_ref3.headers,frozenRows=_ref3.frozenRows,column=headers[columnIndex]&&headers[columnIndex].name,text=column&&data[rowIndex-frozenRows]?data[rowIndex-frozenRows][column]:null;return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_28___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Rect,{x:x,y:y,height:height,width:width,fill:"white",stroke:"#ccc",strokeWidth:.5}),text&&react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Text,{x:x,y:y,offsetX:10,height:height,width:width,text:text,verticalAlign:"middle",align:"right"}))},EmptyCell=function EmptyCell(_ref4){var rowIndex=_ref4.rowIndex,columnIndex=_ref4.columnIndex,x=_ref4.x,y=_ref4.y,width=_ref4.width,height=_ref4.height;"".concat(rowIndex,"x").concat(columnIndex);return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_28___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.Rect,{x:x,y:y,height:height,width:width,fill:"#eee",stroke:"#ccc",strokeWidth:.5}))},App=function App(){var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_28__.useState)({open:[]}),2),treeState=_useState4[0],setTreeState=_useState4[1],headers=[{name:"id",header:["id"]},{name:"Aggregate",header:[{name:"Group Header"},{name:"Aggregated Value"}]},{name:"Aggregate",header:[null,{name:"Aggregated Value 2"}]}],data=[{id:"Parent",text:"Parent",Aggregate:.2012312312,parent:"",leaf:!1,kids:!0,depth:0},{id:"Parent_Child",text:"Child",Aggregate:12.02,parent:"Parent",leaf:!0,kids:!0,depth:1},{id:"Parent_Child_GrandChild",text:"Grandchild",Aggregate:12.02,parent:"Parent_Child",leaf:!0,kids:!1,depth:2}].filter((function(item){var grandParents=item.parent.split("_").reduce((function(acc,item,index,arr){var prev=arr[index-1]?arr[index-1]+"_":"";return acc.push(prev+item),acc}),[]);return!item.parent||!grandParents.some((function(id){return!treeState.open.includes(id)}))&&treeState.open.includes(item.parent)})),gridRef=Object(react__WEBPACK_IMPORTED_MODULE_28__.useRef)(),_useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_28__.useState)({rowIndex:0,columnIndex:0}),2),setHoveredCell=(_useState6[0],_useState6[1]),rowCount=data.length+2,columnCount=headers.length+1,_useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__.useSelection)({gridRef:gridRef,rowCount:rowCount,columnCount:columnCount}),selection=_useSelection.selection,selectionProps=_objectWithoutProperties(_useSelection,["selection"]),onToggleNode=Object(react__WEBPACK_IMPORTED_MODULE_28__.useCallback)((function(id,isOpen){setTreeState((function(prev){return _objectSpread(_objectSpread({},prev),{},{open:isOpen?prev.open.concat(id):prev.open.filter((function(item){return item!==id}))})}))}),[]);return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29___default.a,_extends({ref:gridRef,width:900,height:600,columnCount:columnCount,rowCount:rowCount,selection:selection,frozenRows:2,frozenColumns:1,mergedCells:[{top:0,left:0,right:0,bottom:1},{top:0,left:1,right:2,bottom:0}],columnWidth:function columnWidth(index){return 150},onMouseMove:function onMouseMove(_,rowIndex,columnIndex){return setHoveredCell({rowIndex:rowIndex,columnIndex:columnIndex})},itemRenderer:function itemRenderer(props){return props.rowIndex<2&&props.columnIndex<1?react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(EmptyCell,props):props.rowIndex<2?react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(RowHeader,_extends({headers:headers},props)):props.columnIndex<1?react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(ColumnHeader,_extends({treeState:treeState,data:data,headers:headers,onToggleNode:onToggleNode},props)):react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(Cell,_extends({frozenRows:2,data:data,headers:headers},props))},rowHeight:function rowHeight(index){return 20}},selectionProps))};return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(App,null)},ExpandCollapseRows=function ExpandCollapseRows(){var App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_28__.useRef)(),_useState8=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_28__.useState)([]),2),open=_useState8[0],toggleOpen=_useState8[1],headers=[{name:"Title"},{name:"Year"},{name:"Votes"}],data=[{id:1,Title:"The Shawshank Redemption",Year:"1994",Votes:"678790"},{parentId:1,Details:"Andy Dufresne, a successful banker, is arrested for the murders of his wife and her lover, and is sentenced to life imprisonment at the Shawshank prison. He becomes the most unconventional prisoner."},{id:2,Title:"The Godfather",Year:1972,Votes:511495},{parentId:2,Details:"Don Vito Corleone, head of a mafia family, decides to hand over his empire to his youngest son Michael. However, his decision unintentionally puts the lives of his loved ones in grave danger."},{id:3,Title:"The Godfather: Part II",Year:"1974",Votes:319352},{parentId:3,Details:"Michael, Vito Corleone's son, attempts to expand his family's criminal empire. While he strikes a business deal with gangster Hyman Roth, he remains unaware of the lurking danger."}].filter((function(row){return!row.parentId||open.includes(row.parentId)})),rowCount=data.length+1,columnCount=headers.length,_useSelection2=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__.useSelection)({gridRef:gridRef,rowCount:rowCount,columnCount:columnCount}),selections=_useSelection2.selections,selectionProps=_objectWithoutProperties(_useSelection2,["selections"]),mergedCells=data.reduce((function(acc,row,index){return row.parentId&&acc.push({top:index+1,left:0,right:columnCount-1,bottom:index+1}),acc}),[]),handleToggle=Object(react__WEBPACK_IMPORTED_MODULE_28__.useCallback)((function(rowIndex,columnIndex){var row=data[rowIndex];row&&row.id&&(toggleOpen((function(prev){return prev.includes(row.id)?prev.filter((function(id){return id!==row.id})):[].concat(_toConsumableArray(prev),[row.id])})),gridRef.current.resetAfterIndices({rowIndex:rowIndex},!0))}),[data]);return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29___default.a,_extends({mergedCells:mergedCells,ref:gridRef,rowCount:rowCount,columnCount:columnCount,columnWidth:function columnWidth(columnIndex){return 0===columnIndex?300:100},rowHeight:function rowHeight(rowIndex){var item=data[rowIndex-1];return item&&item.Details?40:20},itemRenderer:function itemRenderer(props){var _headers$columnIndex2,_data$dataStartRowInd,_headers$columnIndex,rowIndex=props.rowIndex,columnIndex=props.columnIndex;if(props.rowIndex<1)return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__.Cell,_extends({},props,{align:"left",value:null===(_headers$columnIndex=headers[columnIndex])||void 0===_headers$columnIndex?void 0:_headers$columnIndex.name,fill:"#eee"}));var dataStartRowIndex=rowIndex-1,key=null===(_headers$columnIndex2=headers[columnIndex])||void 0===_headers$columnIndex2?void 0:_headers$columnIndex2.name,id=null===(_data$dataStartRowInd=data[dataStartRowIndex])||void 0===_data$dataStartRowInd?void 0:_data$dataStartRowInd.id,details=data[dataStartRowIndex]?data[dataStartRowIndex].Details:null,value=key&&data[dataStartRowIndex]?data[dataStartRowIndex][key]:"",isOpen=open.includes(id),toggleable=0===columnIndex&&value&&!details;return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_29__.Cell,_extends({onClick:function onClick(){return handleToggle(dataStartRowIndex,columnIndex)},verticalAlign:details?"top":"middle",value:value||details},props,{align:"left",padding:toggleable?20:5,wrap:"word"}),0===columnIndex&&value&&!details?react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(react_konva__WEBPACK_IMPORTED_MODULE_30__.RegularPolygon,{x:props.x+10,y:props.y+10,sides:3,radius:5,fill:"black",rotation:isOpen?180:90,hitStrokeWidth:20}):null)},frozenRows:1,selections:selections},selectionProps))};return react__WEBPACK_IMPORTED_MODULE_28___default.a.createElement(App,null)};ExpandCollapseRows.story={name:"Expand collapse rows"}},804:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"UndoRedo",(function(){return UndoRedo}));__webpack_require__(12),__webpack_require__(18),__webpack_require__(14),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16),__webpack_require__(27),__webpack_require__(13),__webpack_require__(23),__webpack_require__(35),__webpack_require__(20),__webpack_require__(26),__webpack_require__(29),__webpack_require__(19),__webpack_require__(22),__webpack_require__(38),__webpack_require__(37),__webpack_require__(84);var react__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_22__),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2),_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.default={title:"Undo Redo",component:_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default.a};var UndoRedo=function UndoRedo(){var App=function App(){var gridRef=Object(react__WEBPACK_IMPORTED_MODULE_22__.useRef)(),_useUndo=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.useUndo)({onUndo:function onUndo(patches){var path=patches.path,value=patches.value,_path=_slicedToArray(path,2),key=_path[0],_path$=_path[1],rowIndex=_path$.rowIndex,columnIndex=_path$.columnIndex;"data"===key&&(setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[rowIndex,columnIndex],value))})),setActiveCell({rowIndex:rowIndex,columnIndex:columnIndex}))},onRedo:function onRedo(patches){var path=patches.path,value=patches.value,_path2=_slicedToArray(path,2),key=_path2[0],_path2$=_path2[1],rowIndex=_path2$.rowIndex,columnIndex=_path2$.columnIndex;"data"===key&&(setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[rowIndex,columnIndex],value))})),setActiveCell({rowIndex:rowIndex,columnIndex:columnIndex}))}}),undo=_useUndo.undo,redo=_useUndo.redo,addToUndoStack=_useUndo.add,canUndo=_useUndo.canUndo,canRedo=_useUndo.canRedo,undoProps=_objectWithoutProperties(_useUndo,["undo","redo","add","canUndo","canRedo"]),_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_22__.useState)({"1,1":"Hello"}),2),data=_useState2[0],setData=_useState2[1],getCellValue=Object(react__WEBPACK_IMPORTED_MODULE_22__.useCallback)((function(_ref){var rowIndex=_ref.rowIndex,columnIndex=_ref.columnIndex;return data[[rowIndex,columnIndex]]}),[data]),cellValueRef=Object(react__WEBPACK_IMPORTED_MODULE_22__.useRef)();cellValueRef.current=getCellValue;var _useSelection=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.useSelection)({rowCount:100,columnCount:100,gridRef:gridRef}),selections=_useSelection.selections,activeCell=_useSelection.activeCell,setActiveCell=_useSelection.setActiveCell,selectionProps=_objectWithoutProperties(_useSelection,["selections","activeCell","setActiveCell"]),_useEditable=Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.useEditable)({gridRef:gridRef,getValue:getCellValue,selections:selections,activeCell:activeCell,onDelete:function onDelete(activeCell,selections){if(selections.length){var newValues=selections.reduce((function(acc,_ref2){for(var sel=_ref2.bounds,i=sel.top;i<=sel.bottom;i++)for(var j=sel.left;j<=sel.right;j++)acc[[i,j]]="";return acc}),{});setData((function(prev){return _objectSpread(_objectSpread({},prev),newValues)}));var selectionBounds=selections[0].bounds;gridRef.current.resetAfterIndices({columnIndex:selectionBounds.left,rowIndex:selectionBounds.top},!0)}else activeCell&&(addToUndoStack(Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.createPatches)(["data",activeCell],void 0,cellValueRef.current(activeCell))),setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[activeCell.rowIndex,activeCell.columnIndex],""))})),gridRef.current.resetAfterIndices(activeCell))},onSubmit:function onSubmit(value,cell,nextActiveCell){var rowIndex=cell.rowIndex,columnIndex=cell.columnIndex,previousValue=cellValueRef.current(cell);setData((function(prev){return _objectSpread(_objectSpread({},prev),{},_defineProperty({},[rowIndex,columnIndex],value))})),gridRef.current.resizeColumns([columnIndex]),addToUndoStack(Object(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.createPatches)(["data",cell],value,previousValue)),nextActiveCell&&setActiveCell(nextActiveCell)}}),editorComponent=_useEditable.editorComponent,editableProps=(_useEditable.editingCell,_useEditable.isEditInProgress,_objectWithoutProperties(_useEditable,["editorComponent","editingCell","isEditInProgress"]));return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23___default.a,_extends({ref:gridRef,activeCell:activeCell,rowCount:100,columnCount:100,selections:selections,itemRenderer:function itemRenderer(props){return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(_rowsncolumns_grid__WEBPACK_IMPORTED_MODULE_23__.Cell,_extends({},props,{padding:0,value:getCellValue({rowIndex:props.rowIndex,columnIndex:props.columnIndex})}))}},selectionProps,editableProps,{onKeyDown:function onKeyDown(){selectionProps.onKeyDown.apply(selectionProps,arguments),editableProps.onKeyDown.apply(editableProps,arguments),undoProps.onKeyDown.apply(undoProps,arguments)},onMouseDown:function onMouseDown(){selectionProps.onMouseDown.apply(selectionProps,arguments),editableProps.onMouseDown.apply(editableProps,arguments)}})),editorComponent,react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement("button",{disabled:!canUndo,onClick:undo},"Undo"),react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement("button",{disabled:!canRedo,onClick:redo},"Redo"))};return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(App,null)};UndoRedo.story={name:"Default"}},805:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject);__webpack_require__(18),__webpack_require__(14),__webpack_require__(47),__webpack_require__(94),__webpack_require__(43),__webpack_require__(44),__webpack_require__(95),__webpack_require__(96),__webpack_require__(16);var client_api=__webpack_require__(808),esm=__webpack_require__(5);__webpack_require__(193);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.b)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.c)(loader,!1)}));case"parameters":return Object(client_api.d)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.d)(v,!1);default:return console.log(key+" was not supported :( !")}}))},97:function(module,exports,__webpack_require__){"use strict";__webpack_require__(16),Object.defineProperty(exports,"__esModule",{value:!0}),exports.MouseButtonCodes=exports.MimeType=exports.Direction=exports.KeyCodes=void 0,function(KeyCodes){KeyCodes[KeyCodes.Right=39]="Right",KeyCodes[KeyCodes.Left=37]="Left",KeyCodes[KeyCodes.Up=38]="Up",KeyCodes[KeyCodes.Down=40]="Down",KeyCodes[KeyCodes.Escape=27]="Escape",KeyCodes[KeyCodes.Tab=9]="Tab",KeyCodes[KeyCodes.Meta=91]="Meta",KeyCodes[KeyCodes.Delete=46]="Delete",KeyCodes[KeyCodes.BackSpace=8]="BackSpace",KeyCodes[KeyCodes.Enter=13]="Enter",KeyCodes[KeyCodes.A=65]="A",KeyCodes[KeyCodes.SPACE=32]="SPACE",KeyCodes[KeyCodes.ALT=18]="ALT",KeyCodes[KeyCodes.C=67]="C",KeyCodes[KeyCodes.Home=36]="Home",KeyCodes[KeyCodes.End=35]="End",KeyCodes[KeyCodes.PageDown=34]="PageDown",KeyCodes[KeyCodes.PageUp=33]="PageUp",KeyCodes[KeyCodes.Z=90]="Z",KeyCodes[KeyCodes.CapsLock=20]="CapsLock",KeyCodes[KeyCodes.KEY_B=66]="KEY_B",KeyCodes[KeyCodes.KEY_I=73]="KEY_I",KeyCodes[KeyCodes.KEY_U=85]="KEY_U",KeyCodes[KeyCodes.KEY_X=88]="KEY_X",KeyCodes[KeyCodes.KEY_L=76]="KEY_L",KeyCodes[KeyCodes.KEY_E=69]="KEY_E",KeyCodes[KeyCodes.KEY_R=82]="KEY_R",KeyCodes[KeyCodes.BACK_SLASH=220]="BACK_SLASH",KeyCodes[KeyCodes.KEY_Y=89]="KEY_Y",KeyCodes[KeyCodes.ScrollLock=145]="ScrollLock",KeyCodes[KeyCodes.NumLock=144]="NumLock",KeyCodes[KeyCodes.Pause=19]="Pause",KeyCodes[KeyCodes.Insert=45]="Insert",KeyCodes[KeyCodes.F1=112]="F1",KeyCodes[KeyCodes.F2=113]="F2",KeyCodes[KeyCodes.F3=114]="F3",KeyCodes[KeyCodes.F4=115]="F4",KeyCodes[KeyCodes.F5=116]="F5",KeyCodes[KeyCodes.F6=117]="F6",KeyCodes[KeyCodes.F7=118]="F7",KeyCodes[KeyCodes.F8=119]="F8",KeyCodes[KeyCodes.F9=120]="F9",KeyCodes[KeyCodes.F10=121]="F10",KeyCodes[KeyCodes.F11=122]="F11",KeyCodes[KeyCodes.F12=123]="F12"}(exports.KeyCodes||(exports.KeyCodes={})),function(Direction){Direction.Up="UP",Direction.Down="DOWN",Direction.Left="LEFT",Direction.Right="RIGHT"}(exports.Direction||(exports.Direction={})),function(MimeType){MimeType.html="text/html",MimeType.csv="text/csv",MimeType.plain="text/plain",MimeType.json="application/json"}(exports.MimeType||(exports.MimeType={})),function(MouseButtonCodes){MouseButtonCodes[MouseButtonCodes.left=1]="left",MouseButtonCodes[MouseButtonCodes.middle=2]="middle",MouseButtonCodes[MouseButtonCodes.right=3]="right"}(exports.MouseButtonCodes||(exports.MouseButtonCodes={}))}},[[372,1,2]]]);